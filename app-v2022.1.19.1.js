!function(c){function e(e){for(var t,n,a=e[0],i=e[1],o=e[2],r=0,l=[];r<a.length;r++)n=a[r],Object.prototype.hasOwnProperty.call(d,n)&&d[n]&&l.push(d[n][0]),d[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(c[t]=i[t]);for(p&&p(e);l.length;)l.shift()();return u.push.apply(u,o||[]),s()}function s(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,i=1;i<n.length;i++){var o=n[i];0!==d[o]&&(a=!1)}a&&(u.splice(t--,1),e=r(r.s=n[0]))}return e}var n={},d={0:0},u=[];function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return c[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=c,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var t=(a=window.webpackJsonp=window.webpackJsonp||[]).push.bind(a);a.push=e;for(var a=a.slice(),i=0;i<a.length;i++)e(a[i]);var p=t;u.push([0,1]),s()}({"+sMy":function(e,t,n){n.p=window.parent._CHAT_GLOBAL_API_CONFIG_.PUBLIC_URL},"/4v3":function(e,t,n){var a={"./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){e=o(e);return n(e)}function o(e){if(n.o(a,e))return a[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(a)},i.resolve=o,(e.exports=i).id="/4v3"},0:function(e,t,n){n("55Il"),e.exports=n("tjUo")},"04Oa":function(e,t,n){e.exports=n.p+"static/icon-desktop@2x.png"},"5ytX":function(e,t,n){e.exports=n.p+"static/photo-sending.png"},"8wN3":function(e){e.exports=JSON.parse('{"美洽":"美洽","来鼓":"来鼓","点击问题或回复数字查看答案":"點擊問題或回覆數字查看答案","给我们留言":"給我們留言","分类":"分類","姓名":"姓名","手机":"手機","邮箱":"郵箱","微信":"微信","QQ":"QQ","联系人":"聯繫人","性别":"性別","年龄":"年齡","电话":"電話","微博":"微博","地址":"地址","备注":"備註","留言内容":"留言內容","请输入":"請輸入","验证码":"驗證碼","点击更换":"點擊更換","提交":"提交","留言成功":"留言成功","我们会尽快联系你":"我們會盡快聯繫你","关闭":"關閉","再次留言":"再次留言","发送":"發送","对方输入消息中...":"對方輸入消息中...","连接中...":"連接中...","对话已结束":"對話已結束","对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>":"對話已結束，您可以<1>開始新的對話</1>或<3>留言</3>","你被移出了黑名单":"你被移出了黑名單","表情":"表情","发送图片":"發送圖片","发送视频":"發送視頻","发送文件":"發送文件","上传图片":"上傳圖片","评价":"評價","好评":"好評","中评":"中評","差评":"差評","请填写评价内容（选填）":"請填寫評價內容（選填）","你给出了":"你給出了","下载":"下載","接下来由<1>{{name}}</1>为您服务":"接下來由<1>{{name}}</1>為您服務","客服软件由{{企业名称}}提供":"客服系統由{{企业名称}}提供","转人工":"轉人工","免费通话":"免費通話","欢迎使用完全免费的网页回呼与我们通话":"歡迎使用完全免費的網頁回呼與我們通話","请输入你的电话号码":"請輸入你的電話號碼","发起通话":"發起通話","重新发起通话":"重新發起通話","请保持电话畅通，客服人员即将致电":"請保持電話暢通，客服人員即將致電","你将接到「010-52729285」的来电":"你將接到「010-52729285」的來電","询前表单":"詢前表單","获取验证码失败":"獲取驗證碼失敗","加载历史消息":"載入歷史消息","加载更多历史消息":"載入更多歷史消息","没有更多了":"沒有更多了","加载中...":"加載中...","排队失败，请刷新重试":"排隊失敗，請刷新重試","抱歉没能理解您的提问，可选择":"抱歉沒能理解您的提問，可選擇","留言":"留言","评价失败，请稍后重试":"評價失敗，請稍後重試","客服消息":"客服消息","管理员":"管理員","[推广消息]":"[推廣消息]","「发来了一个文件」":"「發來了一個文件」","「发来了一张图片」":"「發來了一張圖片」","新消息":"新消息","粘贴图片失败，请用「图片按钮」上传图片":"粘貼圖片失敗，請用「圖片按鈕」上傳圖片","排队等待中...":"排隊等待中...","正在为您转接，请稍候..":"正在為您轉接，請稍候..","小时":"小時","分钟":"分鐘","秒":"秒","网络错误，请稍后重试":"網絡錯誤，請稍後重試","请控制":"請控制","在1到100个字符":"在1到100個字符","请填写必填字段":"請填寫必填字段","请选择":"請選擇","请输入验证码":"請輸入驗證碼","加载询前表单失败，请稍后重试":"加載詢前表單失敗，請稍後重試","连接已断开，请刷新页面":"連接已斷開，您將無法看到客服發送的消息，請刷新頁面","很抱歉您对此回答不满意":"很抱歉您對此回答不滿意","提交失败，请稍候再试":"提交失敗，請稍候再試","请正确填写手机或带区号的座机号码":"請正確填寫手機或帶區號的座機號碼","请正确填写验证码":"請正確填寫驗證碼","请选择分类":"請選擇分類","请正确填写姓名":"請正確填寫姓名","请正确填写手机号":"請正確填寫手機號","请正确填写联系邮箱":"請正確填寫聯繫郵箱","请正确填写微信":"請正確填寫微信","请正确填写QQ":"請正確填寫QQ","请至少填写一项联系方式":"請至少填寫一項聯繫方式","请保持留言内容在 1～1024 字符内":"請保持留言內容在 1～1024 字符內","留言失败，请稍候再试":"留言失敗，請稍候再試","取消上传":"取消上傳","上传失败":"上傳失敗","上传成功":"上傳成功","只能发送图片哦":"只能發送圖片哦","只能发送小于 50MB 的文件哦":"只能發送小於 50MB 的文件哦","只能发送小于 5MB 的图片哦":"只能發送小於 5MB 的圖片哦","最多只能发送 2048 个字符哦":"最多隻能發送 2048 個字符哦","请选择评价等级":"請選擇評價等級","最多只能发送 30 个字符哦":"最多隻能發送 30 個字符哦","最多只能发送 30 个字哦":"最多隻能發送 30 個字哦","抱歉，客服系统暂时无法使用":"抱歉，客服系統暫時無法使用","当前等待人数":"當前等待人數","如果等不及，可以选择":"如果等不及，可以選擇","上传中":"上傳中","已过期":"已過期","{{expireTime}}后过期":"{{expireTime}}後過期","解决":"解决","未解决":"未解决","提交中":"提交中","已反馈":"已反饋","长时间未活动窗口已失效，请刷新页面":"長時間未活動視窗已失效，您將無法看到客服發送的消息，請刷新頁面","请至少填写一项":"請至少填寫一項","您已成功提交":"您已成功提交","机器人":"機器人","安全验证码":"安全驗證碼","开始免费通话":"開始免費通話","输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！":"輸入你的手機號碼，點擊「開始免費通話」按鈕，系統將自動為你建立免費通話!","发起通话失败，请稍后再试":"發起通話失敗，請稍後再試","已复制":"已複製","换一换":"換一換","常见问题":"常見問題","客服撤回了一条消息":"客服撤回了一條消息","营销机器人结束对话":"對話已結束","经常使用":"经常使用","微笑和情感":"微笑和情感","人和身体":"人和身体","动物和自然":"动物和自然","食物和饮料":"食物和饮料","活动":"活动","旅行和地点":"旅行和地点","物体":"物体","符号":"符号","旗帜":"旗帜","自定义":"自定义","表情提示":"提示：表情選擇變成 ◻︎？不必擔心，這是舊版 Windows 系統的不兼容問題，◻︎僅在輸入框裏出現，並不影響表情發送後的效果，請放心使用。","* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M":"* 支持 jpg 、png、gif、svg 格式的圖片，可上傳 5 張，單張最大 5M","字段不能为空":"欄位不能為空","图形验证码错误，请重新输入":"圖形驗證碼錯誤，請重新輸入","电话号码必须为数字":"電話號碼必須為數位","请填写正确的数字":"請填寫正確的數位","请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉舉報，请":"請注意保護自身財產和隱私安全，涉及匯款、轉帳等務必謹慎。如需投訴舉報，請","联系我们":"聯繫我們","点击此处":"點擊此處","您的网络连接已断开，{{second}}秒后自动重连":"您的網絡連接已斷開，{{second}}秒後自動重連","立即重连":"立即重連","你的网络已恢复正常":"你的網絡已恢復正常","问题已解决":"問題已解决","问题未解决":"問題未解决"}')},"8xMd":function(e,t,n){e.exports=n.p+"static/invite-bgi-4.png"},CVSx:function(e,t,n){e.exports=n.p+"static/default-avatar.jpg"},Dfy3:function(e,t,n){e.exports=n.p+"static/invite-bgi-2.png"},LwUL:function(e,t,n){e.exports=n.p+"static/new-message.mp3"},RCPQ:function(e,t,n){e.exports=n.p+"static/icon-mq-round@2x.png"},V15l:function(e,t,n){e.exports=n.p+"static/new-message.ogg"},WAI7:function(e){e.exports=JSON.parse('{"美洽":"Meiqia","来鼓":"Laigu","点击问题或回复数字查看答案":"Klik pertanyaannya atau kirim angkanya untuk cek jawaban","给我们留言":"Tinggalkan pesan untuk kami","分类":"Kategori","姓名":"Nama","手机":"No. HP","邮箱":"Email","微信":"WeChat","QQ":"QQ","联系人":"Kontak","性别":"Jenis kelamin","年龄":"Umur","电话":"No. Telepon","微博":"Weibo","地址":"Alamat","备注":"Catatan","留言内容":"Isi Pesan","请输入":"Silakan ketik","验证码":"Kode Verifikasi","点击更换":"Klik untuk ubah","提交":"Kirim","留言成功":"Pesan Terkirim","我们会尽快联系你":"Kami akan menghubungimu secepatnya","关闭":"Tutup","再次留言":"Tinggalkan pesan lagi","发送":"Kirim","对方输入消息中...":"Sedang mengetik...","连接中...":"Sedang dihubungkan...","对话已结束":"Pembicaraan telah berakhir","对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>":" Pembicaraan telah berakhir, Anda bisa <1>lanjut</1> atau <3>tinggalkan pesan</3>?","你被移出了黑名单":"Anda dihapus dari daftar blacklist","表情":"Emoji","发送图片":"Kirim gambar","发送视频":"Kirim video","发送文件":"Kirim file","上传图片":"Unggah","评价":"Nilai pelayanannya","好评":"Bagus","中评":"Biasa","差评":"Jelek","请填写评价内容（选填）":"Mohon jelaskan penilaian Anda (bebas isi)","你给出了":"Penilaian terkirim","下载":"Unduh","接下来由<1>{{name}}</1>为您服务":"Selanjutnya, <1>{{name}}</1> akan melayani Anda","客服软件由{{企业名称}}提供":"Software customer service disediakan oleh {{企业名称}}","转人工":"Pindah ke bantuan langsung","免费通话":"Telepon gratis","欢迎使用完全免费的网页回呼与我们通话":"Silakan menggunakan laman internet yang sepenuhnya gratis untuk menghubungi kami kembali","请输入你的电话号码":"Silakan isi no. telepon Anda","发起通话":"Telepon","重新发起通话":"Telepon lagi","请保持电话畅通，客服人员即将致电":"Mohon pertahankan kelancaran telepon, customer service akan segera menghubungi","你将接到「010-52729285」的来电":"Anda akan menerima telepon dari 「010-52729285」","询前表单":"Formulir pertanyaan","获取验证码失败":"Gagal mendapatkan kode verifikasi","加载历史消息":"Memuat pesan terdahulu","加载更多历史消息":"Memuat lebih banyak pesan terdahulu","没有更多了":"Tidak ada pesan terdahulu","加载中...":"Sedang memuat...","排队失败，请刷新重试":"Antrian gagal, silakan refresh dan coba lagi","抱歉没能理解您的提问，可选择":"Maaf, kami gagal memahami pertanyaan Anda, sapa memilihe","留言":"Tinggalkan pesan","评价失败，请稍后重试":"Penilaian gagal, silakan coba setelah beberapa saat","客服消息":"Pesan customer service","管理员":"Pengurus","[推广消息]":"[Pesan iklan]","「发来了一个文件」":"「mengirimkan pesan」","「发来了一张图片」":"「mengirimkan foto」","新消息":"Pesan baru","粘贴图片失败，请用「图片按钮」上传图片":"Gagal paste gambar, silakan menggunakan. 「tombol gambar」untuk mengunggah foto","排队等待中...":"Sedang mengantri...","正在为您转接，请稍候..":"Mohon menunggu, sedang dihubungkan...","小时":"Jam","分钟":"Menit","秒":"Detik","网络错误，请稍后重试":"Kesalahan jaringan, silakan coba setelah beberapa saat","请控制":"Mohon dibatasi","在1到100个字符":"Dalam 1 sampai 100 karakter","请填写必填字段":"Silakan mengisi bagian yang diharuskan","请选择":"Silakan pilih","请输入验证码":"Silakan isi kode verifikasi","加载询前表单失败，请稍后重试":"Gagal memuat formulir pertanyaan, silakan coba setelah beberapa saat","连接已断开，请刷新页面":"Sudah terputus, silakan refresh laman ini","很抱歉您对此回答不满意":"Mohon maaf karena jawaban ini tidak memuaskan Anda","提交失败，请稍候再试":"Gagal dikirim, silakan coba setelah beberapa saat","请正确填写手机或带区号的座机号码":"Silakan isi no. HP atau no. telepon beserta kode area yang tepat","请正确填写验证码":"Silakan isi kode verifikasi yang tepat","请选择分类":"Silakan pilih kategori","请正确填写姓名":"Silakan isi nama yang tepat","请正确填写手机号":"Silakan isi no. HP yang tepat","请正确填写联系邮箱":"Silakan isi email yang tepat","请正确填写微信":"Silakan isi weChat yang tepat","请正确填写QQ":"Silakan isi QQ yang tepat","请至少填写一项联系方式":"Silakan isi setidaknya satu kontak untuk dihubungi","请保持留言内容在 1～1024 字符内":"Mohon menjaga pesannya dalam 1 sampai 1024 karakter","留言失败，请稍候再试":"Gagal meninggalkan pesan, silakan coba lagi setelah beberapa saat","取消上传":"Batal mengunggah","上传失败":"Gagal mengunduh","上传成功":"Berhasil mengunggah","只能发送图片哦":"Hanya bisa mengirim foto, ya","只能发送小于 50MB 的文件哦":"Hanya bisa mengirim dokumen yang lebih kecil dari 50MB, ya","只能发送小于 5MB 的图片哦":"Hanya bisa mengirim foto yang lebih kecil dari 5mb, ya","最多只能发送 2048 个字符哦":" Hanya bisa mengirim maksimal 2048 karakter, ya","请选择评价等级":"Silakan pilih tingkat penilaiannya","最多只能发送 30 个字符哦":" Hanya bisa mengirim maksimal 30 karakter, ya","抱歉，客服系统暂时无法使用":"Maaf, sistem customer service sementara tidak dapat digunakan","当前等待人数":"Jumlah orang yang menunggu saat ini","如果等不及，可以选择":"Kalau tidak dapat menunggu, bisa memilih","上传中":"Sedang menunggah","已过期":"Sudah lewat batas waktu","{{expireTime}}后过期":"Batas waktu hanya sampai {{expireTime}}","解决":"Sudah terselesaikan","未解决":"Belum terselesaikan","提交中":"Sedang dikirim","已反馈":"Umpan balik terkirim","长时间未活动窗口已失效，请刷新页面":"Laman yang sudah lama tidak aktif sudah tidak dapat digunakan, silakan refresh laman ini","请至少填写一项":"Silakan isi setidaknya satu","您已成功提交":"Anda sudah berhasil mengirimnya","机器人":"Robot","安全验证码":"Kode verifikasi keamanan","开始免费通话":"Mulai telepon gratis","输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！":"Isi no. HP Anda, klik tombol \\"Mulai telepon gratis\\", sistem akan otomatis menyiapkan telepon gratis untuk Anda","发起通话失败，请稍后再试":"Telepon gagal, silakan coba setelah beberapa saat","已复制":"Sudah dicopy","换一换":"Tukar","常见问题":"Pertanyaan umum","客服撤回了一条消息":"Customer service sudah menarik kembali satu pesan","营销机器人结束对话":"Percakapan robot marketing berakhir","经常使用":"Sering digunakan","微笑和情感":"Smiley dan Emoticon","人和身体":"Manusia & Tubuh","动物和自然":"Binatang & Alam","食物和饮料":"Makanan & Minuman","活动":"Aktivitas","旅行和地点":"Perjalanan & Lokasi","物体":"Benda","符号":"Simbol","旗帜":"Bendera","自定义":"Custom","表情提示":"Tips:","* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M":"* Dapat mengunggah maksimal 5 foto dalam format jpg, png, gif, dan svg yang tidak lebih besar dari 5mb.","字段不能为空":"Tidak boleh kosong","图形验证码错误，请重新输入":"Kode verifikasi eror, silakan isi kembali","电话号码必须为数字":"No. Telepon harus berupa nomoe","请填写正确的数字":"Silakan isi nomor yang tepat","请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉，请":"Silakan perhatikan saat melindungi properti dan privasi, hati-hati saat membayar, transfer, dsb. Kalau perlu komplain, silakan","联系我们":"Hubungi kami"}')},WQMa:function(e,t,n){e.exports=n.p+"static/sent-message.mp3"},boyN:function(e,t,n){e.exports=n.p+"static/new-chat.mp3"},ipNB:function(e){e.exports=JSON.parse('{"美洽":"美洽","来鼓":"来鼓","点击问题或回复数字查看答案":"点击问题或回复数字查看答案","给我们留言":"给我们留言","分类":"分类","姓名":"姓名","手机":"手机","邮箱":"邮箱","微信":"微信","QQ":"QQ","联系人":"联系人","性别":"性别","年龄":"年龄","电话":"电话","微博":"微博","地址":"地址","备注":"备注","留言内容":"留言内容","请输入":"请输入","验证码":"验证码","点击更换":"点击更换","提交":"提交","留言成功":"留言成功","我们会尽快联系你":"我们会尽快联系你","关闭":"关闭","再次留言":"再次留言","发送":"发送","对方输入消息中...":"对方输入消息中...","连接中...":"连接中...","对话已结束":"对话已结束","对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>":"对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>","你被移出了黑名单":"你被移出了黑名单","表情":"表情","发送图片":"发送图片","发送视频":"发送视频","发送文件":"发送文件","上传图片":"上传图片","评价":"评价","好评":"好评","中评":"中评","差评":"差评","请填写评价内容（选填）":"请填写评价内容（选填）","你给出了":"你给出了","下载":"下载","接下来由<1>{{name}}</1>为您服务":"接下来由<1>{{name}}</1>为您服务","客服软件由{{企业名称}}提供":"客服软件由{{企业名称}}提供","转人工":"转人工","免费通话":"免费通话","欢迎使用完全免费的网页回呼与我们通话":"欢迎使用完全免费的网页回呼与我们通话","请输入你的电话号码":"请输入你的电话号码","发起通话":"发起通话","重新发起通话":"重新发起通话","请保持电话畅通，客服人员即将致电":"请保持电话畅通，客服人员即将致电","你将接到「010-52729285」的来电":"你将接到「010-52729285」的来电","询前表单":"询前表单","获取验证码失败":"获取验证码失败","加载历史消息":"加载历史消息","加载更多历史消息":"加载更多历史消息","没有更多了":"没有更多了","加载中...":"加载中...","排队失败，请刷新重试":"排队失败，请刷新重试","抱歉没能理解您的提问，可选择":"抱歉没能理解您的提问，可选择","留言":"留言","评价失败，请稍后重试":"评价失败，请稍后重试","客服消息":"客服消息","管理员":"管理员","[推广消息]":"[推广消息]","「发来了一个文件」":"「发来了一个文件」","「发来了一张图片」":"「发来了一张图片」","新消息":"新消息","粘贴图片失败，请用「图片按钮」上传图片":"粘贴图片失败，请用「图片按钮」上传图片","排队等待中...":"排队等待中...","正在为您转接，请稍候..":"正在为您转接，请稍候..","小时":"小时","分钟":"分钟","秒":"秒","网络错误，请稍后重试":"网络错误，请稍后重试","请控制":"请控制","在1到100个字符":"在1到100个字符","请填写必填字段":"请填写必填字段","请选择":"请选择","请输入验证码":"请输入验证码","加载询前表单失败，请稍后重试":"加载询前表单失败，请稍后重试","连接已断开，请刷新页面":"连接已断开, 您将无法看到客服发的消息，请检查网络情况","很抱歉您对此回答不满意":"很抱歉您对此回答不满意","提交失败，请稍候再试":"提交失败，请稍候再试","请正确填写手机或带区号的座机号码":"请正确填写手机或带区号的座机号码","请正确填写验证码":"请正确填写验证码","请选择分类":"请选择分类","请正确填写姓名":"请正确填写姓名","请正确填写手机号":"请正确填写手机号","请正确填写联系邮箱":"请正确填写联系邮箱","请正确填写微信":"请正确填写微信","请正确填写QQ":"请正确填写QQ","请至少填写一项联系方式":"请至少填写一项联系方式","请保持留言内容在 1～1024 字符内":"请保持留言内容在 1～1024 字符内","留言失败，请稍候再试":"留言失败，请稍候再试","取消上传":"取消上传","上传失败":"上传失败","上传成功":"上传成功","只能发送图片哦":"只能发送图片哦","只能发送小于 50MB 的文件哦":"只能发送小于 50MB 的文件哦","只能发送小于 5MB 的图片哦":"只能发送小于 5MB 的文件哦","最多只能发送 2048 个字符哦":"最多只能发送 2048 个字符哦","请选择评价等级":"请选择评价等级","最多只能发送 30 个字符哦":"最多只能发送 30 个字符哦","抱歉，客服系统暂时无法使用":"抱歉，客服系统暂时无法使用","当前等待人数":"当前等待人数","如果等不及，可以选择":"如果等不及，可以选择","上传中":"上传中","已过期":"已过期","{{expireTime}}后过期":"{{expireTime}}后过期","解决":"解决","未解决":"未解决","提交中":"提交中","已反馈":"已反馈","长时间未活动窗口已失效，请刷新页面":"长时间未活动窗口已失效, 您将无法看到客服发的消息，请检查网络情况","请至少填写一项":"请至少填写一项","您已成功提交":"您已成功提交","机器人":"机器人","安全验证码":"安全验证码","开始免费通话":"开始免费通话","输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！":"输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！","发起通话失败，请稍后再试":"发起通话失败，请稍后再试","已复制":"已复制","换一换":"换一换","常见问题":"常见问题","客服撤回了一条消息":"客服撤回了一条消息","营销机器人结束对话":"对话已结束","经常使用":"经常使用","微笑和情感":"微笑和情感","人和身体":"人和身体","动物和自然":"动物和自然","食物和饮料":"食物和饮料","活动":"活动","旅行和地点":"旅行和地点","物体":"物体","符号":"符号","旗帜":"旗帜","自定义":"自定义","表情提示":"提示：表情选择变成 ◻︎？不必担心，这是旧版 Windows 系统的不兼容问题，◻︎仅在输入框里出现，并不影响表情发送后的效果，请放心使用。","* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M":"* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M","字段不能为空":"字段不能为空","图形验证码错误，请重新输入":"图形验证码错误，请重新输入","电话号码必须为数字":"电话号码必须为数字","请填写正确的数字":"请填写正确的数字","请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉举报，请":"请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉举报，请","联系我们":"联系我们","点击此处":"点击此处","您的网络连接已断开，{{second}}秒后自动重连":"您的网络连接已断开，{{second}}秒后自动重连","立即重连":"立即重连","你的网络已恢复正常":"你的网络已恢复正常","问题已解决":"问题已解决","问题未解决":"问题未解决","最多只能发送 30 个字哦":"最多只能发送 30 个字哦"}')},k3qG:function(e,t,n){e.exports=n.p+"static/sent-message.ogg"},lgCi:function(e,t,n){e.exports=n.p+"static/photo-fail.png"},pXgj:function(e){e.exports=JSON.parse('{"meiqia":{"企业名称":"美洽","聊天链接":"https://chat.meiqiayun.com/widget/standalone.html?eid=b269235deb4454abab2f0e543d39725b&utm_source=widget-badge&utm_term=","logo":"iconic_meiqia","report_url":"https://doc.weixin.qq.com/formcol/share?form_id=AGkAlgegAA8AEgAJgYyAH0JNE88eguS4"},"laigu":{"企业名称":"来鼓","聊天链接":"https://static.laigukf.com/widget/chat.html?eid=2cadfc1fd93905c72b400698f5f2f8b1&utm_source=widget-badge&utm_term=","logo":"iconic_laigu","report_url":"https://doc.weixin.qq.com/formcol/share?form_id=AGkAlgegAA8AEgAJgYyAH00CYj0ReHS1"}}')},qyd5:function(e,t,n){e.exports=n.p+"static/new-chat.ogg"},rFG3:function(e,t,n){e.exports=n.p+"static/invite-bgi-3.png"},tjUo:function(e,t,n){"use strict";n.r(t);n("+sMy");var V=n("q1tI"),Q=n.n(V),a=n("i8i4"),d=n.n(a),i=n("/MKj"),c=n("vOnD"),Y=(n("pIFo"),n("jKim")),$=n("9kay"),o=n("wkqo"),r=n("8wN3"),l=n("ipNB"),s=n("WAI7"),u=n("wtXf"),p=n("pXgj"),m={en:{translation:o},tw:{translation:r},cn:{translation:l},indonesian:{translation:s},malay:{translation:u}},g=window.parent._agent_chat_type||"meiqia";Y.a.use({type:"postProcessor",name:"nameProcessor",process:function(e,t,n,a){var i=a.language;return e.replace(/\[\[(\S+?)\]\]/g,function(e,t){t=p[g][t];return t?m[i].translation[t]||t:e})}}).use($.b).init({lng:"cn",fallbackLng:"cn",postProcess:["nameProcessor"],resources:m,debug:!1,interpolation:{escapeValue:!1},react:{wait:!0},keySeparator:"::"});var h=function(){var e,t=window.parent.document,n=t.createElement("div");return n.id="meiqia-container",t.getElementById("meiqia-container")&&(e=t.getElementById("meiqia-container")).parentElement.removeChild(e),t.body.appendChild(n),n},f=n("pLtp"),K=n.n(f),b=n("9Jkg"),v=n.n(b),y=(n("Btvt"),n("8+KV"),n("V+eJ"),n("f3/d"),""),j=function(e){var t,n,a=window.parent.document,i="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no";"init"===e?(n=(t=a.getElementsByName("viewport")[0])&&t.getAttribute("content"),t&&n&&(y=-1!==n.indexOf("width=device-width")&&-1!==n.indexOf("initial-scale=1.0")&&-1!==n.indexOf("minimum-scale=1.0")&&-1!==n.indexOf("maximum-scale=1.0")&&-1!==n.indexOf("user-scalable=no")?"same":n)):"set"===e?y?"same"!==y&&a.getElementsByName("viewport")[0].setAttribute("content",i):((n=a.createElement("meta")).name="viewport",n.content=i,a.getElementsByTagName("head")[0].appendChild(n)):"remove"!==e||(e=a.getElementsByName("viewport")[0])&&(y?"same"!==y&&e.setAttribute("content",y):e.parentElement.removeChild(a.getElementsByName("viewport")[0]))},x=n("v7Px"),w=n.n(x);n("SRfc");function k(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]}function _(e){return"string"===k(e).toLowerCase()}function E(e){return"function"===k(e).toLowerCase()}function C(e){return"number"===k(e).toLowerCase()&&!w()(e)}function q(e){var t=e.data,e=e.headers;return X({url:"/client/tickets_v2",method:"post",headers:J()({"content-type":"application/json"},e),data:t,params:{ent_id:t.enterprise_id}})}function z(e,t,n,a,i,o){return void 0===o&&(o={}),!!i&&X({url:"client/attrs_jsonp",method:"get",params:J()({ent_id:e,track_id:t,visit_id:n,browser_id:a},o,{attrs:v()(i)})})}var I=function(i,o,r,l){var c=this,s=(new Date).valueOf(),d=0;return function(){var e=(new Date).valueOf();0===d&&(s=(new Date).valueOf());for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];d<r?(d+=1,i.apply(c,n)):1e3*o<e-s?(d=1,s=e,i.apply(c,n)):l&&l()}},T=n("UXZV"),J=n.n(T),S=n("eVuF"),N=n.n(S),O=window.parent._CHAT_GLOBAL_API_CONFIG_,M={defaults:O.BACKEND_API,public:O.PUBLIC_URL,qcloud:O.QCLOUD,socket:O.SOCKET_URL},Z=function(e,a){var i=J()({},e);return i.baseURL||(i.baseURL=M.defaults),new N.a(function(t,n){window.parent.meiqia.event.emit(a,{data:i,success:function(e){t(JSON.parse(e))},error:function(e){n(e)}})})},X=function(e){var a=J()({},e);return new N.a(function(t,n){a.baseURL||(a.baseURL=M.defaults),window.parent.meiqia.event.emit("request",{data:a,success:function(e){t(JSON.parse(e))},error:function(e){n(e)}})})},ee=(n("bWfx"),function(e,t,n){try{var a=window.parent.localStorage;if("get"===e)return a.getItem(t);"set"===e?a.setItem(t,n):"remove"===e&&a.removeItem(t)}catch(e){return null}return null}),B=function(e,t){return X({url:"/client/send_msg",method:"post",headers:{"content-type":"application/json"},params:{ent_id:e},data:t})},D=function(e,t,n,a){return X({url:"/client/history_conversation",method:"get",params:{ent_id:e,track_id:t,page:n,limit:a}})},te=function(e,t){return X({url:"/upload/policies",method:"post",headers:{"content-type":"application/json"},data:t,params:{ent_id:e}})},ne=function(e,t){return X({url:"/upload/oss/policies",method:"post",headers:{"content-type":"application/json"},data:t,params:{ent_id:e}})},P=function(e){return X({url:"/client/cancel_upload",method:"post",headers:{"content-type":"application/json"},data:e})},A=function(e){return X({url:"/client/msg_delivered",method:"POST",headers:{"content-type":"application/json"},data:e})},L=function(e){return X({url:"/client/msg_read",method:"POST",headers:{"content-type":"application/json"},data:e})},F=n("ANjH"),R=n("sINF"),U=n("2QeP"),H=n.n(U),W=n("0R0V"),ae=n("Mpt7"),t=n("FH7K"),o=n("e7SQ"),r=Object(ae.Map)({isInit:!1,trackId:"",docLocation:"",docTitle:"",docReferrer:"",entId:"",entToken:"",subSource:"",fallback:3,metadata:null,clientId:"",disableBrandLink:!1,withoutBtn:!1,browserFamily:"",browserId:"",servability:!1,visitId:"",visitPageId:"",visitorStatus:"",visitorStatusAgentToken:"",customMessageConfig:{product_card:{style:"small"}},standalone:!1,socket:!1,isReconnect:!1,stopReconnect:!1,attrConfig:[],reconnectTime:0}),G=Object(t.a)({SET_CONFIG_DATA:function(e){return e}}).setConfigData,l=Object(o.a)({SET_CONFIG_DATA:function(e,t){return e.merge(t.payload)}},r),s=Object(t.a)({SET_THEME:function(e){return e},SET_LIMIT_BUTTON:function(e){return e}}),ie=s.setTheme,u=(s.setLimitButton,Object(o.a)({SET_THEME:function(e,t){return e.mergeDeep(t.payload)},SET_LIMIT_BUTTON:function(e,t){t=t.payload||{mobile:{btn:{theme:"007aff",position:{horizontal:"20",type:"right",bottom:"20"},text:{offline:"",online:""},type:"round"}},desktop:{btn:{theme:"007aff",position:{horizontal:60,type:"right",bottom:"80"},text:{offline:"",online:""},type:"round"}}};return t.isLimitButton=!0,t.mobile.btn.text.offline=t.mobile.btn.text.online,t.desktop.btn.text.offline=t.desktop.btn.text.online,e.mergeDeep(t)}},Object(ae.Map)({device:"mobile",isLimitButton:!1}))),f=Object(t.a)({SET_ROUTER:function(e){return e},SET_ROUTER_BUTTON_VISIBLE:function(e){return e},SET_ROUTER_WIDGET_VISIBLE:function(e){return e},SET_BUBBLE_VISIBLE:function(e){return e},SET_SMART_GUIDE_VISIBLE:function(e){return e}}),oe=f.setRouter,re=f.setRouterButtonVisible,le=f.setRouterWidgetVisible,ce=f.setBubbleVisible,se=f.setSmartGuideVisible,b=Object(o.a)({SET_ROUTER:function(e,t){return e.merge(t.payload)},SET_ROUTER_BUTTON_VISIBLE:function(e,t){return e.set("showButton",t.payload)},SET_ROUTER_WIDGET_VISIBLE:function(e,t){t=t.payload?{showWidget:!0,showButton:!1,showCallback:!1,showBubble:!1,showSmartGuide:!1}:{showWidget:!1};return e.merge(t)},SET_BUBBLE_VISIBLE:function(e,t){return e.showWidget&&t.payload?e.set("showBubble",!1):e.set("showBubble",t.payload)},SET_SMART_GUIDE_VISIBLE:function(e,t){return e.get("showWidget")&&t.payload?e.set("showSmartGuide",!1):e.set("showSmartGuide",t.payload)}},Object(ae.fromJS)({showWidget:!1,widgetContent:"",buttonActived:"",showButton:!1,showCallback:!1,showBubble:!1,showSmartGuide:!1,alertVisible:!1,alertConfig:{}})),de=Object(t.a)({SET_TICKET:function(e){return e}}).setTicket,x=Object(o.a)({SET_TICKET:function(e,t){return e.mergeDeep(t.payload)}},Object(ae.Map)({showTicket:!1,captcha:"",category:"",contactRule:"",defaultTemplate:"",defaultTemplateContent:"",email:"",intro:"",name:"",permission:"",qq:"",tel:"",wechat:""})),ue=Object(t.a)({SET_SURVEY:function(e){return e}}).setSurvey,T=Object(o.a)({SET_SURVEY:function(e,t){return e.merge(Object(ae.fromJS)(t.payload))}},Object(ae.fromJS)({status:"open",categoryStatus:"close",showSurvey:!0})),pe=Object(t.a)({SET_EVALUATION:function(e){return e}}).setEvaluation,S=Object(o.a)({SET_EVALUATION:function(e,t){return e.merge(Object(ae.fromJS)(t.payload))}},Object(ae.fromJS)({agent_invitation:"close",agent_visible:"close",auto_invitation:"close",problem_feedback:"close",prompt_text:""})),O=n("L2E4"),me=n.n(O),U=(n("I78e"),n("INYr"),n("p0XB")),ge=n.n(U),he=n("WSEr"),fe=n("gtzJ"),be=function(e){var t=window.parent.meiqia;try{for(var n,a=arguments.length,i=new Array(1<a?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(n=t.event).emit.apply(n,[e].concat(i))}catch(e){he&&fe.c&&fe.c(e)}},ve=["clueTag"],r=Object(t.a)({SET_MESSAGE:function(e){return e},PUSH_QUEUE:function(e){return e},SETIN_QUEUE:function(e,t){return{index:e,value:t}},REPLACE_MSG:function(e,t){return{id:e,msg:t}},DELETE_MSG:function(e){return e},SET_MSG_DATA:function(e,t){return{id:e,data:t}},SET_PATCH_DATA:function(e){return e},PUSH_FAKE:function(e){return e},SET_UNREAD:function(e){return e},REMOVE_UNREAD:function(e){return e},RING:function(e){return e},TOGGLE_RING:function(e){return e},SET_CONV_TYPE:function(e){return e},SET_INPUTTING:function(e){return e},SET_GREETING:function(e){return e},SET_PRODUCT_DATA:function(e){return e},setBreakIceMessage:function(e){return e},setInclue:function(e){return e},setConvHasEnd:function(e){return e}}),ye=r.setMessage,xe=r.pushQueue,we=(r.setinQueue,r.replaceMsg),ke=r.deleteMsg,_e=r.setMsgData,Ee=r.setPatchData,Ce=r.pushFake,Ie=r.setUnread,Te=r.removeUnread,Se=r.ring,je=r.toggleRing,Ne=r.setConvType,Oe=r.setInputting,Me=r.setGreeting,Be=r.setProductData,qe=r.setBreakIceMessage,ze=r.setInclue,De=r.setConvHasEnd,s=Object(o.a)({SET_MESSAGE:function(e,t){return e.merge(t.payload)},PUSH_QUEUE:function(e,t){t=ge()(t.payload)?t.payload:[t.payload],t=[].concat(e.get("queue"),t);return e.merge({queue:t})},SETIN_QUEUE:function(e,t){var n=e.get("queue"),a=t.payload,t=a.index,a=a.value,n=[].concat(n.slice(0,t),[a],n.slice(t));return e.merge({queue:n})},REPLACE_MSG:function(e,t){var n=e.get("queue"),a=t.payload,i=a.id,t=a.msg,a=n.findIndex(function(e){return e.id===i});return-1!==a&&(n=[].concat(n.slice(0,a),[t],n.slice(a+1))),e.merge({queue:n})},DELETE_MSG:function(e,t){var n=[].concat(e.get("queue")),a=t.payload,t=n.findIndex(function(e){return e.id===a});return-1!==t&&n.splice(t,1),e.merge({queue:n})},SET_MSG_DATA:function(e,t){var n=e.get("queue"),a=t.payload,i=a.id,t=a.data,a=n.findIndex(function(e){return e.id===i});return-1!==a&&(t=J()({},n[a],t),n=[].concat(n.slice(0,a),[t],n.slice(a+1))),e.merge({queue:n})},SET_PATCH_DATA:function(e,t){var a=e.get("queue");return t.payload.forEach(function(t){var e,n=a.findIndex(function(e){return e.id===t.id});-1!==n&&(e=J()({},a[n],t),a[n]=e)}),e.merge({queue:[].concat(a)})},PUSH_FAKE:function(e,t){t=ge()(t.payload)?t.payload:[t.payload],t=[].concat(e.get("fakeMsg"),t);return e.merge({fakeMsg:t})},SET_UNREAD:function(e,t){var n=e.get("unReadCount"),a=ge()(t.payload)?t.payload:[t.payload],t=a[a.length-1];return be("getUnreadMsg",a),e.merge({unReadMsg:t,unReadCount:n+a.length})},REMOVE_UNREAD:function(e){return be("getUnreadMsg","hasBeenRead"),e.merge({unReadMsg:null,unReadCount:0})},RING:function(e,t){return e.merge({ringing:!0,ringType:t.payload})},TOGGLE_RING:function(e,t){return e.merge({ringEnabled:t.payload})},SET_CONV_TYPE:function(e,t){return e.set("convType",t.payload)},SET_INPUTTING:function(e,t){return e.set("inputting",t.payload)},SET_GREETING:function(e,t){var n=t.payload,a=n.greeting,i=n.assign,o=e.get("agentToken"),t=e.get("groupToken"),n=[].concat(e.get("fakeMsg"));return i.agentToken&&o!==i.agentToken||i.groupToken&&t!==i.groupToken||!e.get("scheduler")?(a&&"string"==typeof a&&n.push({id:Math.random(),from_type:"client",content_type:"text",content:a}),e.merge({fakeMsg:n,greeting:a,schedulerMsg:!0,scheduler:!1})):e},SET_PRODUCT_DATA:function(e,t){return e.setIn(["productCard","data"],t.payload)},setBreakIceMessage:function(e,t){return e.set("breakIceMessage",t.payload)},setInclue:function(e,t){var n=t.payload,a=n.clueTag,t=me()(n,ve),n=e.get("clueTag");return n<=a?e.merge(J()({},t,{clueTag:n+1})):e},setConvHasEnd:function(e,t){var n=t.payload,a=n.chatHasEndTag,t=n.chatHasEnd,n=e.get("chatHasEndTag");return n<=a?e.merge({chatHasEnd:t,chatHasEndTag:n+1}):e}},Object(ae.Map)({entWelcomeMessage:"",convId:"",convType:"",unableToServe:!1,scheduler:!1,isBot:!1,lastMsgDate:null,evaluationActive:!1,reserveToken:null,chatHasEnd:null,schedulerMsg:!1,visitorStatus:0,enterpriseInfo:{},schedulerAfterClientSendMsg:!1,noMsgFilter:!1,hasSendPromotion:!1,promotionMsgs:{},inputting:!1,inviteType:"",inviteFrom:"",ringEnabled:!0,ringing:!1,ringType:"",fileEnabled:!1,videoEnabled:!1,unReadMsg:null,unReadCount:0,unReadPreview:!1,autoFit:[],autoFitSelected:-1,blacklist:!1,showHistoryBtn:!1,historyLoading:!1,msgLoadLimit:10,historyArray:[],historyTimes:0,productCard:{enabled:!1,data:{},size:"small"},agent:null,agentToken:null,groupToken:null,agentInfo:{},agentInputing:!1,assign:{},fakeMsg:[],surveyMsg:null,queue:[],breakIceMessage:[],hasSendBreakIceMessage:!1,inClue:!1,startBySmartGuide:!1,clueTag:0,chatHasEndTag:0,initScheduler:!1,showBlackTip:!1})),Pe=Object(t.a)({SET_QUEUE:function(e){return e}}).setQueue,f=Object(o.a)({SET_QUEUE:function(e,t){return e.merge(Object(ae.fromJS)(t.payload))}},Object(ae.fromJS)({inQueue:!1,intro:"",ticketIntro:"",position:0,status:"normal"})),Ae=Object(t.a)({SET_ROBOT:function(e){return e}}).setRobot,O=Object(o.a)({SET_ROBOT:function(e,t){return e.merge(t.payload)}},Object(ae.fromJS)({})),Le=Object(t.a)({SET_SMART_GUIDE:function(e){return e}}).setSmartGuide,U=Object(o.a)({SET_SMART_GUIDE:function(e,t){return e.merge(t.payload)}},Object(ae.Map)({agentToken:"",pushType:"auto",visitorInfo:{},templateDetail:{},queue:[]})),Fe=Object(t.a)({SET_CALL:function(e){return e}}).setCall,r=Object(o.a)({SET_CALL:function(e,t){return e.merge(t.payload)}},Object(ae.fromJS)({callback:"close",callback_captcha:"open",panelCallbackBtn:!1,showCallbackPanal:!1})),Re=Object(t.a)({SET_INTERCEPT:function(e){return e}}).setIntercept,o=Object(o.a)({SET_INTERCEPT:function(e,t){return e.merge(t.payload)}},Object(ae.Map)({show:!1,type:"",message:"",captcha:"",captchaValue:""})),o=Object(W.combineReducers)({config:l,theme:u,router:b,ticket:x,survey:T,evaluation:S,message:s,queue:f,robot:O,smartGuide:U,call:r,interceptCode:o}),Ue=null,He=function(){return Ue},H=[H.a,R.a],We=Object(F.c)(o,F.a.apply(void 0,H)),Ge=Ue=We,Ve=function(){var e=Ge.getState().get("message"),t={};return t.agentToken=e.getIn(["assign","agentToken"])||null,t.groupToken=e.getIn(["assign","groupToken"])||null,t.agentToken||t.groupToken||(t.agentToken=e.get("agentToken")||null,t.groupToken=e.get("groupToken")||null),t},Qe=function(e,t){var n=Ge.getState(),a=Ge.dispatch,i=n.get("message"),n={};return e&&(e.agentToken||e.groupToken)?(n.agentToken=e.agentToken||null,n.groupToken=e.groupToken||null):(n.agentToken=i.getIn(["assign","agentToken"])||null,n.groupToken=i.getIn(["assign","groupToken"])||null),t&&(n.assign={agentToken:n.agentToken,groupToken:n.groupToken}),a(ye(n)),n},R=n("+oT+"),Ye=n.n(R),o=n("ln6h"),$e=n.n(o),Ke=(n("CX2u"),n("VRzm"),n("0l/t"),[]),Je=function(e){return!(Ke.indexOf(e)<0)||(Ke.push(e),Ke=Ke.slice(-200),!1)},F=(n("OG14"),n("vDqi")),Ze=n.n(F),Xe={},et="",tt=null,nt=null;function at(e,t){var n=e.text,a=e.entId,e=e.robotId;return tt&&tt("cancel"),Xe[n]?t(ye({autoFit:Xe[n].slice(0,8)})):(e={params:{text:n,ent_id:a,robot_id:e},cancelToken:new Ze.a.CancelToken(function(e){tt=e})},X(J()({url:"/robot/auto_complete",method:"get"},e)).then(function(e){e&&e.data&&e.data.success&&(Xe[n]=e.data.data||[],t(ye({autoFit:e.data.data.slice(0,8)||[]})))}))}function it(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function ot(){var e=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document;e.addEventListener("touchstart",ft,!1),e.addEventListener("touchend",ft,!1)}function rt(){var e=window.parent.document;e.hidden||!Ge.getState().getIn(["router","showWidget"])||(e=e.getElementById("meiqia-container"))&&(!(e=e.querySelector("iframe[name=chat]"))||(e=e.contentDocument.querySelector("#__widget_msg_container"))&&Lt(e))}var lt={search:function(e){var t=Ge.getState(),n=Ge.dispatch,a=t.getIn(["config","entId"]),i=t.getIn(["robot","trusteeship"]),o=t.getIn(["robot","robot_id"]),i=t.getIn(["message","isBot"])||i;return et!==e&&(!!i&&("string"==typeof e&&e.length?at({text:et=e,entId:a,robotId:o},n):lt.remove()))},searchDebounce:function(e){clearTimeout(nt),nt=setTimeout(function(){lt.search(e)},500)},remove:function(){var e=Ge.dispatch;return tt&&tt("cancel"),e(ye({autoFit:[],autoFitSelected:-1})),et="",!1},select:function(e){var t=Ge.getState(),n=Ge.dispatch,a=t.getIn(["message","autoFit"]),i=t.getIn(["message","autoFitSelected"]),t=0;return 0!==a.length&&("prev"===e?t=i<=0?a.length-1:i-1:"next"===e&&(t=i>=a.length-1?0:i+1),n(ye({autoFitSelected:t})),(a[t].question||"").replace(/<em>|<\/em>/g,""))}},ct=lt,H=n("6BQ9"),st=n.n(H),dt=(n("KKXr"),window),ut={isMobile:function(){var e=!1,t=(navigator.userAgent||navigator.vendor||dt.opera).toLowerCase();return e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4))?!0:e},isThisDevice:function(e){return 0<=(navigator.userAgent||navigator.vendor||dt.opera).toLowerCase().indexOf(e.toLowerCase())},isSafari:function(){var e=navigator.userAgent.toLowerCase();return/safari/.test(e)&&!/(chrome|crios|qqbrowser|baidu)/.test(e)},isUC:function(){var e=navigator.userAgent.toLowerCase();return/ucbrowser/.test(e)},isIE:function(e){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")&&st()(t.split("msie")[1],10)===e},iOSversion:function(){var e=(navigator.userAgent||navigator.vendor||dt.opera).toLowerCase();if(/ip(hone|od|ad)/.test(e)){e=e.match(/os (\d+)_(\d+)_?(\d+)?/);return+[st()(e[1],10),st()(e[2],10),st()(e[3]||0,10)].join("")}return null},isWechatMiniprogram:function(){return navigator.userAgent.match(/miniprogram/i)||"miniprogram"===window.__wxjs_environment},isSougouSearch:function(){var e=navigator.userAgent.toLowerCase();return/sogousearch/.test(e)},isBaidu:function(){var e=navigator.userAgent.toLowerCase();return/baidu/.test(e)},isWin:function(){var e=navigator.userAgent;return-1!==e.indexOf("Windows")&&-1===e.indexOf("Windows NT 10")}},pt=(n("Oyvg"),function(e,t){var n=e;it(e,t)||(n.className+=" "+t)}),mt=function(e,t){var n=e;it(e,t)&&(t=new RegExp("(\\s|^)"+t+"(\\s|$)"),n.className=e.className.replace(t,""))},gt="_MEIQIA_INPUT",ht=!1,ft=function t(e){var n=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document,a=n.getElementById(gt);e.target!==a?setTimeout(function(){var e;window.focus(),a.blur(),ut.isUC()&&((e=document.createElement("input")).type="text",e.style.visible="hidden",e.style.position="absolute",e.style.right="-999999px",a.parentNode.appendChild(e),e.focus(),e.remove()),n.removeEventListener("touchstart",t,!1),n.removeEventListener("touchend",t,!1)},200):window.focus()},bt={wxScroll:function(){ut.isMobile()&&window.parent.scrollTo()},fixIOSBlur:function(){var t=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document;-1!==navigator.userAgent.toUpperCase().indexOf("IPHONE")&&function(){var e=t.getElementById(gt);if(!e)throw new Error("objBlur()没有找到元素");e.removeEventListener("focus",ot,!1),e.addEventListener("focus",ot,!1)}()},fixedBody:function(){var e,t;ut.isMobile()&&(t=(e=window.parent.document).body.scrollTop||e.documentElement.scrollTop,pt(e.body,"_MEIQIA_FIX_BODY"),e.body.style.cssText+="top:-"+t+"px;")},looseBody:function(){var e,t;ut.isMobile()&&(t=(e=window.parent.document).body.style.top,mt(e.body,"_MEIQIA_FIX_BODY"),e.body.scrollTop=-st()(t,10),e.documentElement.scrollTop=-st()(t,10),e.body.style.top="")},fixInput:function(){var e=window.parent.document,t=window.parent.screen.height,n=e.querySelector("iframe[name=chat]").contentWindow.document,a=n.getElementById(gt);if(!ut.isMobile())return null;if(ut.isThisDevice("android")&&ut.isSougouSearch()){var i=window.parent.innerHeight;return setTimeout(function(){var e=window.parent.innerHeight,e=Math.abs(i-e);e<100&&0<=e&&!ht&&(ht=!0,n.body.style.height="380px")},100),null}return ut.isUC()&&bt.fixIOSBlur(),ut.isBaidu()?setTimeout(function(){a.scrollIntoView(!0)},100):1300<=(ut.iOSversion()||0)||(ut.isSafari()?setTimeout(function(){812<t&&window.parent.scrollTo(0,330)},100):ut.isUC()?setTimeout(function(){a.scrollIntoView(!0)},100):setTimeout(function(){window.parent.scrollTo(0,400)},100)),null},fixInputBlur:function(){var e;ht&&(e=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document,setTimeout(function(){e.body.style.height="100%",ht=!1},100))}},vt=bt,R=n("Wa2I"),yt=n.n(R),xt=null,wt=null,kt="",_t=!1,Et={x:0,y:0,px:0,py:0},Ct=function(e){return window.parent.document.querySelector("#meiqia-container iframe[name="+e+"]")},It=function(){if(kt&&wt)try{var e=Ct(kt);Tt(e,kt),wt.addEventListener("mousedown",St,!1),wt.addEventListener("mousemove",jt,!1),wt.addEventListener("mouseup",Nt,!1),wt.addEventListener("click",Ot,!1),wt.style.display="block"}catch(e){}},Tt=function(e,t){t="_meiqia_drag_handler_"+t;(wt=window.parent.document.getElementById(t))&&wt.parentNode.removeChild(wt),(wt=window.parent.document.createElement("div")).id=t;t=window.parent.getComputedStyle(e);J()(wt.style,{position:t.position,"z-index":t.zIndex,top:t.top,left:yt()(t.left)+130+"px",width:"400px",height:"60px",cursor:"move","user-select":"none",transform:t.transform,display:t.display}),e.parentNode.appendChild(wt)},St=function(e){e.stopPropagation(),xt=Ct(kt),Et.x=xt.offsetLeft,Et.y=xt.offsetTop,Et.px=(_t?e.touches[0]:e).screenX,Et.py=(_t?e.touches[0]:e).screenY,xt&&wt&&(wt.style.width="100%",wt.style.height="100%",wt.style.top=0,wt.style.bottom=0,wt.style.left=0,wt.style.right=0,wt.style.transform="")},jt=function(e){var t;e.preventDefault(),e.stopPropagation(),xt&&(t=(_t?e.touches[0]:e).screenX,e=(_t?e.touches[0]:e).screenY,t=Et.x+(t-Et.px),e=Et.y+(e-Et.py),xt.style.setProperty("left",t+"px","important"),xt.style.setProperty("top",e+"px","important"))},Nt=function(e){e.stopPropagation(),_t||It(),xt=xt&&null},Ot=function(e){var t=e.screenX,n=e.screenY;(3<Math.abs(t-Et.px)||3<Math.abs(n-Et.py))&&e.stopPropagation(),xt&&(xt=null,J()(Et,{x:0,y:0,px:0,py:0}))},Mt={register:function(e,t,n){e&&t&&(kt=t,(_t=n)?(e.addEventListener("touchstart",St,!1),e.addEventListener("touchmove",jt,!1),e.addEventListener("touchend",Nt,!1),e.addEventListener("click",Ot,!1)):(e=Ct(kt),Tt(e,kt),wt.addEventListener("mousedown",St,!1),wt.addEventListener("mousemove",jt,!1),wt.addEventListener("mouseup",Nt,!1),wt.addEventListener("click",Ot,!1),window.parent.addEventListener("resize",It)))},unregister:function(e,t){t?(e.removeEventListener("touchstart",St,!1),e.removeEventListener("touchmove",jt,!1),e.removeEventListener("touchend",Nt,!1),e.removeEventListener("click",Ot,!1)):wt&&(wt.removeEventListener("mousedown",St,!1),wt.removeEventListener("mousemove",jt,!1),wt.removeEventListener("mouseup",Nt,!1),wt.removeEventListener("click",Ot,!1),window.parent.removeEventListener("resize",It),wt.style.display="none",wt=null)},updatePosition:It,resetPosition:function(){wt&&(wt.style.display="none")}},o=n("Cg2A"),Bt=n.n(o),qt=null,zt=null,Dt=function(e){return"history"!==e._renderType&&"client"!==e.from_type&&"client_card"!==e.card_type&&3!==e.read_status},Pt=function(e){return Dt(e)&&(-2===e.read_status||-3===e.read_status)&&(!e.syncTimes||e.syncTimes<500)},At=function(){var e,t;zt||(e=Ge.getState().getIn(["message","queue"]),t=!1,e.forEach(function(e){Pt(e)&&(t=!0)}),t&&(zt=setTimeout(function(){Ft(),zt=null},2e3)))},Lt=function(a){var i,o,r,l,e=Ge.dispatch,t=Ge.getState();a&&t.getIn(["router","showWidget"])&&(t=t.getIn(["message","queue"]),i=a.clientHeight,o=a.scrollTop,l=!(r=[]),t.forEach(function(e){if(3!==e.read_status&&"history"!==e._renderType){var t,n=null;try{n=a.querySelector("#m"+e.id)}catch(e){}n&&((t=n.offsetTop)+n.clientHeight-40<o||o+i<t+60?1===e.read_status&&(l=!0,r.push({id:e.id,read_status:-2,syncTimes:0})):(l=!0,-3!==e.read_status&&r.push({id:e.id,read_status:-3,syncTimes:0})))}}),e(Ee(r)),l&&Ft())},Ft=function(){qt&&clearTimeout(qt),qt=setTimeout(function(){var e,t,n,a,i,o,r,l=Ge.getState().getIn(["message","queue"]).filter(function(e){if(!Dt(e))return!1;if(500<=e.syncTimes)return!1;if(-2!==e.read_status&&-3!==e.read_status)return!0;var t=e.syncTimes||0,t=10<Math.pow(2,t+1)?10:Math.pow(2,t+1);return!e.syncStartTime||!((Bt()()-e.syncStartTime)/1e3<t)});0<l.length?(e=l,i=Ge.dispatch,o=Ge.getState(),r=o.getIn(["message","convId"]),l=o.getIn(["config","entId"]),o=o.getIn(["config","trackId"]),e&&0!==e.length&&r&&(t=[],n=[],a=[],e.forEach(function(e){a.push({id:e.id,syncTimes:(e.syncTimes||0)+1,syncStartTime:Bt()()}),-2===e.read_status&&C(e.id)?t.push(e.id):-3===e.read_status&&C(e.id)&&n.push(e.id)}),i(Ee(a)),0<t.length&&A({conv_id:r,msg_ids:t,ent_Id:l,track_id:o}).then(function(e){var e=e.data,t=e.action,e=e.msg_ids;(void 0===e?[]:e).forEach(function(e){i(_e(e,{read_status:"msg_read_ack"===t?3:2}))})}),0<n.length&&L({conv_id:r,msg_ids:n,ent_Id:l,track_id:o}).then(function(e){var e=e.data,t=e.action,e=e.msg_ids;(void 0===e?[]:e).forEach(function(e){i(_e(e,{read_status:"msg_read_ack"===t?3:2}))})}),setTimeout(function(){At()},200))):At()},200)},Rt=Ft;var Ut=function(e,t){var n=He().getState().get("config");try{var a,i="unreadMsg-"+n.get("entId")+"-"+n.get("trackId");if("get"===e)return ee("get",i);if("set"===e){var o=ee("get",i);if(o){try{o=JSON.parse(o)}catch(e){o=[]}o=v()(function(e){for(var t=0;t<e.length;t+=1)for(var n=t+1;n<e.length;n+=1)e[t].id===e[n].id&&e.splice(--n,1);return e}(o.concat(t)))}else o=v()(t);ee("set",i,o)}else"remove"===e&&((a=ee("get",i))&&(JSON.parse(a),rt()),ee("remove",i))}catch(e){return null}return null};function Ht(e,t){void 0===t&&(t="chat");var n=He();ee("set","MEIQIA_PANEL_VISIBILITY",e?"visible":"hidden");var a=n.getState(),i=n.dispatch;e?(vt.fixedBody(),ut.isMobile()?j("set"):setTimeout(function(){Mt.updatePosition()},500),i(oe({buttonActived:t})),i(le(!0)),setTimeout(function(){Ut("remove"),i(Te())},100),be("getPanelVisibility","visible")):(a.getIn(["config","withoutBtn"])||i(oe({showButton:!0})),vt.looseBody(),ut.isMobile()?j("remove"):Mt.resetPosition(),i(le(!1)),be("getPanelVisibility","invisible"))}var Wt=function(){var e=He().getState(),t=ut.isMobile()?"mobile":"desktop",n=e.getIn(["config","standalone"]),a=e.getIn(["message","convId"]),t=e.getIn(["theme",t,"pop"]);return!(!a||n||!t)&&(Ht(!0),!0)};function Gt(e){var t=He();setTimeout(function(){t.dispatch(oe({widgetContent:e}))},0)}function Vt(n,a){function i(e){var t=en.scrollTop;a<e-(o=o||e)?(Xt=0,en.scrollTop=n):Xt&&(0!=(e=(e-o)/a)&&(en.scrollTop=t+(n-t)*e),window.parent.requestAnimationFrame(i))}void 0===a&&(a=300);var o=null;Xt&&window.cancelAnimationFrame(Xt),Xt=window.parent.requestAnimationFrame(i)}function Qt(t){var e;tn.includes(t)&&(e=tn.findIndex(function(e){return e===t}),tn.splice(e,1),an())}var Yt=window.parent.meiqia.event,$t=function(e,t,n,a,i){void 0===a&&(a={});i=(void 0===i?{realId:""}:i).realId,i=i?{id:i}:{};(0,Ge.dispatch)(_e(e,J()({status:t,created_on:n},a,i)))},Kt=function(a){var i=Ge.dispatch,e=Ge.getState(),t=e.get("config"),n=e.getIn(["message","convId"]),o=e.getIn(["message","queue"]),r=e.getIn(["message","chatHasEnd"]),l=e.getIn(["message","chatHasEndTag"]),c=t.get("subSource"),s=t.get("entId"),d=e.getIn(["config","socket"]),u=Ve(),e=u.agentToken||null,u=u.groupToken||null,e={action:"client_send_msg",ent_id:s,track_id:t.get("trackId"),browser_id:t.get("browserId"),fallback:t.get("fallback"),type:a.content_type,content:a.content,source_token:c||"default_token_"+s,agent_token:e,group_token:e?null:u};"file"===a.content_type&&(e.extra=a.extra),a.extra&&(e.extra=a.extra);var p,u=o.filter(function(e){return e&&-1!==["bot"].indexOf(e.from_type)&&"message"===e.action}),o=u.length;0<o&&!r&&(null!=(r=u[o-1])&&null!=(p=r.extra)&&p.cell_id&&(null==r?void 0:r.conversation_id)===n&&(o=u[o-1].extra.cell_id,e.extra?e.extra=J()({},e.extra,{cell_id:o}):e.extra={cell_id:o})),$t(a.id,"sending");function m(e,t){if(t=(t=void 0===t?!1:t)?e.data:e,(e=t.code)&&400===e){$t(a.id,"error"),i(de({showTicket:!0}));var n={};try{n=JSON.parse(t)}catch(e){}return n}return t.success?(i(Se("sentMessage")),Je("message"+t.msg.id),e=null,(n=t.sensitive_content)&&(e={sensitive:n,content:n.replaced_content}),$t(a.id,"success",t.msg.created_on,e,{realId:t.msg.id})):("queueing"===t.result?(i(Pe({inQueue:!0,position:t.position})),i(ye({queue:[]})),i(G({visitorStatus:5})),Gt("queue")):"conversation not found"===t.message&&i(De({chatHasEndTag:l,chatHasEnd:!0})),$t(a.id,"error")),t}return 31991==+e.ent_id?(Yt.on("client_send_msg",m),d.send(v()(e)),!1):B(e.ent_id,e).then(function(e){return m(e,!0)},function(e){$t(a.id,"error"),i(de({showTicket:!0}));var t={};try{t=JSON.parse(e)}catch(e){}return t}).finally(function(){ct.remove()})},Jt=(n("Tze0"),function(e){var t=e.msg,n=e.type,a=e.productCard,e=void 0===a?{}:a,a=e.data,i=void 0===a?{}:a,o=e.size,r=J()({},t);switch(r.agent||(t=He().getState(),r.agent=t.getIn(["message","enterpriseInfoForAgent"])),r.content_type){case"hybrid":var l=JSON.parse(r.content);return"product_card"===l[0].type?J()({},r,{_renderType:l[0].type,content:[J()({},l[0],{size:o})]}):J()({},r,{content:l,_renderType:l[0].type});case"text":l=r.content?i[r.content.trim()]:null;return l?J()({},r,{content_type:"hybrid",_renderType:n,content:[{body:J()({},l),type:"product_card",size:o}]}):J()({},r,{_renderType:n});default:return J()({},r,{_renderType:n})}}),Zt=function(e,t){if(t.length)for(var n,a=Ge.getState().get("message"),i=0;i<t.length;i+=1)"photo"!==t[i].content_type&&"file"!==t[i].content_type&&"video"!==t[i].content_type&&(n={id:t[i].id,from_type:"client",content_type:"text",status:"sending",content:t[i].content,type:"text"},n=Jt({msg:n,productCard:a.get("productCard")}),e.push(n)),Kt(t[i]);return e},Xt=(n("Z2Ku"),0),en=null,tn=[],nn=function(e,t){void 0===t&&(t=300),window.requestAnimationFrame?Vt(e,t):en.scrollTop=e},an=function(n){void 0===n&&(n=100),setTimeout(function(){var e,t;en&&(e=(t=en).scrollHeight,t=t.clientHeight,nn((void 0===e?0:e)-(void 0===t?0:t)+100,n))},100)},on=function(t,n){setTimeout(function(){var e=window.parent.document.querySelector("iframe[name=chat]").contentDocument.getElementById("m"+t);en&&e&&(e=e.offsetTop,nn(void 0===e?0:e,n))},50)},rn=function(e){en&&e&&((e=window.parent.document.querySelector("iframe[name=chat]").contentDocument.getElementById("m"+e))&&(en.style["overflow-y"]="hidden",en.scrollTop=e.offsetTop,setTimeout(function(){en.style["overflow-y"]="auto"},100)))},ln=function(e){tn.includes(e)||tn.push(e)},cn=0,sn=[62421],dn=function(e){var t=void 0===e?{}:e,c=t.firstTime,s=t.sendFake,d=t.keepPosition,n=Ge.getState(),u=Ge.dispatch,e=n.get("config"),t=n.get("message"),n=e.get("entId"),e=e.get("trackId"),p=t.get("msgLoadLimit"),m=[].concat(t.get("historyArray"));if(-1!==sn.indexOf(n))return null;c&&(cn=0,m=[]);function g(e){var t,n=Ge.getState().get("message"),a=[].concat(n.get("queue")),i=n.get("fakeMsg"),o=c?0:n.get("historyTimes"),r=a[0]?a[0].id:null,l={queue:a};m.length&&(c?l.showHistoryBtn=!0:(t=m.splice(0,p).map(function(e){var t=J()({},e);return"hybrid"===t.content_type&&(t.content=JSON.parse(t.content)),Jt({msg:e,type:"history",productCard:n.get("productCard")})}),l.queue=[].concat(t.reverse(),a))),c||(m.length||!e?l.showHistoryBtn=!0:l.showHistoryBtn=!1),s&&(l.queue=Zt(l.queue,i)),l.historyTimes=o+1,l.historyArray=m,u(ye(l)),d?rn(r):an()}t=function(){var t=Ye()($e.a.mark(function e(t){var n,a,i,o,r,l,c,s,d=arguments;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t(ye({historyLoading:!0})),n={},e.prev=2,a=d.length,i=new Array(1<a?a-1:0),o=1;o<a;o++)i[o-1]=d[o];return e.next=6,D.apply(void 0,i);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:if(t(ye({historyLoading:!1})),n.data)if(r=n.data,(l=r.conversations).length){for(c=l.length-1;0<=c;--c)for(s=l[c].messages.length-1;0<=s;--s)l[c].messages[s]._renderType="history",m.push(l[c].messages[s]);l.length<1?g(!0):g()}else g(!0);case 14:case"end":return e.stop()}},e,null,[[2,9]])}));return function(e){return t.apply(this,arguments)}}();return m.length<p?t(u,n,e,cn+=1,5):g(),null},un=function(e,t,n){var a,i,o=n?window.parent.document.referrer:window.parent.location.href,n=t.data;n&&n[o]&&(a={id:+new Date,from_type:"client",content_type:"text",status:"sending",content:o,type:"text"},i=Jt({msg:a,productCard:t}),setTimeout(function(){e(xe(i)),Kt(a),an()},1e3))},pn="hidden"in document,mn="Notification"in window,gn=null;document.implementation&&document.implementation.createHTMLDocument&&(gn=document.implementation.createHTMLDocument("sinker"));var hn={__instance:null,__timer:null,close:function(e){var t=this;this.__timer&&clearTimeout(this.__timer),this.__timer=setTimeout(function(){t.__instance&&t.__instance.close&&t.__instance.close(),t.__instance=null},e||0)},show:function(e){var t=this;void 0===e&&(e={}),this.__instance=new window.Notification(e.title||Y.a.t("客服消息"),{body:e.body||"",icon:e.icon||"",tag:e.tag||""}),this.__instance.onclick=function(){var e;window.parent.focus(),t.close(),(e=window.parent.document.querySelector("iframe[name=chat]").contentDocument.getElementById("_MEIQIA_INPUT"))&&e.focus&&e.focus()},this.close(8e3)}};function fn(e){return"string"!=typeof e?"":function(e){if(!gn||!e)return e;var t=gn.documentElement;return t.innerHTML=(e||"").trim(),t.innerText||t.textContent||""}(e.replace(/<img\sclass="emoji".+?alt=":(\w+):">/g,function(e,t){return":"+t+":"}).replace(/<br\/?>/g," ")).replace(/^\s+|\s+$/g,"")}var bn=function(e){var t,n=e;if(n&&"agent"===n.from_type){var a=n.agent.nickname||n.agent.realname||Y.a.t("管理员");if(n.content===Y.a.t("[推广消息]"))return!1;"file"===n.content_type&&(n.content=Y.a.t("「发来了一个文件」")),"photo"===n.content_type&&(n.content=Y.a.t("「发来了一张图片」"));e=fn(n.content);if(!e.length)return!1;t={title:Y.a.t("新消息"),icon:n.agent.avatar,body:a+": "+e,tag:a},pn&&mn&&document.hidden&&("granted"===window.Notification.permission?hn.show(t):"denied"!==window.Notification.permission&&window.Notification.requestPermission(function(e){"granted"===e&&hn.show(t)}))}return null};var vn=function(e){J()(this,e)},yn=function(e,t,p){var n,a,i,o=Ge.getState(),m=o.getIn(["message","clueTag"]),g=o.getIn(["message","chatHasEndTag"]);return n=e,i=(a=t).captcha,o={"content-type":"application/json"},e=ee("get","MEIQIA_CAPTCHA_TOKEN"),t=ee("get","MEIQIA_CAPTCHA_VALUE"),e&&t&&(o["Captcha-Token"]=e,o["Captcha-Value"]=t),i&&(o["reCAPTCHA-Token"]=i),X({url:"/scheduler",method:"post",headers:o,params:{ent_id:n},data:a}).then(function(e){var t,n=e.data,a=Ge.getState(),i=a.get("message"),o=a.get("config"),r="open"===i.getIn(["enterpriseInfo","prompt_status"]),l=i.get("chatHasEnd"),c={reserveToken:n.reserve_token,queue:[].concat(i.get("queue")),fakeMsg:[].concat(i.get("fakeMsg"))};if(n.success&&(null!=n&&n.in_clue?p(ze({clueTag:m,inClue:!0,startBySmartGuide:!0})):p(ze({clueTag:m,inClue:!1,startBySmartGuide:!1}))),n.success){c.convId=n.conv.id,be("convClickCallback","conv",c.convId),!a.getIn(["config","standalone"])&&n.agent&&be("startConversation"),n&&n.agent?(c.agent=n.agent,c.isBot="bot"===n.agent.privilege,c.agentInfo={name:n.agent.nickname,avatar:n.agent.avatar,tel:n.agent.telephone,cellphone:n.agent.public_cellphone,email:n.agent.public_email,qq:n.agent.qq,weixin:n.agent.weixin,signature:n.agent.signature,isBot:"bot"===n.agent.privilege}):c.noMsgFilter=!0,c.convNewCreate=n.conv_new_create,!ut.isMobile()&&c.convNewCreate&&p(Se("newChat"));var s=n.messages||[];if(s.length){for(var d,u=0;u<s.length;u+=1)s[u]=Jt({msg:s[u],type:"scheduler",productCard:i.get("productCard")}),3!==s[u].read_status&&"agent"===s[u].from_type||Je(s[u].action+s[u].id),s[u].created_on&&(c.lastMsgDate=s[u].created_on);!r&&l||(i.get("schedulerMsg")?0===c.queue.length&&(d=c.queue).push.apply(d,s):(d=c.queue.filter(function(e){return e instanceof vn}),c.queue=[].concat(s,d)))}else a.getIn(["message","isBot"])&&!c.isBot&&(c.queue=[]);p(De({chatHasEndTag:g,chatHasEnd:!1})),o.get("trackId")&&dn({firstTime:!0}),c.queue=Zt(c.queue,c.fakeMsg),c.fakeMsg=[],c.unableToServe=!1,c.schedulerMsg=!1,i.getIn(["surveyMsg","content"])&&(t={ent_id:o.get("entToken"),track_id:o.get("trackId"),content:i.getIn(["surveyMsg","content"])},X({url:"/client/prechat-survey-msg",method:"post",data:t}),c.surveyMsg=null),c.evaluationActive=!1,"bot"===(null==(t=n.agent)?void 0:t.privilege)||ut.isMobile()||mn&&window.Notification.requestPermission(),p(Pe({inQueue:!1})),p(de({showTicket:!1})),p(ye(c)),c.convNewCreate&&!c.isBot&&un(p,i.get("productCard"),o.get("standalone")),s.length&&setTimeout(function(){rt()},200)}else"queueing"===n.result?(p(Pe({inQueue:!0,position:n.position})),p(ye({convId:"",queue:[]})),p(G({visitorStatus:5})),Gt("queue")):(c.convId=null,c.agent=null,c.agentToken=null,c.groupToken=null,c.unableToServe=!0,p(ye(c)),p(G({visitorStatus:0})),p(de({showTicket:!0})));return an(),e}).catch(function(e){var t=JSON.parse(e)||{},n=t.data,e=void 0===n?{}:n,n=t.status,t=e.message,e=e.captcha_needed;p(Re(400===n&&e?{show:!0,type:"captcha",message:t}:{show:!0,type:"",message:t}))})},xn=!1,wn=function(e){if(void 0===e&&(e={}),xn)return N.a.resolve();var t=Ge.dispatch,n=Ge.getState(),a=n.get("config"),i=n.get("message"),o=n.getIn(["interceptCode","captcha"]),r=n.getIn(["interceptCode","captchaValue"]),l=n.getIn(["message","startBySmartGuide"]),c={sys_invite_sys_accept:1,sys_invite_cutomer_accept:1,agent_invite_sys_accept:2,agent_invite_cutomer_accept:2},s=i.get("inviteFrom"),d=Ve(),u=d.agentToken||null,p=d.groupToken||null,n=a.get("entId"),d=a.get("subSource"),m={ent_id:a.get("entToken"),track_id:a.get("trackId"),visit_id:a.get("visitId"),agent_token:u,group_token:u?null:p,url:window.parent.document.location.href,title:window.parent.document.title,queueing:!0,source:"web",source_token:d||"default_token_"+n,captcha:o,captchaValue:r,from_type:2===c[s]?"invitation":null};switch(d&&(m.sub_source_name=d),a.get("fallback")&&(m.fallback=a.get("fallback")),e.exclude_agent_tokens&&(m.exclude_agent_tokens=e.exclude_agent_tokens),m.conv_create_type=l?3:s?c[s]:0,e.convType||i.get("convType")){case"click":case"newConv":m.conv_initiate_type="client";break;case"autoInvite":m.conv_initiate_type="sys_forced";break;case"manualInvite":m.conv_initiate_type="sys_accepted";break;case"mpushInvite":m.conv_initiate_type="mpush_invite";break;default:m.conv_initiate_type=null}return e.unmatch_redirect&&(m.conv_initiate_type="bot_redirect_auto"),a.get("docReferrer")&&(m.referrer_url=a.get("docReferrer")),t(ye({scheduling:xn=!0,scheduler:!0,hasSendPromotion:!1,groupToken:p})),yn(a.get("entToken"),m,t).finally(function(){xn=!1,ee("remove","MEIQIA_CAPTCHA_TOKEN"),ee("remove","MEIQIA_CAPTCHA_VALUE"),t(ye({scheduling:!1,initScheduler:!0}))})},kn=function(n){var e=Ge.getState(),a=e.get("config"),i=e.get("message"),o=e.getIn(["queue","inQueue"]),r=e.getIn(["survey","showSurvey"]),l=i.get("visitorStatus");return new N.a(function(){var t=Ye()($e.a.mark(function e(t){return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r||o)return e.abrupt("return",t());e.next=2;break;case 2:if(!i.get("scheduler")&&n)return e.abrupt("return",t(wn()));e.next=4;break;case 4:if(i.get("scheduler")||i.get("convId"))return e.abrupt("return",t());e.next=6;break;case 6:if(a.get("servability")||4===l){e.next=8;break}return e.abrupt("return",t());case 8:return e.abrupt("return",t(wn()));case 9:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}())},_n=(n("h7Nl"),n("a1Th"),window.parent.meiqia.event),F=function(e,t){return{name:e,message:e+"不能为空，格式为字符串且长度小于等于"+t,callback:function(e){return!(!e||!_(e))&&!(e.length>t)}}},En=[F("picUrl",2e3),F("productUrl",2e3),F("title",100),F("description",500),{name:"salesCount",message:"salesCount应为数字,且长度小于等于15",callback:function(e){return!(e&&!/^\d+$/.test(e))&&!(e&&15<e.toString().length)}}],H=function(t,e,n){var a=void 0===n?{}:n,i=a.success,o=a.error,n=a.productConfig,a=(new Date).valueOf(),r=Ge.getState().get("config").get("entId"),l={id:a,content:v()([{type:"product_card",body:J()({},e)}]),type:"hybrid",content_type:"hybrid"},c=Jt({msg:l,productCard:{size:n.style}});setTimeout(function(){t(xe(J()({},c,{from_type:"client"})));function e(e){e.success?i&&E(i)&&i(J()({success:!0},e)):o&&E(o)&&o(J()({success:!1},e))}31991===r?(_n.on("client_send_msg",e),Kt(l)):Kt(l).then(e),an()},300)};H.validateContent=function(t){return En.map(function(e){return J()({},e,{value:t[e.name]})}).map(function(e){return a=(t=e).name,i=e.value,o=e.callback,t=e.message,{success:n=o&&E(o)?o(i):n,message:t,name:a};var t,n,a,i,o}).filter(function(e){return!e.success})};function Cn(){return Nn.a.toUnicode(window.parent.document.location.hostname)}function In(u,p,m){return void 0===u&&(u={}),void 0===p&&(p={}),void 0===m&&(m=!1),new N.a(function(){var t=Ye()($e.a.mark(function e(n){var a,i,o,r,l,c,s,d;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(o=u).questions,a=void 0===l?[]:l,i=o.questionEnable,r=void 0!==i&&i,o=(l=p).questions,i=void 0===o?[]:o,o=l.questionEnable,l=void 0!==o&&o,o=[],a&&a.length&&r&&(o=o.concat(a)),i&&i.length&&l&&(o=o.concat(i)),r={desktop:{panel:{questionList:[]}},mobile:{panel:{questionList:[]}}},m&&(r={desktop:{questionList:[]},mobile:{questionList:[]}}),o.length){e.next=10;break}return n(r),e.abrupt("return");case 10:return e.prev=10,e.next=13,X({url:"/v2/knowledge/faqs?"+(t=void 0===(t=o)?[]:t).map(function(e){return"id="+e}).join("&"),method:"get"});case 13:return l=e.sent,c=l.data.questions||[],s=[],d=[],a.forEach(function(t){var e=c.find(function(e){return e.id===t});e&&s.push(e)}),i.forEach(function(t){var e=c.find(function(e){return e.id===t});e&&d.push(e)}),m?(r.desktop.questionList=s,r.mobile.questionList=d):(r.desktop.panel.questionList=s,r.mobile.panel.questionList=d),n(r),e.abrupt("return");case 24:e.prev=24,e.t0=e.catch(10);case 27:n(r);case 28:case"end":return e.stop()}var t},e,null,[[10,24]])}));return function(e){return t.apply(this,arguments)}}())}function Tn(a,i){return new N.a(function(e){var t,n;"open"===(null==a||null==(t=a.custom_message_config)||null==(n=t.product_card)?void 0:n.status)?(X({url:"/custom_msg/product_card_info",method:"GET",headers:{"content-type":"application/json"}}).then(function(e){var t;e&&e.data&&(t={},(e.data.product_cards||[]).forEach(function(e){e&&e.product_url&&(t[e.product_url]=e)}),i(Be(t)))},function(){}),setTimeout(function(){e()},3e3)):e()})}function Sn(t){var e=Ge.getState(),n=e.get("router"),a=Ge.dispatch,i=J()({},t);i.agent||(i.agent=e.getIn(["message","enterpriseInfoForAgent"]));var o=e.getIn(["message","clueTag"]),r=e.getIn(["message","chatHasEndTag"]);switch(i.action){case"message":if("internal"===i.type)return;var l=Wt();window.document.hidden||!n.get("showWidget")&&!l?i.read_status=-2:i.read_status=-3,Gn(i);var c=[];/^(text|welcome|photo|file|bot|rich_text|hybrid)$/.test(i.content_type)&&(u=Jt({msg:i,type:"normal",productCard:e.getIn(["message","productCard"])}),c.push(u),"photo"===i.content_type&&ln(i.id)),n.get("showWidget")?a(Se("newMessage")):a(Se("newChat")),Vn([i]),bn(i),"redirect"===i.sub_type&&Un({unmatch:!0}),/queueing|manual_redirect/.test(i.sub_type)&&c.push({id:Math.random(),from_type:"redirect_btn"}),"reply"===i.sub_type&&c.push({id:Math.random(),from_type:"redirect_message_board"}),a(xe(c)),i.created_on&&a(ye({lastMsgDate:i.created_on})),an(),Rt();break;case"end_conv_timeout":case"end_conv_agent":case"end_conv_client":"mpush_end_conv"===i.body.sub_type&&Wn(a,i),a(Se("newChat")),be("endConversation"),Ut("remove"),a(ye({initScheduler:!1})),i.body.evaluation&&a(ye({evaluationActive:!0})),"mpush_conv"===i.body.sub_type&&a(ze({clueTag:o,inClue:!1})),a(De({chatHasEndTag:r,chatHasEnd:!0}));break;case"bot_redirect_auto":case"bot_redirect_keyword":case"bot_redirect_mpush":case"bot_redirect_other":case"bot_redirect_manual":an(),setTimeout(function(){var e;t.body.trusteeship||(e=+new Date+Math.round(80*Math.random()+20),a(xe(new vn({id:e,from_type:"redirect",toNickname:i.body.to.nickname}))))},1);var s=i.body.to;a(ye({isBot:!1,agent:s,agentToken:s.token,convId:i.body.conversation_id,agentInfo:{avatar:s.avatar,name:s.nickname||s.realname,signature:s.signature,cellphone:s.cellphone,tel:s.tel,email:s.email,qq:s.qq,weixin:s.weixin}})),a(ze({clueTag:o,inClue:!1}));break;case"mpush_bubble_pop":var d=i.agent,l=i.greetings_content,u=i.greetings_style,c=i.greetings_type,s=i.id;a(Le({templateDetail:{id:s,agent:d,greetings_style:u,greetings_type:c,greetings_content:l}})),a(oe({showSmartGuide:!0}));break;case"switch_human":an(),a(Se("newChat")),a(ye({isBot:!1,agent:i.agent,agentToken:i.agent.token,convId:i.body.conv_id,agentInfo:{avatar:i.agent.avatar,name:i.agent.name,signature:i.agent.signature,cellphone:i.agent.cellphone,tel:i.agent.tel,email:i.agent.email,qq:i.agent.qq,weixin:i.agent.weixin}})),a(ze({clueTag:o,inClue:!1}));break;case"agent_redirect":case"timeout_redirect":var p={id:+new Date,from_type:"redirect",toNickname:i.body.to.nickname};a(xe(p)),an(),a(Se("newChat")),a(ye({isBot:!1,agent:i.body.to,agentToken:i.body.to.token,convId:i.body.conversation_id,agentInfo:{avatar:i.body.to.avatar,name:i.body.to.nickname,signature:i.body.to.signature,cellphone:i.body.to.public_cellphone,tel:i.body.to.telephone,email:i.body.to.public_email,qq:i.body.to.qq,weixin:i.body.to.weixin}})),a(ze({clueTag:o,inClue:!1}));break;case"agent_inputting":e.getIn(["config","servability"])&&(clearTimeout(Qn),a(ye({agentInputing:!0})),Qn=setTimeout(function(){a(ye({agentInputing:!1}))},4e3));break;case"mpush_simulate_inputting":null!=(p=i.body)&&p.interval&&(clearTimeout(Qn),a(ye({agentInputing:!0})),Qn=setTimeout(function(){a(ye({agentInputing:!1}))},Yn(i.body.interval)));break;case"invite_evaluation":a(Se("newChat")),a(ye({evaluationActive:!0}));break;case"visit_black_add":a(Se("newChat")),a(ye({blacklist:!0}));break;case"visit_black_del":a(Se("newChat")),a(ye({blacklist:!1}));break;case"bounce_dialog":Ht(!0);break;case"init_conv":a(Se("newChat")),a(Pe({inQueue:!1}));var m=["clue","blank"].includes(null==(m=i.body)?void 0:m.smartguide);a(ye({scheduler:!0,chatHasEnd:!1,convId:i.body.id,agentToken:i.body.agent.token,agent:i.body.agent,isBot:"bot"===i.body.agent.privilege,agentInfo:m?{avatar:i.body.agent.avatar,name:i.body.agent.nickname,signature:i.body.agent.signature,isBot:"bot"===i.body.agent.privilege}:{avatar:i.body.agent.avatar,name:i.body.agent.nickname,signature:i.body.agent.signature,cellphone:i.body.agent.public_cellphone,tel:i.body.agent.telephone,email:i.body.agent.public_email,qq:i.body.agent.qq,weixin:i.body.agent.weixin,isBot:"bot"===i.body.agent.privilege}})),be("startConversation"),dn({firstTime:!0,sendFake:!0}),(i.body.smartguide||i.body.bounce_dialog)&&Ht(!0),i.body.smartguide&&m?a(ze({clueTag:o,inClue:!0,startBySmartGuide:!0})):a(ze({clueTag:o,inClue:!1,startBySmartGuide:!1}));break;case"agent_send_card":Fn(a,i);break;case"withdraw_msg":var g=(i.body||{}).msg_id,m=void 0===g?-1:g,g=Hn(i);a(we(+m,g));break;case"msg_delivered_ack":case"msg_read_ack":var h=i.action,g=i.msg_ids;(void 0===g?[]:g).forEach(function(e){a(_e(e,{read_status:"msg_read_ack"===h?3:2}))});break;case"redirect_fail_reply":Gt("messageBoard");break;case"update_risk_status":a(ye({showBlackTip:!0}));break;case"client_send_msg_resp":$n.emitOnce("client_send_msg",i)}}var jn=H,R=(n("dZ+Y"),n("rvZc"),n("GYWy")),Nn=n.n(R),On=function(){var a=Ye()($e.a.mark(function e(t,n,a){var i,o,r,l,c,s;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.domain_security_config,s=void 0===o?{}:o,r=n.no_message_visitor_guides,c=void 0===r?{}:r,i=!1,o=t.standalone,r=c.status,r=void 0===r?"close":r,c=c.guides,c=void 0===c?[]:c,"close"!==r&&a(qe(c.filter(function(e){return e.enabled}))),l=Cn(),c=s.status,s=s.urls,s=void 0===s?[]:s,s="open"===c&&s,!o&&s&&l&&!s.some(function(e){return l.endsWith(e.replace(/\/$/,""))}))return e.abrupt("return",!0);e.next=10;break;case 10:if(o)return e.abrupt("return",!1);e.next=12;break;case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}},e)}));return function(e,t,n){return a.apply(this,arguments)}}(),Mn=function(){var n=Ye()($e.a.mark(function e(t,n){var a;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&/^\S{6,32}$/.test(n))return e.next=3,X({url:"/visit/get_binding",method:"get",params:{dev_client_id:n,ent_id:t}});e.next=4;break;case 3:a=e.sent;case 4:return e.abrupt("return",a);case 5:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),Bn=(n("dRSK"),function(){var i=Ye()($e.a.mark(function e(t,n,a,i){var o,r,l,c,s,d,u;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.widget_settings,r=n.standalone_window_config,l=n.ticket_config,c=n.survey,s=n.custom_message_config,d=n.robot_settings,d={isInit:!0,entId:t.entId,entToken:t.entToken,subSource:t.subSource,trackId:a,standalone:t.standalone,docLocation:t.docLocation,docTitle:t.docTitle,docReferrer:t.docReferrer,fallback:t.fallback,metadata:t.metadata,clientId:t.clientId,disableBrandLink:t.disableBrandLink,getInviting:t.getInviting,withoutBtn:t.withoutBtn,browserFamily:n.browser_family,browserId:n.browser_id,agentOnline:n.agent_online,servability:n.servability,visitId:n.visit_id,visitPageId:n.visit_page_id,visitorStatus:n.visitor_status,visitorStatusAgentToken:n.visitor_status_agent_token,customMessageConfig:s,robotEvalSwitch:"open"===d.response_eval_switch},window.parent.meiqia.event.emit("setTrackId",a),window.parent.meiqia.event.emit("setVisitId",n.visit_id),be("standalone",ut.isMobile()?{}:J()({},n.standalone_window_config.background,{type:n.standalone_window_config.desktop.type})),i(G(d)),i(re(!0)),i(ie(J()({},o,{standalone:r}))),i(de(l)),i(ue(c)),t.standalone)return e.next=13,In(r.desktop,r.mobile,!0);e.next=17;break;case 13:u=e.sent,i(ie({standalone:u})),e.next=21;break;case 17:return e.next=19,In(o.desktop.panel,o.mobile.panel);case 19:u=e.sent,i(ie(u));case 21:case"end":return e.stop()}},e)}));return function(e,t,n,a){return i.apply(this,arguments)}}()),qn=function(){var a=Ye()($e.a.mark(function e(t,n,a){var i;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t&&"open"===t.status)return e.next=4,function(e,t){e={ent_id:e,source:"web"};return t&&(e.sub_source_name=t),X({url:"/client/forms",method:"get",params:e})}(n,a);e.next=5;break;case 4:i=e.sent;case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));return function(e,t,n){return a.apply(this,arguments)}}(),o=n("CVSx"),zn=n.n(o),Dn=ut.isMobile()?"mobile":"desktop",Pn=function(){var a=Ye()($e.a.mark(function e(t,n,a){var i,o,r,l,c,s,d,u,p,m,g,h,f,b,v;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.ent_welcome_message,o=t.enterprise_info,r=t.queueing_settings,l=t.promotion_msgs,c=t.scheduler_after_client_send_msg,s=t.visitor_status,h=t.standalone_window_config,d=t.widget_settings,b=t.send_file_settings,u=void 0===b?{}:b,m=t.visitor_video_msg_config,p=void 0===m?{}:m,g=t.custom_message_config,f=void 0===g?{}:g,b=t.template_id,m=t.risk_status,g=ee("get","MEIQIA_RING"),h=(n.standalone?h:d).ring,f=f.product_card,f=void 0===f?{}:f,a(ye({showBlackTip:["gray","black"].includes(m),entWelcomeMessage:i,enterpriseInfo:o,enterpriseInfoForAgent:{name:o.public_nickname,avatar:o.avatar||zn.a,signature:o.public_signature,tel:o.public_telephone,cellphone:o.public_cellphone,email:o.public_email,qq:o.public_qq,weixin:o.public_weixin,hasContact:o.public_telephone||o.public_cellphone||o.public_qq||o.public_weixin},queueingSettings:r,schedulerAfterClientSendMsg:c,visitorStatus:s,assign:n.assign||{},promotionMsgs:l||{msgs:[]},unReadPreview:"open"===d[Dn].btn.preview,productCard:{enabled:"open"===f.status,size:f.style||"small"},ringEnabled:g?"TRUE"===g:"open"===h,videoEnabled:"open"===p.status,fileEnabled:"open"===u.widget_status,templateId:b})),b=null;try{v=Ut("get"),b=JSON.parse(v),ge()(b)&&0===b.length&&(b=null)}catch(e){b=null}b&&(a(Ie(b)),n.withoutBtn||a(ce(!0)));case 8:case"end":return e.stop()}},e)}));return function(e,t,n){return a.apply(this,arguments)}}(),F=(n("Vd3H"),n("zH15")),An=n.n(F),Ln={name:"姓名",contact:"联系人",gender:"性别",age:"年龄",tel:"电话",qq:"QQ",weixin:"微信",weibo:"微博",address:"地址",email:"邮箱",comment:"备注",tag:"顾客标签",created_on:"创建顾客时间",updated_on:"更新时间",latest_conv_on:"最近一次对话时间",latest_visit_on:"最近一次访问时间"},Fn=function(e,n){var t=[{type:"client_card",body:n.body.content.map(function(e){var t=e.name,e=J()({},e);return Ln[t]&&(e.displayName=Ln[t]),n.body.node_id&&(e.node_id=n.body.node_id),e})}],t={id:"card-"+n.id,agent:{nickname:n.agent_nickname,avatar:n.avatar},from_type:"agent",content_type:"hybrid",card_type:n.body.event_type,content:t,created_on:n.created_on};n.body.node_id&&(t=J()({},t,{node_id:n.body.node_id})),e(xe(t)),an()},Rn=!1,Un=function(t){var n=Ge.dispatch,a=Ge.getState().get("message"),i=Bt()()-1e3;Rn||(Rn=!0,setTimeout(function(){n(xe(new vn({id:i,from_type:"redirect_agent"})))},1),an(),setTimeout(function(){var e={exclude_agent_tokens:[a.getIn(["agent","token"])]};t&&(e.unmatch_redirect=!0),wn(e).finally(function(){Rn=!1,n(ke(i))})},1e3))},Hn=function(e){return void 0===e&&(e={}),J()({},e,{from_type:"system_msg",content:Y.a.t("客服撤回了一条消息")})},Wn=function(e,t){t={id:"end-"+(t=void 0===t?{}:t).id,from_type:"system_msg",content:""+Y.a.t("营销机器人结束对话"),created_on:t.created_on};e(xe(t)),an()},Gn=function(e){var t=Ge.getState();t.getIn(["message","unReadPreview"])&&(t.get("router").get("showWidget")||(e.read_status=-3))},Vn=function(e){var t=Ge.getState(),n=Ge.dispatch,a=t.get("router"),t=t.getIn(["config","withoutBtn"]);a.get("showWidget")||(n(Ie(e)),t||a.get("showBubble")||n(ce(!0)),Ut("set",e))},Qn=null,Yn=function(e){var t;return 1e3*e*(t=70,e=90,st()(Math.random()*(e-t+1)+t,10))/100},$n=window.parent.meiqia.event,H=n("O+LL"),Kn=n.n(H),Jn=function(e,t){var n=Ge.dispatch,e={content:e},t={alertVisible:!0,alertConfig:J()(e,Kn()(t)?{timeout:t}:t)};n(oe(t))},Zn=null,Xn=null,ea=null,ta=null,na=["xhr-streaming","xdr-streaming","xhr-polling","xdr-polling","jsonp-polling"];void 0!==window.WebSocket&&(na=["websocket"]);var aa=0,ia=window.parent.meiqia.event,oa=!1;function ra(o,r,n,a,l,c){function s(){clearTimeout(Zn),Zn=setTimeout(function(){d.close(),ra(o,r,n,a,l)},3e4)}var e=M.socket+"?browser_id="+a+"&ent_id="+o+"&track_id="+r+"&visit_id="+n,d=new An.a(e,null,{transports:na});oa||(ia.on("reconnect",function(){aa=0,clearTimeout(ta),clearTimeout(ea),ra(o,r,n,a,l,!0)}),oa=!0);function u(e){return new Date(e).getTime()}d.onheartbeat=function(){d.send("h"),s()},d.onopen=function(){(aa||c)&&ia.emit("reconnectSuccess"),aa=0;var e,t,n=Ge.getState(),a=n.getIn(["config","isReconnect"]),i=n.get("message");clearTimeout(ea),clearTimeout(ta),a&&(n=Ge.dispatch,e={content:e=void 0===e?"":e},t={alertVisible:!1,alertConfig:J()(e,Kn()(t)?{timeout:t}:t)},n(oe(t))),a&&i.get("scheduler")&&!i.get("chatHasEnd")&&(a=1e3*Math.floor(4*Math.random()+2),clearTimeout(Xn),Xn=setTimeout(function(){var e,t,n,a;i.get("lastMsgDate")&&(e=o,t=r,n="after",a=i.get("lastMsgDate"),X({url:"/client/timeline",method:"get",params:{ent_id:e,track_id:t,filter_type:n,dt:a}}).then(function(e){if(e.data){var t=e.data,e=t.events,t=t.messages,n=e.concat(t);if(n.length){n.sort(function(e,t){return u(e.created_on)>u(t.created_on)?1:u(e.created_on)<u(t.created_on)?-1:0});for(var a=0;a<n.length;a+=1)Je(n[a].action+n[a].id)||Sn(n[a])}}}))},a)),l(G({socket:d,reconnectTime:0})),Rt(),s()},d.onmessage=function(e){try{var t,n=JSON.parse(e.data),a="client_send_msg_resp"===n.action?null==n||null==(t=n.msg)?void 0:t.id:n.id;Je(n.action+a)||Sn(n)}catch(e){}},d.onclose=function(e){var t;1e3!==e.code&&(t=Ge.getState().get("config"),e=aa?(aa+=1,1e3*Math.pow(2,Math.floor(aa))):(aa+=.1,500),l(G({socket:!1,isReconnect:!0,reconnectTime:Math.floor(e)})),ta=setTimeout(function(){t.get("stopReconnect")||ra(o,r,n,a,l)},32e3<=e?32e3:e),ea=ea||setTimeout(function(){t.get("socket")?ea=null:Jn(Y.a.t("连接已断开，请刷新页面"),0)},3e5))}}var la={},ca=function(){var a=Ye()($e.a.mark(function e(c,s,d){var u,p,m,g,h,f,b,v,y,x,w,k,_,E,C,I,T,S;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.__widgetInited)return e.abrupt("return",!1);e.next=2;break;case 2:if(window.__widgetInited=!0,u=(x=la=s?s:la).docLocation,p=x.entToken,m=x.subSource,g=x.clientId,h=x.docTitle,f=x.docReferrer,b=x.fingerprint,v=x._allowCheck,y=la.trackId,x={},v){e.next=18;break}return e.prev=8,e.next=11,function(e,t){e={ent_id:e};return t&&(e.source="web",e.sub_source_name=t),X({url:"/visit/get_base_config",method:"get",params:e})}(p,m);case 11:w=e.sent,x=w.data,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8);case 18:if(d){e.next=25;break}return e.next=21,On(la,x,c);case 21:if(e.sent)return window.__widgetInited=!1,e.abrupt("return",!1);e.next=25;break;case 25:return e.next=27,Mn(p,g);case 27:return(w=e.sent)&&w.data&&(y=w.data.track_id),w={ent_id:p,track_id:y||"",title:h,referrer_url:f,url:u,is_standalone:!!la.standalone},m&&(w.source="web",w.sub_source_name=m),b&&(w.fingerprint=b),e.next=34,X({url:"visit/start",method:"get",params:w});case 34:if(_=e.sent,window.parent.meiqia.event.emit("clearLocalReferrer"),k=_.data,_&&!1!==k.success){e.next=40;break}return window.__widgetInited=!1,e.abrupt("return",!1);case 40:return S=k.ent_id,_=k.track_id,E=k.visit_id,C=k.browser_id,I=k.service_evaluation_config,T=k.survey,_&&(y=_),S&&(la.entId=S,la.event.entId=S),e.next=45,qn(T,la.entId,m);case 45:return S=e.sent,la.entId,X({url:"/unified-api/crm/v1/attr_configs",method:"get"}).then(function(e){var t;e=null!=(e=null==e||null==(t=e.data)?void 0:t.attr_config_list)?e:[],c(G({attrConfig:e}))}),Tn(k,c),Bn(la,k,y,c),function(e,t,n,a){var i=!!e.visitor_info&&e.visitor_info.is_repeated_visitor,o=!1,r=null,l=!1,c=!1,e=!1;if("open"===t.status&&n&&(o="open"===t.status,c="open"===(r=n.data).form_def.menus.status,e="open"===r.form_def.inputs.status,i)){for(var s=r.form_def.inputs.fields,d=0,u=0;u<s.length;u+=1)s[u].ignore_returned_customer&&(s[u].ignore=!0,d+=1);d===s.length&&(e=!(l=!0)),"close"===r.form_def.menus.status&&l&&(o=!1)}a(ue({showSurvey:o,form:r,categoryEnabled:c,userFormEnabled:e}))}(k,T,S,c),function(e,t){e=e.robot_settings;t(Ae(e))}(k,c),c(pe(I)),Pn(k,la,c),l=void 0,l=(r=k).in_queue,r=r.queueing_settings,c(Pe({inQueue:l,intro:r.intro,ticketIntro:r.ticket_intro||""})),ra(la.entId,y,E,C,c),t=la,n=k,a=c,r=o=r=l=o=i=void 0,i=ut.isMobile()?"mobile":"desktop",o=n.enterprise_info,l=(o=void 0===o?{}:o).name,r=n.widget_settings,o=(r=void 0===r?{}:r).keepChatWindow,r=(void 0===(r=n.standalone_window_config)?{}:r)[i].webTitle,t.standalone&&(window.parent.document.title=r||"在线咨询 - "+l),4===n.visitor_status&&(n=ee("get","MEIQIA_PANEL_VISIBILITY")||"visible",a(ue({showSurvey:!1})),a(ye({schedulerAfterClientSendMsg:!1})),wn(),"visible"===n&&"close"!==o&&Ht(!0,"chat")),"mobile"==i&&j("init"),function(e,t,n){var a=t.callback,i=t.widget_settings,o=void 0===i?{mobile:{},desktop:{}}:i,i=t.standalone_window_config,t=void 0===i?{mobile:{},desktop:{}}:i,i=ut.isMobile(),o=(i?o.mobile:o.desktop).panel;e.standalone&&(o=i?t.mobile:t.desktop);o=J()({},a,{panelCallbackBtn:!!o&&!!o.callbackEnable});n(Fe(o))}(la,k,c),i=k,"function"==typeof la.getInviting&&i.servability&&2===i.visitor_status&&be("getInviting",i.visitor_status_agent_token),be("allSet",i.servability),e.abrupt("return",null);case 59:case"end":return e.stop()}var t,n,a,i,o,r,l},e,null,[[8,15]])}));return function(e,t,n){return a.apply(this,arguments)}}(),sa=jn.validateContent,R=function(s,d){function u(e){a?e():n.push(e)}var e,t=window.parent.meiqia,n=[],a=!1;return t&&(e=t.event,t.manualInit||ca(s,t),e.on("init",function(){ca(s,t)}),e.on("forwarded",function(n){void 0===n&&(n={}),u(function(){var e=n,t=e.agentToken,e=e.groupToken;(t||e)&&(s(Me({assign:{agentToken:t,groupToken:e}})),Qe({agentToken:t,groupToken:e}),setTimeout(function(){wn()},10))})}),e.on("showPanel",function(a){void 0===a&&(a={}),u(function(){var e=a,t=e.agentToken,n=e.groupToken,e=e.greeting;s(Ne("click")),s(Me({greeting:e,assign:{agentToken:t,groupToken:n}})),Qe({agentToken:t,groupToken:n}),(t||n)&&d.getState().getIn(["message","initScheduler"])&&setTimeout(function(){wn()},10),j("init"),Ht(!0,"chat")})}),e.on("hidePanel",function(){u(function(){Ht(!1)})}),e.on("manualCall",function(e){void 0===e&&(e={});var t=d.getState(),n=t.get("config"),a=t.get("call"),t=e,e=t.phone,i=t.success,o=t.fail;e&&"open"===a.get("callback")&&(n={ent_id:n.get("entId"),track_id:n.get("trackId"),phone:e,page_title:window.parent.document.title,page_url:window.parent.location.href},n=(e={data:n,headers:{"content-type":"application/json"}}).data,e=e.headers,X({url:"/callback/calls",method:"post",headers:e,data:n}).then(function(e){e&&e.data&&(e.data.success&&i&&"function"==typeof i?i(!0):o&&"function"==typeof o&&o(e.data.message||""))},function(e){try{var t=JSON.parse(e);o&&"function"==typeof o&&o(t.data.message)}catch(e){o&&"function"==typeof o&&o("呼叫失败")}}))}),e.on("assign",function(n){u(function(){s(ye({assign:n}));var e=n.agentToken,t=n.groupToken;(e||t)&&(Qe({agentToken:e,groupToken:t}),d.getState().getIn(["message","initScheduler"])&&setTimeout(function(){wn()},10))})}),e.on("metadata",function(t){u(function(){var e=d.getState().get("config");e.get("entId")&&z(e.get("entId"),e.get("trackId"),e.get("visitId"),e.get("browserId"),t)})}),e.on("trackEvent",function(o,r){u(function(){var t,e,n,a,i;"[object object]"!==Object.prototype.toString.call(r).toLowerCase()||(i=d.getState().get("config")).get("entId")&&(t=!1,K()(r).forEach(function(e){"object"==typeof r[e]&&(t=!0)}),t||(e=i.get("entId"),n=i.get("trackId"),a=o,i=v()(r),X({url:"/client/client_events",method:"post",headers:{"content-type":"application/json"},data:{ent_id:e,track_id:n,name:a,metadata:i}})))})}),e.on("ticket",function(a,i){u(function(){var e=a,t=d.getState().get("config");if(!t.get("entId"))return!1;var n={data:{enterprise_id:t.get("entToken"),track_id:t.get("trackId"),visit_id:t.get("visitId"),channel:"widget",content:e.ticketContent}};return delete e.ticketContent,z(t.get("entId"),t.get("trackId"),t.get("visitId"),t.get("browserId"),e),q(n).then(function(){"function"==typeof i&&i(!0)},function(){"function"==typeof i&&i(!1,"保存失败")}),!0})}),e.on("closeConversation",function(n){u(function(){var e=d.getState().get("config");e={entId:e.get("entId"),trackId:e.get("trackId")},X({url:"/client/end_conversation",method:"post",headers:{"content-type":"application/json"},data:{ent_id:e.entId,track_id:e.trackId}}).then(function(e){var t=null;e.data.success||(t=e.data.message||"failed"),"function"==typeof n&&setTimeout(function(){n(t)},500)},function(e){"function"==typeof n&&setTimeout(function(){n(v()(e))},500)})})}),e.on("reopenConversation",function(e){u(function(){"object"==typeof e&&e&&Qe(e),s(ye({convType:"newConv",scheduler:!1})),kn(!0)})}),e.on("rejectInvitation",function(){u(function(){t.getInviting})}),e.on("allSet",function(){a=!0,n.forEach(function(e){e&&"function"==typeof e&&e()})}),e.on("sendProductCardMsg",I(function(e){var t=e.title,n=e.picUrl,a=e.description,i=e.productUrl,o=e.salesCount,r=e.success,l=e.error,e=sa(e),c=d.getState().getIn(["config","customMessageConfig","product_card"],{style:"small"});e&&0===e.length?u(function(){jn(s,{pic_url:n,title:t,description:a,product_url:i,sales_count:o},{success:r,error:l,productConfig:c})}):l&&E(l)&&l({success:!1,message:"商品卡片参数不合法",error:e})},5,5,function(){}))),e},o=n("Lw/n"),F=n("aI3+");o.a({dsn:"https://5444d12dff65495880280bb958a193c8@api.meiqia.com/sentry-upload-api/10",integrations:[new F.a.BrowserTracing],tracesSampleRate:1});function da(e){var t,n=(r=Object(V.useState)(null))[0],a=r[1],i=e.component,o=e.children,r=e.GlobalStyle,l=Object(V.useRef)(null);return i&&(t=Q.a.createElement(i,ua()({ref:l},e))),Object(V.useEffect)(function(){var e=l.current.contentDocument;e&&"complete"===e.readyState?a(l.current):l.current.addEventListener("load",function(){a(l.current)})},[]),Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(c.a,{target:window.parent.document.head},t),n&&n.contentWindow&&Q.a.createElement(c.a,{target:n.contentWindow.document.head},Q.a.createElement(Q.a.Fragment,null,r?Q.a.createElement(r,null):null,Q.a.createElement(pa.a,{node:n.contentWindow.document.body},o))))}var H=n("htGi"),ua=n.n(H),pa=n("It+4"),o=function(n){return Q.a.forwardRef(function(e,t){return Q.a.createElement(n,ua()({},e,{forwardRef:t}))})},ma=c.d.iframe.withConfig({displayName:"base-button__BaseFrame",componentId:"sc-10my82n-0"})(["border:none;margin:0;padding:0;overflow-x:visible;overflow-y:visible;overflow-wrap:normal;display:"," !important;position:fixed;z-index:9999999;text-align:center;box-sizing:border-box;"],function(e){return e.visible?"block":"none"}),F=function(e){var t=e.forwardRef;return Q.a.createElement(ma,ua()({},e,{name:"button",ref:t}))},ga=window.parent.document.body.clientWidth;var ha=function(t,i){void 0===i&&(i=0);var e=Object(V.useState)(null),n=e[0],o=e[1];return Object(V.useEffect)(function(){var e;t&&((e=new Image).src=t,e.onload=function(e){var t=e.target.width,n=e.target.height,a=t,e=n;ga&&.9*ga<t&&(e=n*(a=.9*ga)/t),o({width:a+i+"px",height:e+i+"px"})})},[t,i]),n},fa=function(e){var t=Object(V.useState)(!1),n=t[0],a=t[1],i=e.get("servability"),o=e.get("visitorStatus");return Object(V.useEffect)(function(){a(!0===i||4===o)},[i,o]),n},ba={},va=function(e,t){var n,a=window.parent.document,i=a.getElementById("_calculateTextWidth");return ba[t]||(i?n=i:((n=a.createElement("span")).id="_calculateTextWidth",n.style.visibility="hidden",n.style.fontSize=e,n.style.fontFamily=a.body.style.fontFamily,n.style.display="inline-block",n.style.position="absolute",n.style.left="-100%",n.style.top="-100%",a.body.appendChild(n)),void 0!==n.textContent?n.textContent=t:n.innerText=t,ba[t]=st()(window.getComputedStyle(n).width||n.clientWidth,10),ba[t])},ya=function(e,t,n){var a={},i=(va("16px",n)||270)+80+30;switch(e){case"bottom":a.width=i+"px",a.height="70px";break;case"round":a.width="92px",a.height="92px";break;case"aside":a.width="70px",a.height=i+"px";break;case"picture":a.width="0",a.height="0";break;case"call":a.width="92px",a.height="92px"}return"mobile"===t&&"bottom"===e&&(a.width="100%",a.height="80px"),a},xa=function(e,t,n){var a=e.type,i=e.horizontal,e=e.bottom,o={};switch(o.bottom="bottom"===t?"-15px":e-15+"px",a){case"right":o.right=i-15+"px","aside"===t&&(o.right="-15px"),"bottom"===t&&"mobile"===n&&(o.right="0");break;case"left":o.left=i-15+"px","aside"===t&&(o.left="-15px"),"bottom"===t&&"mobile"===n&&(o.left="0")}return o};function wa(e){var t=e.theme,n=e.config,a=ut.isMobile()?"mobile":"desktop",a=Ea(t,n,a);return Q.a.createElement(Ca,ua()({},a,e))}function ka(e){return Q.a.createElement(Ta,e)}function _a(e,t){function n(e){return st()(e,10)||0}var a={},i=e.getIn([Ja,"btn","type"]),o=e.getIn([Ja,"btn","position","type"]);if("desktop"===Ja)switch(i){case"bottom":a[o]=n(t[o]),a.bottom=n(t.bottom)+n(t.height);break;case"aside":a[o]=n(t[o])+n(t.width),a.bottom=n(t.bottom)+.4*n(t.height);break;case"picture":case"round":case"call":a[o]=n(t[o])+n(t.width),a.bottom=n(t.bottom)+.5*n(t.height),a.transform="translateY(50%)"}else switch(i){case"bottom":a[o]=n(t[o]),a.bottom=n(t.bottom)+n(t.height);break;case"aside":a[o]=n(t[o])+n(t.width),a.bottom=n(t.bottom)+.4*n(t.height);break;case"picture":case"round":a[o]=n(t[o]),a.bottom=n(t.bottom)+n(t.height);break;case"call":a[o]=n(t[o]),a.bottom=n(t.bottom)+2*n(t.height)-20}return a}var Ea=function(t,e,n){var a=Object(V.useState)(null),i=a[0],o=a[1],r=fa(e);return Object(V.useEffect)(function(){var e=function(e,t,n){var a=e.getIn([""+t,"btn"]);if(a){e=a.text,e=void 0===e?{}:e,n=n?e.online:e.offline,e="picture"===a.type?"transparent":"#"+a.theme,n=ya(a.type,t,n),t=xa(a.position,a.type,t);return J()({},n,t,{bgColor:e})}return{}}(t,n,r);o(e)},[n,t,r]),e=function(e,t,n){e=e.getIn([""+t,"btn"]);if(e){t=e.picture;return"picture"!==e.type?null:n?t.online:t.offline}return null}(t,n,r),(e=ha(e,30))?J()({},i,e):i},Ca=Object(c.d)(F).withConfig({displayName:"chat-button__ChatButtonStyle",componentId:"sc-1j23u9p-0"})(["bottom:",";height:"," !important;width:"," !important;background-color:transparent;"," ",""],function(e){return e.bottom},function(e){return e.height||0},function(e){return e.width||0},function(e){return e.left?"left: "+e.left+";":""},function(e){return e.right?"right: "+e.right+";":""}),Ia=o(Object(i.b)(function(e){return{theme:e.get("theme"),config:e.get("config")}},function(e){return{dispatch:e}})(function(e){return Q.a.createElement(wa,e)})),Ta=c.d.span.withConfig({displayName:"base-icon__Container",componentId:"sc-1ajxhaa-0"})(["vertical-align:middle;padding-right:",";height:",';display:inline-block;background:url("','") no-repeat;background-position:'," ",";background-size:",";"],function(e){return e.width},function(e){return e.height},function(e){return e.image},function(e){return e.position[0]},function(e){return e.position[1]},function(e){return e.bgSize}),H=n("04Oa"),Sa=n.n(H),F=n("wjrw"),ja=n.n(F),H=n("RCPQ"),Na=n.n(H),Oa=["children","handleClick","className"],Ma=[{type:"face",info:["-23px","-1px"]},{type:"picture",info:["-23px","-23px"]},{type:"file",info:["-23px","-441px"]},{type:"good",info:["-23px","-45px"]},{type:"hide-white",info:["-23px","-67px"]},{type:"hide-black",info:["-2px","-67px"]},{type:"sound-white",info:["-23px","-89px"]},{type:"sound-black",info:["-2px","-89px"]},{type:"silent-white",info:["-23px","-111px"]},{type:"silent-black",info:["-2px","-111px"]},{type:"close",info:["-2px","-133px"]},{type:"email",info:["-1px","-155px"]},{type:"phone",info:["-1px","-177px"]},{type:"qq",info:["-1px","-199px"]},{type:"tele",info:["-1px","-221px"]},{type:"error",info:["-2px","-244px"]},{type:"wechat",info:["-1px","-287px"]},{type:"eva-good",info:["-2px","-310px"]},{type:"eva-normal",info:["-2px","-354px"]},{type:"eva-bad",info:["-2px","-398px"]},{type:"support",info:["-1px","-265px"]},{type:"cancel",info:["-23px","-507px"]},{type:"file-icon",info:["-1px","-530px"]},{type:"download",info:["-1px","-463px"]},{type:"call",info:["-1px","-573px"]}],Ba=[{type:"chat-button-1",info:["0","-3px"]},{type:"chat-button-2",info:["0","-35px"]},{type:"chat-button-3",info:["0","-67px"]},{type:"chat-button-4",info:["0","-99px"]},{type:"chat-button-5",info:["0","-131px"]},{type:"chat-button-6",info:["0","-163px"]},{type:"chat-button-7",info:["0","-227px"]},{type:"chat-button-8",info:["0px","-259px"]},{type:"chat-button-9",info:["0px","-291px"]},{type:"chat-button-10",info:["0px","-323px"]},{type:"chat-button-11",info:["0px","-355px"]},{type:"chat-button-12",info:["0px","-387px"]},{type:"call-button-1",info:["-31px","-3px"]},{type:"call-button-2",info:["-31px","-35px"]},{type:"call-button-3",info:["-31px","-67px"]},{type:"call-button-4",info:["-31px","-99px"]},{type:"call-button-5",info:["-31px","-131px"]},{type:"call-button-6",info:["-31px","-163px"]},{type:"call-button-7",info:["-31px","-227px"]},{type:"call-button-8",info:["-31px","-259px"]},{type:"call-button-9",info:["-31px","-291px"]},{type:"call-button-10",info:["-31px","-323px"]},{type:"call-button-11",info:["-31px","-355px"]},{type:"call-button-12",info:["-31px","-387px"]},{type:"call-callback",info:["-31px","-451px"]}],qa=[{type:"mobile-page-back",info:["-25px","-436px"]}],za=c.d.label.withConfig({displayName:"icon__Span",componentId:"sc-5foskt-0"})(["display:inline-block;vertical-align:middle;"]),Da=function(t){var e,n=t.children,a=t.handleClick,i=t.className,o=me()(t,Oa),r=Ma.find(function(e){return e.type===t.type}),l=qa.find(function(e){return e.type===t.type}),c=Ba.find(function(e){return e.type===t.type});return r&&(e=Q.a.createElement(ka,ua()({},o,{image:Sa.a,position:r.info,bgSize:"44px auto"}))),l&&(e=Q.a.createElement(ka,ua()({},o,{image:ja.a,position:l.info,bgSize:"44px auto"}))),c&&(o=J()({},o,{width:"32px",height:"32px"}),e=Q.a.createElement(ka,ua()({},o,{image:Na.a,position:c.info,bgSize:"64px auto"}))),Q.a.createElement(za,{onClick:a,className:i},e,n||null)},Pa=c.d.div.withConfig({displayName:"frame-button-content__Wrapper",componentId:"sc-1td9tx7-0"})(["height:100%;width:100%;background-color:#",";",";",";",";text-align:center;cursor:pointer;label{cursor:pointer;}"],function(e){return e.bgColor},function(e){return e.borderRadius?"border-radius: "+e.borderRadius:""},function(e){return e.boxShadow?"box-shadow: "+e.boxShadow:""},function(e){return e.position||"position: relative;"}),Aa=c.d.div.withConfig({displayName:"frame-button-content__BottomLeft",componentId:"sc-1td9tx7-1"})(["float:left;width:40px;height:30px;border-right:1px solid rgba(0,0,0,0.08);padding-top:10px;"]),La=c.d.div.withConfig({displayName:"frame-button-content__ButtonRight",componentId:"sc-1td9tx7-2"})(["line-height:40px;font-size:16px;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:calc(100% - 41px);"]),Fa=c.d.div.withConfig({displayName:"frame-button-content__RoundWrapper",componentId:"sc-1td9tx7-3"})(["padding-top:19px;"]),Ra=c.d.div.withConfig({displayName:"frame-button-content__AsideTop",componentId:"sc-1td9tx7-4"})(["height:30px;width:40px;line-height:40px;padding-top:10px;border-bottom:1px solid rgba(0,0,0,0.08);"]),Ua=Object(c.d)(La).withConfig({displayName:"frame-button-content__AsideBottom",componentId:"sc-1td9tx7-5"})(["float:none;color:#fff;writing-mode:tb-rl;height:calc(100% - 41px);width:40px;"]),Ha=c.d.div.withConfig({displayName:"frame-button-content__MobileBottomLeft",componentId:"sc-1td9tx7-6"})(["height:35px;padding-top:10px;color:#fff;> span{padding-left:10px;line-height:20px;}"]),Wa=c.d.div.withConfig({displayName:"frame-button-content__Picture",componentId:"sc-1td9tx7-7"})(["width:100%;height:100%;background:url(",") no-repeat;background-size:cover;"],function(e){return e.selectPicture}),Ga=c.d.div.withConfig({displayName:"frame-button-content__Unread",componentId:"sc-1td9tx7-8"})(["height:24px;min-width:24px;line-height:24px;border-radius:50%;font-size:14px;color:#fff;position:absolute;"," top:-8px;background:#f00;"],function(e){return e.styles||"left: -8px;"}),Va=Object(i.b)(function(e){return{theme:e.get("theme"),config:e.get("config"),unReadCount:e.getIn(["message","unReadCount"])}},function(e){return{dispatch:e}})(function(e){var t=e.theme,n=e.config,a=e.unReadCount,i=ut.isMobile(),o=i?"mobile":"desktop",r=t.getIn([o,"btn"]),l=function(e){var t={};if(e){var n=e.type;switch(t.bgColor=e.theme,t.boxShadow="rgba(0, 0, 0, 0.16) 0 5px 14px",n){case"round":case"call":t.borderRadius="50%";break;case"picture":t.bgColor="transparent",t.boxShadow="";break;case"bottom":ut.isMobile()&&(t.position="position:absolute;left:0;right:0;top:15px;")}}return t}(r),c=fa(n,t),e=t.get("isLimitButton"),s=r&&"round"===r.type,d=Object(V.useRef)(null);return Object(V.useEffect)(function(){var e=d.current;return s&&i&&Mt.register(e,"button",i),function(){i&&Mt.unregister(e,!0)}},[s,i]),Q.a.createElement(Pa,ua()({},l,{ref:d}),0<a&&"picture"!==r.type?Q.a.createElement(Ga,{styles:(n="left",t="-10px",(n=(l=r).position?"right"===l.position.type?"left":"right":n)+": "+(t="bottom"===l.type&&ut.isMobile()?"0":t)+";")},a):null,function(e,t,n,a){var i;if(e){var o=e.type,r=void 0===o?"":o,l=e.text,o=void 0===l?{}:l,l=e.icon,l=void 0===l?{}:l,e=e.picture,e=void 0===e?{}:e,c="",s="",d="";switch(n?(c=o.online,s="chat-button-"+l.online,d=e.online,"call"===r&&(s="chat-button-1")):(c=o.offline,s="call-button-"+l.offline,d=e.offline,"call"===r&&(s="call-button-1")),a&&(s="chat-button-1"),r){case"bottom":i=[Q.a.createElement(Aa,{key:"left"},Q.a.createElement(Da,{type:s})),Q.a.createElement(La,{key:"right"},c)];break;case"round":case"call":i=Q.a.createElement(Fa,null,Q.a.createElement(Da,{type:s}));break;case"aside":i=[Q.a.createElement(Ra,{key:"top"},Q.a.createElement(Da,{type:s})),Q.a.createElement(Ua,{key:"bottom"},c)];break;case"picture":i=Q.a.createElement(Wa,{selectPicture:d})}"mobile"===t&&"bottom"===r&&(i=Q.a.createElement(Ha,null,Q.a.createElement(Da,{type:s}),Q.a.createElement("span",null,c)))}return i}(r,o,c,e))}),Qa=Object(c.c)(["html,body{height:100%;width:100%;margin:0;padding:0;}body{box-sizing:border-box;padding:15px;}"]),Ya=c.d.div.withConfig({displayName:"router-button__Wrapper",componentId:"sc-1xlmfkg-0"})(["width:100%;height:100%;"]),$a=!1,Ka=Object(i.b)(function(e){return{router:e.get("router"),config:e.get("config"),theme:e.get("theme")}},function(e){return{dispatch:e}})(function(e){var t=e.router,n=e.config,a=e.dispatch,i=e.theme.get("isLimitButton"),e=function(){var t=Ye()($e.a.mark(function e(t){return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),$a)return e.abrupt("return");e.next=3;break;case 3:if($a=!0,a(Ne("click")),i)return e.next=8,ca(a,null,!0);e.next=8;break;case 8:Qe(),kn().then(function(){Ht(!($a=!1),"chat")},function(){$a=!1});case 10:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}();return Q.a.createElement(da,{visible:t.get("showButton")&&!n.get("withoutBtn"),component:Ia,GlobalStyle:Qa,iframeName:"button"},Q.a.createElement(Ya,{onClick:e,onTouchStart:e},Q.a.createElement(Va,null)))}),Ja=ut.isMobile()?"mobile":"desktop",Za=c.d.iframe.attrs({allowtransparency:"true"}).withConfig({displayName:"frame-bubble__BubbleFrame",componentId:"sc-ik1xl9-0"})(["width:300px !important;height:140px !important;border:none;margin:0;padding:0;overflow-x:visible;overflow-y:visible;overflow-wrap:normal;position:fixed;z-index:9999999;cursor:pointer;display:"," !important;"," "," "," ",""],function(e){return e.visible?"block":"none"},function(e){return e.left?"left: "+e.left+"px;":""},function(e){return e.right?"right: "+e.right+"px;":""},function(e){return"bottom: "+e.bottom+"px;"},function(e){return e.transform?"transform: "+e.transform+";":""}),Xa=o(Object(i.b)(function(e){return{theme:e.get("theme"),config:e.get("config")}})(function(e){var t=e.theme,n=e.config,a=e.forwardRef,i=Ea(t,n,Ja),n=_a(t,i),i=t.getIn([Ja,"btn","type"]),t=t.getIn([Ja,"btn","position","type"]);return Q.a.createElement(Za,ua()({},e,{"data-direction":t,"data-type":i},n,{name:"bubble",ref:a}))})),ei=c.d.i.withConfig({displayName:"iconfont__IconFont",componentId:"sc-1aa14be-0"})(["font-family:'iconfont' !important;font-size:","px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;cursor:pointer;",""],function(e){return e.size},function(e){return e.fontColor?"color: "+e.fontColor+";":""});var ti=function(e){var t=e.className,n=e.type,a=e.size,i=e.onClick,e=e.fontColor;return Q.a.createElement(ei,{fontColor:e,onClick:void 0===i?function(){return null}:i,className:(void 0===n?"":n)+" "+(void 0===t?"":t),size:void 0===a?20:a})},ni=n("Q63H"),ai=c.d.div.withConfig({displayName:"msg-text__Text",componentId:"sc-1jl8p2c-0"})(["color:",";white-space:normal;text-align:left;a{color:",";}.emoji{display:inline-block;width:16px;height:16px;}.large_wrap{width:54px;height:64px;}.large_emoji{width:86px;height:86px;position:absolute;top:-1;left:-1;display:block;background-color:#fcfcfc;}"],function(e){return null!=(e=e.fontColor)?e:"#1d2754"},function(e){return e.fontColor}),F=function(e){var n=e.msg||"",t=Object(ni.parse)(e.msg,{buildUrl:function(e){return M.public+"svg/"+e+".svg"}});return t&&(t[0]&&t[0].text===n.trim()?n="<div class='large_wrap'><img src="+t[0].url+" class='large_emoji' /></div>":t.forEach(function(e){var t=new RegExp(""+e.text);e.url&&(n=n.replace(t,"<img src="+e.url+" class='emoji' />"))})),Object(V.useMemo)(function(){return Q.a.createElement(ai,{fontColor:e.fontColor,dangerouslySetInnerHTML:{__html:"<div>"+n+"</div>"}})},[e.fontColor,n])},ii=Q.a.memo(F),oi=(n("tUrg"),c.d.div.withConfig({displayName:"msg-remind__RemindBox",componentId:"sc-1uxpeh2-0"})(["padding:0 4px;color:rgba(4,15,66,0.6);border-left:2px solid #eef0f6;position:relative;margin:0 0 16px 0;cursor:",";&::after{position:absolute;content:'';left:0;right:0;bottom:-10px;height:1px;background-color:#eef0f6;}"],function(e){return e.withdrawn?"auto":"pointer"})),ri=c.d.div.withConfig({displayName:"msg-remind__RemindContent",componentId:"sc-1uxpeh2-1"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]);var li=function(e){var t,n,a,i=e.content_type,o=e.content,r=e.extra,l=o;switch(i){case"text":l=o;break;case"rich_text":t=r&&r.content||o,t=(n=void 0===(n=(t=void 0===t?"":t)||"")?"":n).replace?n.replace(/<(img|image) .*?\/>/g,"【图片】"):"",(n=document.implementation.createHTMLDocument("new").body).innerHTML=t,l=n.textContent||n.innerText||"";break;case"video":l="[视频]";break;case"file":l="[文件]";break;case"photo":l="[图片]";break;default:l=o}return l=!_(l="array"===k(l).toLowerCase()&&l.length&&(a=l[0])&&a.body&&a.body.product_url?a.body.product_url:l)?"未识别消息类型":l};function ci(e){var t=e.message,n=e.handleClickRemind;if(!t)return null;var a=li(t),e=t.extra&&t.extra.is_withdrawn;return Q.a.createElement(oi,{withdrawn:e,onClick:function(){return e=t.id,on(e),void n(e);var e}},Q.a.createElement(ri,null,e?"回复内容已撤回":"回复："+a))}var si="#fff",di=10,ui=Object(c.d)(function(e){return Q.a.createElement("div",{className:e.className},e.children)}).withConfig({displayName:"msg-base__Wrapper",componentId:"sc-kwi7by-0"})(["padding-top:10px;padding-bottom:10px;",";&:after{content:' ';display:table;clear:both;}@keyframes highlight1{0%{background:transparent;}50%{background:#e1e5f0;}100%{background:transparent;}}@keyframes highlight2{0%{background:transparent;}50%{background:#e1e5f0;}100%{background:transparent;}}&.highlight1{animation:highlight1 3s;}&.highlight2{animation:highlight2 3s;}"],function(e){return"left"===e.direction?"padding-right: "+e.msgMargin:"padding-left: "+e.msgMargin}),pi=c.d.img.withConfig({displayName:"msg-base__Avatar",componentId:"sc-kwi7by-1"})(["width:36px;height:36px;margin-right:10px;margin-top:16px;vertical-align:top;float:",";"],function(e){return e.direction}),mi=c.d.div.withConfig({displayName:"msg-base__InfoWrapper",componentId:"sc-kwi7by-2"})(["float:",";text-align:",";max-width:calc(100% - 50px);"],function(e){return e.direction},function(e){return e.direction}),gi=c.d.div.withConfig({displayName:"msg-base__Name",componentId:"sc-kwi7by-3"})(["color:#b2b2b2;font-size:12px;margin-bottom:2px;"]),hi=c.d.div.withConfig({displayName:"msg-base__MsgWrapper",componentId:"sc-kwi7by-4"})(["max-width:100%;position:relative;background-color:",";border-radius:3px;border:1px solid #f0f0f0;"," ",""],function(e){return e.themeColor},function(e){return"right"===e.direction?"margin-left: 30px;":""},function(e){return"float: "+e.direction+";"}),fi=c.d.div.withConfig({displayName:"msg-base__MsgStatus",componentId:"sc-kwi7by-5"})(["position:absolute;top:8px;left:-22px;width:15px;height:100%;"]),bi=c.d.div.withConfig({displayName:"msg-base__MsgBox",componentId:"sc-kwi7by-6"})(["padding:",";border-radius:3px;font-size:13px;word-break:break-word;.emoji{width:20px;height:20px;vertical-align:text-bottom;}"],function(e){return e.padding||"10px 15px"}),vi=c.d.div.withConfig({displayName:"msg-base__Evaluation",componentId:"sc-kwi7by-7"})(["width:100%;height:30px;min-width:150px;line-height:30px;position:relative;border-top:solid 1px #eee;"]),yi=c.d.span.withConfig({displayName:"msg-base__EvaSpan",componentId:"sc-kwi7by-8"})(["width:",";height:100%;display:inline-block;color:",";cursor:pointer;font-size:13px;text-align:center;"],function(e){return e.width},function(e){return e.color}),xi=c.d.div.withConfig({displayName:"msg-base__Split",componentId:"sc-kwi7by-9"})(["position:absolute;left:50%;top:0;bottom:0;width:1px;background:#eee;"]),wi=["highlight1","highlight2"];function ki(e){var t=Object(V.useState)(null),n=t[0],a=t[1],i=e.id,o=e.questionId,r=e.question,l=e.msgMargin,c=void 0===l?di:l,s=e.themeColor,d=void 0===s?si:s,u=e.className,p=e.padding,m=e.name,g=e.time,h=e.direction,f=e.avatar,b=e.evaluateStatus,v=e.handleFeedback,t=e.status,l=e.handleMsgClick,y=e.handleHighLight,s=e.customExtra,s=void 0===s?{remindMessage:null,remindMessageId:null}:s,x=e.highlightFlag,d={themeColor:d,direction:h},h=Object($.c)()[0];return Object(V.useEffect)(function(){x&&a(function(e){return(e+1)%2})},[x]),Q.a.createElement(ui,{msgMargin:c,className:null!==n?wi[n]:""},f?Q.a.createElement(pi,ua()({src:f},d)):null,Q.a.createElement(mi,ua()({},d,{className:u}),Q.a.createElement(gi,null,m?m+" ":null,g||null),Q.a.createElement(hi,d,"error"===t?Q.a.createElement(fi,null,Q.a.createElement(Da,{type:"error",width:"18px",height:"18px"})):null,Q.a.createElement(bi,{padding:p,onClick:l},Q.a.createElement(ci,{message:s.remindMessage,handleClickRemind:function(e){y(e)}}),e.children),b&&o?Q.a.createElement(vi,null,"waiting"===b?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(yi,{width:"50%",color:"#6088e6",onClick:function(){return v(i,o,1,r)}},h("解决")),Q.a.createElement(yi,{width:"50%",color:"#6088e6",onClick:function(){return v(i,o,0,r)}},h("未解决")),Q.a.createElement(xi,null)):null,"finish"===b?Q.a.createElement(yi,{width:"100%",color:"#aaa"},h("已反馈")):null,"submit"===b?Q.a.createElement(yi,{width:"100%",color:"#aaa"},h("提交中")):null):null)))}var _i=c.d.div.withConfig({displayName:"msg-menu__MenuWrapper",componentId:"sc-13vi9i2-0"})(["width:100%;display:inline-block;overflow:hidden;.textBefore{color:#1d2754;}"]),Ei=c.d.div.withConfig({displayName:"msg-menu__Item",componentId:"sc-13vi9i2-1"})(["margin:3px 0;"]),Ci=c.d.a.withConfig({displayName:"msg-menu__Anchor",componentId:"sc-13vi9i2-2"})(["font-size:13px;color:#1880ff;text-decoration:none;"]),Ii=c.d.span.withConfig({displayName:"msg-menu__Span",componentId:"sc-13vi9i2-3"})(["font-size:13px;color:#1880ff;cursor:pointer;"]),Ti=c.d.p.withConfig({displayName:"msg-menu__Tip",componentId:"sc-13vi9i2-4"})(["color:#9095ab;margin:8px 0;font-size:13px;"]),Si=c.d.div.withConfig({displayName:"msg-menu__Change",componentId:"sc-13vi9i2-5"})(["height:34px;line-height:34px;position:relative;text-align:center;cursor:pointer;color:#1880ff;font-size:14px;border-top:1px solid #e1e5f0;margin-bottom:-10px;-moz-user-select:none;user-select:none;"]),ji=c.d.div.withConfig({displayName:"msg-menu__Guide",componentId:"sc-13vi9i2-6"})(["margin-top:8px;border-top:1px solid #e1e5f0;padding-top:8px;margin-bottom:5px;"]),Ni=c.d.div.withConfig({displayName:"msg-menu__Question",componentId:"sc-13vi9i2-7"})(["margin-bottom:8px;padding-bottom:8px;border-bottom:1px solid #e1e5f0;& + div{margin-bottom:5px;}"]),Oi=5;function Mi(e){var t=e.textBefore,n=e.textAfter,a=e.menuTip,i=e.items,o=e.handleMenuClick,r=void 0===o?function(){}:o,l=e.type,c=void 0===l?"menu":l,s=e.clientMessage,o=Object(V.useState)(1),d=o[0],u=o[1],l=Object($.c)()[0],p="related"===c,m=Object(V.useMemo)(function(){var e=i.length%Oi,t=st()(i.length/Oi,10);return 0<e?t+1:t},[i]),e=Object(V.useMemo)(function(){if(i.length<=Oi||p)return i;var e=(d-1)*Oi;return i.slice(e,Oi+e)},[i,d,p]),o=Object(V.useCallback)(function(){var e=d+1;u(m<e?1:e)},[d,m]),c=Object(V.useCallback)(function(e){return Q.a.createElement("div",null,e.map(function(e){return e.link?Q.a.createElement(Ei,{key:e.value},Q.a.createElement(Ci,{target:"_blank",href:e.link},e.text)):Q.a.createElement(Ei,{key:e.value},Q.a.createElement(Ii,{onClick:function(){return r(e.text.trim().replace(/^\d+\.\s+/,""))}},e.text))}))},[r]);return Q.a.createElement(_i,null,s?Q.a.createElement(ji,null,Q.a.createElement("p",{className:"textBefore"},t)):Q.a.createElement("div",null,Q.a.createElement(Ni,null,Q.a.createElement("p",{className:"textBefore"},t)),Q.a.createElement("div",null,l("常见问题"),"：")),c(e),n?Q.a.createElement("p",null,n):null,a?Q.a.createElement(Ti,null,a):null,a&&5<i.length&&!p?Q.a.createElement(Si,{onClick:o},l("换一换")):null)}function Bi(e){var t=e.content,n=e.handleImagePreview,e=Object(V.useMemo)(function(){return t.replace(/<a/g,'<a target="_blank"')},[t]);return Q.a.createElement(qi,{onClick:function(e){"IMG"===e.target.nodeName&&e.target.src&&"A"!==e.target.parentNode.nodeName&&n(e.target.src)},dangerouslySetInnerHTML:{__html:e}})}var qi=c.d.div.withConfig({displayName:"msg-rich__RichWrapper",componentId:"sc-11bxmta-0"})(["width:100%;display:inline-block;overflow:hidden;color:#1d2754;img{max-width:100%;}ul{list-style-type:disc;list-style-position:inside;}ol{list-style-type:decimal;list-style-position:inside;}ul ul,ol ul{list-style-type:circle;list-style-position:inside;margin-left:15px;}ol ol,ul ol{list-style-type:lower-latin;list-style-position:inside;margin-left:15px;}li{list-style:inherit;}p{min-height:16px;}var{font-style:normal;}"]),H=function(e){var t=e.content,n=e.handleMenuClick,a=e.handleImagePreview,i=e.clientMessage,t=ge()(t)?t:[t],o=Object($.c)()[0];return Q.a.createElement("div",null,t.map(function(e,t){return"string"==typeof e?Q.a.createElement("div",{key:t},Q.a.createElement(Bi,{content:e,handleImagePreview:a})):"object"==typeof e&&"menu"===e.type?Q.a.createElement("div",{key:t},Q.a.createElement(Mi,{clientMessage:i,type:e.ctype,handleMenuClick:n,items:e.items,textBefore:e.textBefore,menuTip:o("点击问题或回复数字查看答案")})):Q.a.createElement("div",{key:t},Q.a.createElement(Bi,{content:e}))}))},zi=Q.a.memo(H),F=n("mgp7"),Di=n.n(F),H=function(e){return ut.isMobile()&&ut.isSafari()?[[RegExp("^"+e+"$","gm"),'<a target="_parent" href="tel:$1">$1</a>'],[RegExp("^"+e+"(\\D)","gm"),'<a target="_parent" href="tel:$1">$1</a>$2'],[RegExp("(\\D)"+e+"$","gm"),'$1<a target="_parent" href="tel:$2">$2</a>'],[RegExp("(\\D)"+e+"(\\D)","gm"),'$1<a target="_parent" href="tel:$2">$2</a>$3']]:[[RegExp("^"+e+"$","gm"),'<a target="_blank" href="tel:$1">$1</a>'],[RegExp("^"+e+"(\\D)","gm"),'<a target="_blank" href="tel:$1">$1</a>$2'],[RegExp("(\\D)"+e+"$","gm"),'$1<a target="_blank" href="tel:$2">$2</a>'],[RegExp("(\\D)"+e+"(\\D)","gm"),'$1<a target="_blank" href="tel:$2">$2</a>$3']]},Pi=[[/((http:\/\/|https:\/\/)[.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[/?#]([^u4e00-u9fa5]|[A-Za-z0-9])+\/$)/gim,'<a target="_blank" href="$1">$1</a>'],[/([.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[/?#]([^u4e00-u9fa5]|[A-Za-z0-9])+\/$)/gim,'<a target="_blank" href="http://$1">$1</a>'],[/((ftp:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((http:\/\/|https:\/\/)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="$1">$1</a>'],[/((www\.)[^\u4E00-\u9FA5 ]+)/gi,'<a target="_blank" href="http://$1">$1</a>'],[/([.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[/?#][^\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi))[/?#])/gim,'<a target="_blank" href="http://$1">$1</a>'],[/([.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))([0-9\s\u4E00-\u9FA5，]+)/gim,'<a target="_blank" href="http://$1">$1</a>$18'],[/([.A-Za-z0-9-]+?\.((com)|(net)|(im)|(cn)|(me)|(org)|(edu)|(cc)|(biz)|(info)|(tv)|(co)|(so)|(tel)|(mobi)))$/gim,'<a target="_blank" href="http://$1">$1</a>']],Ai=[[/([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,15})/gim,'<a href="mailto:$1">$1</a>']],Li=[];Li=(Li=(Li=(Li=Li.concat(H("([1]\\d{10})"))).concat(H("([48]00\\d?-?\\d{3,4}-?\\d{3,4})"))).concat(H("(0\\d{2,3}-?\\d{7,8})"))).concat(H("(\\d{8})"));function Fi(e,t){var n=document.createElement("div");n.innerHTML=e;for(var a=0,i=n.childNodes.length;a<i;a+=1){var o,r,l=n.childNodes[a];3===l.nodeType&&((o=document.createElement("em")).appendChild(l.cloneNode(!0)),r=o.innerHTML,o.innerHTML=o.innerHTML.replace(t[0],t[1]),o.innerHTML!==r&&n.replaceChild(o,l))}return n.innerHTML.replace(/<em>/g,"").replace(/<\/em>/g,"").replace(/&nbsp;/," ")}function Ri(e){var t=e;return K()(Li).forEach(function(e){t=Fi(t,Li[e])}),t}function Ui(e){var t=e;return K()(Pi).forEach(function(e){t=Fi(t,Pi[e])}),t}function Hi(e){var t=e;return K()(Ai).forEach(function(e){t=Fi(t,Ai[e])}),t}function Wi(e){return e.replace(/\n/g,"<br/>")}function Gi(e){void 0===e&&(e="");var t=$i(function(e){return Di()(e)},function(e){return Vi.convertTel(e)},function(e){return Vi.convertBr(e)},function(e){return Yi(e)});return ge()(e)?e.map(function(e){return t(e)}):t(e)}var Vi={convertTel:Ri,convertUrl:Ui,convertEmail:Hi,convertBr:Wi,convertAll:function(e){var t=Wi(e);return t=Hi(t),t=Ui(t),Ri(t)}},Qi=[{text:"smile",native:"😀"},{text:"smiley",native:"😃"},{text:"grinning",native:"😄"},{text:"blush",native:"😊"},{text:"relaxed",native:"☺️"},{text:"wink",native:"😉"},{text:"heart_eyes",native:"😍"},{text:"kissing_heart",native:"😘"},{text:"kissing_closed_eyes",native:"😘"},{text:"kissing",native:"😗"},{text:"kissing_smiling_eyes",native:"😗"},{text:"stuck_out_tongue_winking_eye",native:"😜"},{text:"stuck_out_tongue_closed_eyes",native:"😝"},{text:"stuck_out_tongue",native:"😝"},{text:"flushed",native:"😮"},{text:"pensive",native:"😬"},{text:"relieved",native:"😌"},{text:"unamused",native:"😌"},{text:"disappointed",native:"😒"},{text:"persevere",native:"😦"},{text:"cry",native:"😪"},{text:"joy",native:"😢"},{text:"sob",native:"😭"},{text:"sleepy",native:"😪"},{text:"disappointed_relieved",native:"😥"},{text:"cold_sweat",native:"😰"},{text:"sweat_smile",native:"😅"},{text:"sweat",native:"😓"},{text:"weary",native:"😩"},{text:"tired_face",native:"😫"},{text:"fearful",native:"😨"},{text:"scream",native:"😱"},{text:"angry",native:"😠"},{text:"rage",native:"😡"},{text:"dog",native:"🐶"}],Yi=function(e){var n=e;return Qi.forEach(function(e){var t=new RegExp(":"+e.text+":");n=n.replace(t,e.native)}),n},$i=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){var t=e;return n.forEach(function(e){t=e(t)}),t}},F=function(e){var t=e.content.map(function(e){var t=null;return"text"===e.type?t=e.rich_text||Gi(e.text):"menu"!==e.type&&"related"!==e.type||(t={type:"menu",ctype:e.type,items:e.items.map(function(e){return J()({},e,{text:Gi(e.text)})}),textBefore:e.text_before}),t});return Q.a.createElement(zi,ua()({},e,{content:t}))},Ki=Q.a.memo(F),Ji=c.d.a.withConfig({displayName:"msg-pic__ImgWrapper",componentId:"sc-ii1wvc-0"})(["width:auto;max-width:100%;cursor:pointer;"]),Zi=c.d.img.withConfig({displayName:"msg-pic__Img",componentId:"sc-ii1wvc-1"})(["max-width:100%;max-height:",";"],function(e){return e.loadStatus?"280px":"30px"});function Xi(e){var t=e.id,n=e.url,a=e.status,i=e.handleOnload,o=void 0===i?function(){}:i,r=e.handleImagePreview,l={},i=Object(V.useState)(!0),e=i[0],c=i[1],s=Object(V.useCallback)(o,[]);return"error"!==a&&"sending"!==a&&!ut.isMobile()||(l.href="",l.onClick=function(e){return e.preventDefault()}),Q.a.createElement(Ji,l,Q.a.createElement(Zi,{src:n,alt:"图片加载失败",loadStatus:e,onClick:function(e){"IMG"===e.target.nodeName&&e.target.src&&r(e.target.src)},onError:function(){c(!1),s(t)}}))}var eo=c.d.div.withConfig({displayName:"msg-video__VideoWrapper",componentId:"sc-roekg-0"})(["width:auto;max-width:100%;min-width:50px;min-height:100px;cursor:pointer;position:relative;"]),to=c.d.img.withConfig({displayName:"msg-video__Img",componentId:"sc-roekg-1"})(["max-width:100%;max-height:",";"],function(e){return e.loadStatus?"280px":"100px"}),no=c.d.div.withConfig({displayName:"msg-video__DefaultImg",componentId:"sc-roekg-2"})(["width:120px;height:200px;background:rgba(0,0,0,0.8);"]),ao=c.d.a.withConfig({displayName:"msg-video__Action",componentId:"sc-roekg-3"})(["position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;text-decoration:none;color:#fff;i{font-size:60px;color:#fff;background:radial-gradient(rgba(0,0,0,0.6) 5%,rgba(0,0,0,0.6) 49%,rgba(0,0,0,0) 50%);}"]),io={position:"fixed",top:0,left:0,bottom:0,right:0,zIndex:9999999,padding:"40px",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.5)"},oo={maxWidth:"100%",maxHeight:"100%",border:"none",outline:"none"},ro={position:"absolute",right:"20px",top:"5px",fontSize:"40px",color:"#fff",cursor:"pointer",zIndex:100};function lo(e){var t=e.url,n=e.thumbUrl,a=e.status,i=e.progress,o=e.scrollToBottom,r=Object(V.useState)(!0),l=r[0],c=r[1],e=Object(V.useState)(!1),r=e[0],s=e[1],t=Q.a.createElement("div",{style:io,onClick:function(){return s(!1)}},Q.a.createElement("div",{style:ro,onClick:function(){return s(!1)}},"×"),Q.a.createElement("video",{controls:!0,autoPlay:!0,style:oo,onClick:function(e){e.stopPropagation()}},Q.a.createElement("source",{src:t,type:"video/mp4"}),Q.a.createElement("source",{src:t,type:"video/quicktime"}),Q.a.createElement("track",{kind:"captions"}),"浏览器不支持该视频编码格式，请右键下载后查看"));return Q.a.createElement(eo,null,"success"!==a&&a?Q.a.createElement(ao,null,i?i.toFixed(0)+"%":""):Q.a.createElement(ao,{onClick:function(){"fail"!==a&&"uploading"!==a&&s(!0)}},Q.a.createElement(ti,{type:"iconicon_widget_video"})),"success"!==a&&a||!n||!l?Q.a.createElement(no,null):Q.a.createElement(to,{src:n,alt:"图片加载失败",loadStatus:l,onLoad:function(){c(!0),o()},onError:function(){c(!1)}}),r?d.a.createPortal(t,window.parent.document.body):null)}var co=c.d.div.withConfig({displayName:"msg-file__FileWrapper",componentId:"sc-m3rns3-0"})(["width:100%;position:relative;padding-left:50px;box-sizing:border-box;background:#fff;&:after{content:' ';display:table;clear:both;}"]),so=c.d.div.withConfig({displayName:"msg-file__FileIcon",componentId:"sc-m3rns3-1"})(["position:absolute;left:0;top:0;bottom:0;"]),uo=c.d.div.withConfig({displayName:"msg-file__FileInfo",componentId:"sc-m3rns3-2"})(["width:100%;min-width:130px;height:42px;"]),H=c.d.div.withConfig({displayName:"msg-file__FileDiv",componentId:"sc-m3rns3-3"})(["text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:12px;text-align:left;"]),po=c.d.div.withConfig({displayName:"msg-file__FileTitle",componentId:"sc-m3rns3-4"})(["position:relative;box-sizing:border-box;text-align:left;.name{padding-right:56px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:12px;color:#333;}.size{position:absolute;top:0;right:0;font-size:12px;color:#777;}"]),mo=Object(c.d)(H).withConfig({displayName:"msg-file__FileStatus",componentId:"sc-m3rns3-5"})(["color:#777;margin-top:10px;"]),go=c.d.div.withConfig({displayName:"msg-file__FileSpeed",componentId:"sc-m3rns3-6"})(["width:70%;font-size:12px;color:#777;text-align:left;margin-top:3px;"]),ho=c.d.div.withConfig({displayName:"msg-file__Upload",componentId:"sc-m3rns3-7"})(["position:absolute;z-index:10;top:26px;width:70%;padding-right:0;box-sizing:border-box;"]),fo=c.d.div.withConfig({displayName:"msg-file__UploadHolder",componentId:"sc-m3rns3-8"})(["width:100%;height:3px;background:#f4f4f4;position:relative;"]),bo=c.d.div.withConfig({displayName:"msg-file__UploadProgress",componentId:"sc-m3rns3-9"})(["width:","%;max-width:100%;height:3px;background:#4ca0ff;position:absolute;left:0;top:0;bottom:0;"],function(e){return e.progress}),vo=Object(c.d)(Da).withConfig({displayName:"msg-file__UploadCancel",componentId:"sc-m3rns3-10"})(["position:absolute;right:-18px;top:-9px;"]),yo=Object(c.d)(Da).withConfig({displayName:"msg-file__Download",componentId:"sc-m3rns3-11"})(["cursor:pointer;position:absolute;right:0;bottom:0;vertical-align:middle;& > a{text-decoration:none;font-size:12px;color:#4ca0ff;display:inline-block;vertical-align:middle;}"]);function xo(e){var t=e.id,n=e.fileName,a=e.fileSize,i=e.fileStatus,o=e.fileUrl,r=e.status,l=e.progress,c=e.speed,s=e.cancelUpload,d=e.disableDownload,u=e.handleFileDownload,e=Object($.c)()[0];return Q.a.createElement(co,null,Q.a.createElement(so,null,Q.a.createElement(Da,{width:"40px",height:"40px",type:"file-icon"})),Q.a.createElement(uo,null,Q.a.createElement(po,null,Q.a.createElement("div",{className:"name"},n),Q.a.createElement("div",{className:"size"},a)),"uploading"===r?Q.a.createElement(ho,null,Q.a.createElement(fo,null,Q.a.createElement(bo,{progress:l}),Q.a.createElement(vo,{type:"cancel",width:"19px",height:"19px",onClick:function(){return s(t)}})),Q.a.createElement(go,null,e("上传中")+" "+c)):Q.a.createElement(mo,null,i),"uploading"===r||"cancel"===r||d?null:Q.a.createElement(yo,{type:"download",width:"20px",height:"20px"},Q.a.createElement("a",{href:o,rel:"noopener noreferrer",target:"_blank",onClick:function(){return u(t)}},e("下载")))))}var wo=c.d.span.withConfig({displayName:"msg-forward__Name",componentId:"sc-jo8bzh-0"})(["color:#2ac8d1;padding:0 4px;"]);function ko(e){e=e.name;return Q.a.createElement("span",null,Q.a.createElement($.a,null,"接下来由",Q.a.createElement(wo,null,{name:e}),"为您服务"))}var _o=c.d.span.withConfig({displayName:"msg-evaluation__Assess",componentId:"sc-bhk0uy-0"})(["color:",";padding:0 4px;"],function(e){return 2===e.level?"#00ce7d":1===e.level?"#ffb652":"#ff5c5e"});function Eo(e){var t=e.level,n=e.resolved,a=e.levelText,i=e.content,o=Object($.c)()[0],e=Object(V.useMemo)(function(){return["",void 0,null].includes(n)?"-":1===n?Q.a.createElement(_o,{level:2},o("问题已解决")):Q.a.createElement(_o,{level:3},o("问题未解决"))},[n]);return Q.a.createElement("div",null,Q.a.createElement("span",null,o("你给出了"),e,Q.a.createElement(_o,{level:t},a)),i?Q.a.createElement("span",null,Q.a.createElement("br",null),i):null)}var Co=c.d.div.withConfig({displayName:"msg-system__Container",componentId:"sc-1pwbj0o-0"})(["width:100%;color:#999;font-size:12px;text-align:center;margin-bottom:20px;"]),F=function(e){return Q.a.createElement(Co,null,e.children)},Io=Q.a.memo(F),To=c.d.span.withConfig({displayName:"msg-link__Name",componentId:"sc-1a5zov3-0"})(["color:#6088e6;padding:0 4px;cursor:pointer;"]);function So(e){var t=e.handleClick,n=e.children,a=e.prevContent,e=e.afterContent;return Q.a.createElement(Io,null,void 0===a?null:a,Q.a.createElement(To,{onClick:t},n),void 0===e?null:e)}n("yt8O"),n("rGqo");var jo=["handleClick","data","children","disabled"],No=c.d.a.withConfig({displayName:"button__Anchor",componentId:"sc-1v9a63l-0"})(["width:",";height:",";line-height:",";display:inline-block;vertical-align:middle;font-size:",";border:0;outline:none;border-radius:3px;cursor:pointer;text-align:center;text-decoration:none;opacity:",";color:",";background:",";&:hover{color:",";background:",";opacity:1;}"],function(e){return e.width||"60px"},function(e){return e.height||"32px"},function(e){return e.height||"32px"},function(e){return e.fontSize||"13px"},function(e){return e.opacity||1},function(e){return e.disabled?"#fff":e.fontColor||e.theme.panel.fontColor},function(e){return e.disabled?"#aaa":e.bgColor||e.theme.panel.themeColor},function(e){return e.disabled?"#fff":e.fontHoverColor||e.fontColor||e.theme.panel.fontColor},function(e){return e.disabled?"#aaa":e.bgHoverColor||e.bgColor||e.theme.panel.themeColor});function Oo(e){var t=e.handleClick,n=e.data,a=e.children,i=e.disabled,o=me()(e,jo),e=Object(V.useCallback)(function(e){e.preventDefault(),i||t&&t(n)},[t,n,i]);return Q.a.createElement(No,ua()({},o,{disabled:i,onClick:e}),a||null)}function Mo(e){var t=e.name,o=e.multi,n=e.options,a=e.value,r=e.handleChange,e=ge()(a)?a.join(", "):a;return Q.a.createElement(zo,null,Q.a.createElement(Do,{name:t,multiple:o,value:a,onChange:function(e){if(o){for(var t=e.target.options,n=[],a=0,i=t.length;a<i;a+=1)t[a].selected&&n.push(t[a].value);r(n)}else r(e.target.value)}},o?null:Q.a.createElement("option",{disabled:!0,value:!0,selected:!0,style:{display:"none"}}),n.map(function(e){return Q.a.createElement("option",{key:e.value,value:e.value},e.label)})),Q.a.createElement(Po,null,e))}function Bo(e){function n(e){var t=(n=e.target).value,e=n.checked,n=[].concat(l);e?(c(n.concat([t])),r(n.concat([t]))):(e=n.findIndex(function(e){return e===t}),n.splice(e,1),c(n),r(n))}var a=e.name,t=e.options,i=e.multi,o=e.value,r=e.handleChange,l=(e=Object(V.useState)([]))[0],c=e[1];return i?Q.a.createElement(Ao,null,t.map(function(e,t){return Q.a.createElement("label",{key:t,className:"item"},Q.a.createElement("input",{name:a,type:"checkbox",value:e.value,onChange:n}),e.label)})):Q.a.createElement(Lo,{name:a,value:o,onChange:function(e){return r(e.target.value)}},Q.a.createElement("option",{value:""}," "),t.map(function(e){return Q.a.createElement("option",{key:e.value,value:e.value},e.label)}))}function qo(e){var t=e.value,n=e.handleChange,e=void 0===(e=e.styles)?{}:e;return Q.a.createElement(Uo,{styles:e},Q.a.createElement(Ho,null,Q.a.createElement("input",{type:"datetime-local",onChange:function(e){n(new Date(e.target.value.replace(/-/g,"/").replace("T"," ")))}})),Q.a.createElement(Wo,{styles:e},t?t.toLocaleString():""))}var zo=c.d.div.withConfig({displayName:"mobile-select__Container",componentId:"sc-6uf7qh-0"})(["width:100%;height:28px;position:relative;box-sizing:border-box;"]),Do=c.d.select.withConfig({displayName:"mobile-select__Select",componentId:"sc-6uf7qh-1"})(["opacity:0;width:100%;position:absolute;top:0;bottom:0;left:0;right:0;"]),Po=c.d.div.withConfig({displayName:"mobile-select__Mask",componentId:"sc-6uf7qh-2"})(["width:100%;height:28px;line-height:28px;border-radius:2px;padding:0 5px;box-sizing:border-box;color:#4a4a4a;background-color:#fff;box-shadow:inset 0px 1px 6px 0px rgba(0,0,0,0.1);border:1px solid rgba(199,199,199,1);"]),Ao=c.d.div.withConfig({displayName:"pc-select__CheckboxContainer",componentId:"sc-ylovj-0"})(["margin:0;.item{display:block;color:#333333;padding:5px 0;}"]),Lo=c.d.select.withConfig({displayName:"pc-select__Select",componentId:"sc-ylovj-1"})(["height:28px;width:100%;display:block;outline:none;background:#fff;box-shadow:inset 0px 1px 6px 0px rgba(0,0,0,0.1);border:1px solid rgba(199,199,199,1);"]),Fo=function(e){return ut.isMobile()?Q.a.createElement(Mo,e):Q.a.createElement(Bo,e)},Ro=n("KYPV"),Uo=c.d.div.withConfig({displayName:"mobile-picker__Container",componentId:"sc-qq62kn-0"})(["width:100%;height:",";position:relative;box-sizing:border-box;"],function(e){return e.styles.height||"28px"}),Ho=c.d.label.withConfig({displayName:"mobile-picker__Label",componentId:"sc-qq62kn-1"})(["opacity:0;position:absolute;top:0;bottom:0;left:0;right:0;"]),Wo=c.d.div.withConfig({displayName:"mobile-picker__Mask",componentId:"sc-qq62kn-2"})(["width:100%;height:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:",";border-radius:2px;padding:",";box-sizing:border-box;color:#4a4a4a;background-color:#fff;box-shadow:",";border:",";"],function(e){return e.styles.height||"28px"},function(e){return e.styles.height||"28px"},function(e){return e.styles.padding||"0 5px"},function(e){return e.styles["box-shadow"]||"inset 0px 1px 6px 0px rgba(0, 0, 0, 0.1)"},function(e){return e.styles.border||"1px solid rgba(199, 199, 199, 1)"}),H=n("K47E"),Go=n.n(H),F=n("KNo3"),Vo=n.n(F),H=(n("2Spj"),n("wd/R")),Qo=n.n(H),Yo=function(t){function e(e){e=t.call(this,e)||this;return e.updateSelectedDate=e.updateSelectedDate.bind(Go()(e)),e}Vo()(e,t);var n=e.prototype;return n.render=function(){var e=this.renderFooter(),t=this.props.viewDate,n=t.localeData(),n=[Q.a.createElement("thead",{key:"th"},[Q.a.createElement("tr",{key:"h"},[Q.a.createElement("th",{key:"p",className:"rdtPrev",onClick:this.props.subtractTime(1,"months")},Q.a.createElement("span",{},"‹")),Q.a.createElement("th",{key:"s",className:"rdtSwitch",onClick:this.props.showView("months"),colSpan:5,"data-value":this.props.viewDate.month()},n.months(t)+" "+t.year()),Q.a.createElement("th",{key:"n",className:"rdtNext",onClick:this.props.addTime(1,"months")},Q.a.createElement("span",{},"›"))]),Q.a.createElement("tr",{key:"d"},this.getDaysOfWeek(n).map(function(e,t){return Q.a.createElement("th",{key:e+t,className:"dow"},e)}))]),Q.a.createElement("tbody",{key:"tb"},this.renderDays())];return e&&n.push(e),Q.a.createElement("div",{className:"rdtDays"},Q.a.createElement("table",{},n))},n.getDaysOfWeek=function(e){var t=e._weekdaysMin,n=e.firstDayOfWeek(),a=[],i=0;return t.forEach(function(e){a[(7+i-n)%7]=e,i+=1}),a},n.renderDays=function(){var e,t,n,a=this.props.viewDate,i=this.props.selectedDate&&this.props.selectedDate.clone(),o=a.clone().subtract(1,"months"),r=a.year(),l=a.month(),c=[],s=[],d=this.props.renderDay||this.renderDay,u=this.props.isValidDate||this.alwaysValidDate;o.date(o.daysInMonth()).startOf("week");for(var p=o.clone().add(42,"d");o.isBefore(p);)t="rdtDay",n=o.clone(),o.year()===r&&o.month()<l||o.year()<r?t+=" rdtOld":(o.year()===r&&o.month()>l||o.year()>r)&&(t+=" rdtNew"),i&&o.isSame(i,"day")&&(t+=" rdtActive"),o.isSame(Qo()(),"day")&&(t+=" rdtToday"),(e=!u(n,i))&&(t+=" rdtDisabled"),t={key:o.format("M_D"),"data-value":o.date(),className:t},e||(t.onClick=this.updateSelectedDate),s.push(d(t,n,i)),7===s.length&&(c.push(Q.a.createElement("tr",{key:o.format("M_D")},s)),s=[]),o.add(1,"d");return c},n.updateSelectedDate=function(e){this.props.updateSelectedDate(e,!0)},n.renderDay=function(e,t){return Q.a.createElement("td",e,t.date())},n.renderFooter=function(){if(!this.props.timeFormat)return"";var e=this.props.selectedDate||this.props.viewDate;return Q.a.createElement("tfoot",{key:"tf"},Q.a.createElement("tr",{},Q.a.createElement("td",{onClick:this.props.showView("time"),colSpan:7,className:"rdtTimeToggle"},e.format(this.props.timeFormat))))},n.alwaysValidDate=function(){return 1},e}(Q.a.Component),F=n("d04V"),$o=n.n(F);var Ko=function(e){function t(){return e.apply(this,arguments)||this}Vo()(t,e);var n=t.prototype;return n.render=function(){return Q.a.createElement("div",{className:"rdtMonths"},[Q.a.createElement("table",{key:"a"},Q.a.createElement("thead",{},Q.a.createElement("tr",{},[Q.a.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(1,"years")},Q.a.createElement("span",{},"‹")),Q.a.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2,"data-value":this.props.viewDate.year()},this.props.viewDate.year()),Q.a.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(1,"years")},Q.a.createElement("span",{},"›"))]))),Q.a.createElement("table",{key:"months"},Q.a.createElement("tbody",{key:"b"},this.renderMonths()))])},n.renderMonths=function(){for(var e,t,n,a=this.props.selectedDate,i=this.props.viewDate.month(),o=this.props.viewDate.year(),r=[],l=0,c=[],s=(this.props.renderMonth||this.renderMonth).bind(this),d=this.props.isValidDate||this.alwaysValidDate;l<12;)e="rdtMonth",n=(t=this.props.viewDate.clone().set({year:o,month:l,date:1})).endOf("month").format("D"),(n=void 0===$o()({length:n},function(e,t){return t+1}).find(function(e){e=t.clone().set("date",e);return d(e)}))&&(e+=" rdtDisabled"),a&&l===a.month()&&o===a.year()&&(e+=" rdtActive"),e={key:l,"data-value":l,className:e},n||(e.onClick="months"===this.props.updateOn?this.updateSelectedMonth:this.props.setDate("month")),c.push(s(e,l,o,a&&a.clone())),4===c.length&&(r.push(Q.a.createElement("tr",{key:i+"_"+r.length},c)),c=[]),l+=1;return r},n.updateSelectedMonth=function(e){this.props.updateSelectedDate(e)},n.renderMonth=function(e,t){var n=this.props.viewDate,t=n.localeData().monthsShort(n.month(t)).substring(0,3);return Q.a.createElement("td",e,(t=t).charAt(0).toUpperCase()+t.slice(1))},n.alwaysValidDate=function(){return 1},t}(Q.a.Component),Jo=function(e){function t(){return e.apply(this,arguments)||this}Vo()(t,e);var n=t.prototype;return n.render=function(){var e=10*st()(this.props.viewDate.year()/10,10);return Q.a.createElement("div",{className:"rdtYears"},[Q.a.createElement("table",{key:"a"},Q.a.createElement("thead",{},Q.a.createElement("tr",{},[Q.a.createElement("th",{key:"prev",className:"rdtPrev",onClick:this.props.subtractTime(10,"years")},Q.a.createElement("span",{},"‹")),Q.a.createElement("th",{key:"year",className:"rdtSwitch",onClick:this.props.showView("years"),colSpan:2},e+"-"+(9+e)),Q.a.createElement("th",{key:"next",className:"rdtNext",onClick:this.props.addTime(10,"years")},Q.a.createElement("span",{},"›"))]))),Q.a.createElement("table",{key:"years"},Q.a.createElement("tbody",{},this.renderYears(e)))])},n.renderYears=function(e){var t,n,a,i=e,o=[],r=-1,l=[],c=this.props.renderYear||this.renderYear,s=this.props.selectedDate,d=this.props.isValidDate||this.alwaysValidDate;for(--i;r<11;)t="rdtYear",a=(n=this.props.viewDate.clone().set({year:i,month:0,date:1})).endOf("year").format("DDD"),(a=void 0===$o()({length:a},function(e,t){return t+1}).find(function(e){e=n.clone().dayOfYear(e);return d(e)}))&&(t+=" rdtDisabled"),s&&s.year()===i&&(t+=" rdtActive"),t={key:i,"data-value":i,className:t},a||(t.onClick="years"===this.props.updateOn?this.updateSelectedYear:this.props.setDate("year")),o.push(c(t,i,s&&s.clone())),4===o.length&&(l.push(Q.a.createElement("tr",{key:r},o)),o=[]),i+=1,r+=1;return l},n.updateSelectedYear=function(e){this.props.updateSelectedDate(e)},n.renderYear=function(e,t){return Q.a.createElement("td",e,t)},n.alwaysValidDate=function(){return 1},t}(Q.a.Component),Zo=function(n){function e(e){var t=n.call(this,e)||this;return t.mouseUpListener=function(e){return function(){clearTimeout(t.timer),clearInterval(t.increaseTimer),t.props.setTime(e,t.state[e])}},t.padValues={hours:1,minutes:2,seconds:2,milliseconds:3},t.state=t.calculateState(e),t}Vo()(e,n);var t=e.prototype;return t.calculateState=function(e){var t=e.selectedDate||e.viewDate,n=e.timeFormat,a=[];-1!==n.toLowerCase().indexOf("h")&&(a.push("hours"),-1!==n.indexOf("m")&&(a.push("minutes"),-1!==n.indexOf("s")&&a.push("seconds")));e=t.format("H"),n=!1;return null!==this.state&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&(n=-1!==this.props.timeFormat.indexOf(" A")?12<=e?"PM":"AM":12<=e?"pm":"am"),{hours:e,minutes:t.format("mm"),seconds:t.format("ss"),milliseconds:t.format("SSS"),daypart:n,counters:a}},t.renderCounter=function(e){if("daypart"===e)return"";var t=this.state[e];return"hours"===e&&-1!==this.props.timeFormat.toLowerCase().indexOf(" a")&&0===(t=(t-1)%12+1)&&(t=12),Q.a.createElement("div",{key:e,className:"rdtCounter"},[Q.a.createElement("span",{key:"up",className:"rdtBtn",onMouseDown:this.onStartClicking("increase",e),onMouseUp:this.mouseUpListener(e),onContextMenu:this.disableContextMenu},"▲"),Q.a.createElement("div",{key:"c",className:"rdtCount"},t),Q.a.createElement("span",{key:"do",className:"rdtBtn",onMouseDown:this.onStartClicking("decrease",e),onMouseUp:this.mouseUpListener(e),onContextMenu:this.disableContextMenu},"▼")])},t.renderDayPart=function(){return Q.a.createElement("div",{key:"dayPart",className:"rdtCounter"},[Q.a.createElement("span",{key:"up",className:"rdtBtn",onMouseDown:this.onStartClicking("toggleDayPart","hours"),onMouseUp:this.mouseUpListener("hours"),onContextMenu:this.disableContextMenu},"▲"),Q.a.createElement("div",{key:this.state.daypart,className:"rdtCount"},this.state.daypart),Q.a.createElement("span",{key:"do",className:"rdtBtn",onMouseDown:this.onStartClicking("toggleDayPart","hours"),onMouseUp:this.mouseUpListener("hours"),onContextMenu:this.disableContextMenu},"▼")])},t.render=function(){var t=this,n=[];return this.state.counters.forEach(function(e){n.length&&n.push(Q.a.createElement("div",{key:"sep"+n.length,className:"rdtCounterSeparator"},":")),n.push(t.renderCounter(e))}),!1!==this.state.daypart&&n.push(t.renderDayPart()),3===this.state.counters.length&&-1!==this.props.timeFormat.indexOf("S")&&(n.push(Q.a.createElement("div",{className:"rdtCounterSeparator",key:"sep5"},":")),n.push(Q.a.createElement("div",{className:"rdtCounter rdtMilli",key:"m"},Q.a.createElement("input",{value:this.state.milliseconds,type:"text",onChange:this.updateMilli})))),Q.a.createElement("div",{className:"rdtTime"},Q.a.createElement("table",{},[this.renderHeader(),Q.a.createElement("tbody",{key:"b"},Q.a.createElement("tr",{},Q.a.createElement("td",{},Q.a.createElement("div",{className:"rdtCounters"},n))))]))},t.componentWillMount=function(){var t=this;t.timeConstraints={hours:{min:0,max:23,step:1},minutes:{min:0,max:59,step:1},seconds:{min:0,max:59,step:1},milliseconds:{min:0,max:999,step:1}},["hours","minutes","seconds","milliseconds"].forEach(function(e){J()(t.timeConstraints[e],t.props.timeConstraints[e])}),this.setState(this.calculateState(this.props))},t.componentWillReceiveProps=function(e){this.setState(this.calculateState(e))},t.updateMilli=function(e){var t=st()(e.target.value,10);t===e.target.value&&0<=t&&t<1e3&&(this.props.setTime("milliseconds",t),this.setState({milliseconds:t}))},t.renderHeader=function(){if(!this.props.dateFormat)return null;var e=this.props.selectedDate||this.props.viewDate;return Q.a.createElement("thead",{key:"h"},Q.a.createElement("tr",{},Q.a.createElement("th",{className:"rdtSwitch",colSpan:4,onClick:this.props.showView("days")},e.format(this.props.dateFormat))))},t.onStartClicking=function(t,n){var a=this;return function(){var e={};e[n]=a[t](n),a.setState(e),a.timer=setTimeout(function(){a.increaseTimer=setInterval(function(){e[n]=a[t](n),a.setState(e)},70)},500)}},t.disableContextMenu=function(e){return e.preventDefault(),!1},t.toggleDayPart=function(e){var t=st()(this.state[e],10)+12;return t>this.timeConstraints[e].max&&(t=this.timeConstraints[e].min+(t-(this.timeConstraints[e].max+1))),this.pad(e,t)},t.increase=function(e){var t=st()(this.state[e],10)+this.timeConstraints[e].step;return t>this.timeConstraints[e].max&&(t=this.timeConstraints[e].min+(t-(this.timeConstraints[e].max+1))),this.pad(e,t)},t.decrease=function(e){var t=st()(this.state[e],10)-this.timeConstraints[e].step;return t<this.timeConstraints[e].min&&(t=this.timeConstraints[e].max+1-(this.timeConstraints[e].min-t)),this.pad(e,t)},t.pad=function(e,t){for(var n=""+t;n.length<this.padValues[e];)n="0"+n;return n},e}(Q.a.Component),Xo=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=i.call.apply(i,[this].concat(n))||this).viewComponents={days:Yo,months:Ko,years:Jo,time:Zo},e}return Vo()(e,i),e.prototype.render=function(){return Q.a.createElement(this.viewComponents[this.props.view],this.props.viewProps)},e}(Q.a.Component),er="years",tr="months",nr="days",ar="time",ir=c.d.div.withConfig({displayName:"pc-datetime__Container",componentId:"sc-16sjxpc-0"})([".rdt{font-size:12px;position:relative;}.rdtPicker{display:none;position:absolute;width:180px;padding:4px;font-size:12px;margin-top:1px;z-index:99999 !important;background:#fff;box-shadow:0 7px 10px rgba(0,0,0,0.2);border:1px solid #f9f9f9;}.rdtOpen .rdtPicker{display:block;}.rdtStatic .rdtPicker{box-shadow:none;position:static;}.rdtPicker .rdtTimeToggle{text-align:center;}.rdtPicker table{font-size:12px;width:100%;margin:0;}.rdtPicker td,.rdtPicker th{text-align:center;height:20px;}.rdtPicker td{cursor:pointer;}.rdtPicker td.rdtDay:hover,.rdtPicker td.rdtHour:hover,.rdtPicker td.rdtMinute:hover,.rdtPicker td.rdtSecond:hover,.rdtPicker .rdtTimeToggle:hover{background:#eeeeee;cursor:pointer;}.rdtPicker td.rdtOld,.rdtPicker td.rdtNew{color:#999999;}.rdtPicker td.rdtToday{position:relative;}.rdtPicker td.rdtToday:before{content:'';display:inline-block;border-left:7px solid transparent;border-bottom:7px solid #428bca;border-top-color:rgba(0,0,0,0.2);position:absolute;bottom:4px;right:4px;}.rdtPicker td.rdtActive,.rdtPicker td.rdtActive:hover{background-color:#428bca;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);}.rdtPicker td.rdtActive.rdtToday:before{border-bottom-color:#fff;}.rdtPicker td.rdtDisabled,.rdtPicker td.rdtDisabled:hover{background:none;color:#999999;cursor:not-allowed;}.rdtPicker td span.rdtOld{color:#999999;}.rdtPicker td span.rdtDisabled,.rdtPicker td span.rdtDisabled:hover{background:none;color:#999999;cursor:not-allowed;}.rdtPicker th{border-bottom:1px solid #f9f9f9;}.rdtPicker .dow{width:14.2857%;border-bottom:none;cursor:default;}.rdtPicker th.rdtSwitch{width:100px;}.rdtPicker th.rdtNext,.rdtPicker th.rdtPrev{font-size:21px;vertical-align:top;}.rdtPrev span,.rdtNext span{display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.rdtPicker th.rdtDisabled,.rdtPicker th.rdtDisabled:hover{background:none;color:#999999;cursor:not-allowed;}.rdtPicker thead tr:first-child th{cursor:pointer;}.rdtPicker thead tr:first-child th:hover{background:#eeeeee;}.rdtPicker tfoot{border-top:1px solid #f9f9f9;}.rdtPicker button{border:none;background:none;cursor:pointer;}.rdtPicker button:hover{background-color:#eee;}.rdtPicker thead button{width:100%;height:100%;}td.rdtMonth,td.rdtYear{height:50px;width:25%;cursor:pointer;}td.rdtMonth:hover,td.rdtYear:hover{background:#eee;}.rdtCounters{display:inline-block;}.rdtCounters > div{float:left;}.rdtCounter{height:100px;}.rdtCounter{width:40px;}.rdtCounterSeparator{line-height:100px;}.rdtCounter .rdtBtn{height:40%;line-height:40px;cursor:pointer;display:block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.rdtCounter .rdtBtn:hover{background:#eee;}.rdtCounter .rdtCount{height:20%;font-size:1.2em;}.rdtMilli{vertical-align:middle;padding-left:8px;width:48px;}.rdtMilli input{width:100%;font-size:1.2em;margin-top:37px;}.rdtTime td{cursor:default;}"]),or=function(a){function e(e){var t=a.call(this,e)||this;t.displayName="DateTime",t.allowedSetTime=["hours","minutes","seconds","milliseconds"],t.componentProps={fromProps:["value","isValidDate","renderDay","renderMonth","renderYear","timeConstraints"],fromState:["viewDate","selectedDate","updateOn"],fromThis:["setDate","setTime","showView","addTime","subtractTime","updateSelectedDate","localMoment","handleClickOutside"]},t.checkTZ(e);var n=t.getStateFromProps(e);return void 0===n.open&&(n.open=!e.input),n.currentView=e.dateFormat?e.viewMode||n.updateOn||nr:ar,t.state=n,t.openCalendar=t.openCalendar.bind(Go()(t)),t.onInputChange=t.onInputChange.bind(Go()(t)),t.updateSelectedDate=t.updateSelectedDate.bind(Go()(t)),t.showView=t.showView.bind(Go()(t)),t.addTime=t.addTime.bind(Go()(t)),t.subtractTime=t.subtractTime.bind(Go()(t)),t.setDate=t.setDate.bind(Go()(t)),t.setTime=t.setTime.bind(Go()(t)),t.localMoment=t.localMoment.bind(Go()(t)),t.handleClickOutside=t.handleClickOutside.bind(Go()(t)),t.handleGlobalClick=t.handleGlobalClick.bind(Go()(t)),t.frameDoc=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document,t}Vo()(e,a);var t=e.prototype;return t.componentDidMount=function(){this.ref=Q.a.createRef(null),this.frameDoc.addEventListener("click",this.handleGlobalClick,!0)},t.componentWillUnmount=function(){this.frameDoc.removeEventListener("click",this.handleGlobalClick,!0)},t.handleGlobalClick=function(e){this.ref.current&&!this.ref.current.contains(e.target)&&this.handleClickOutside()},t.parseDate=function(e,t){var n;return e&&"string"==typeof e?n=this.localMoment(e,t.datetime):e&&(n=this.localMoment(e)),n=n&&!n.isValid()?null:n},t.getStateFromProps=function(e){var t=this.getFormats(e),n=e.value||e.defaultValue,a=this.parseDate(n,t),i=this.parseDate(e.viewDate,t);i=(a?a.clone():i?i.clone():this.localMoment()).startOf("month");var o=this.getUpdateOn(t),n=a?a.format(t.datetime):(!n.isValid||n.isValid())&&n||"";return{updateOn:o,inputFormat:t.datetime,viewDate:i,selectedDate:a,inputValue:n,open:e.open}},t.getUpdateOn=function(e){return e.date.match(/[lLD]/)?nr:-1!==e.date.indexOf("M")?tr:-1!==e.date.indexOf("Y")?er:nr},t.getFormats=function(e){var t={date:e.dateFormat||"",time:e.timeFormat||""},e=this.localMoment(e.date,null,e).localeData();return!0===t.date?t.date=e.longDateFormat("L"):this.getUpdateOn(t)!==nr&&(t.time=""),!0===t.time&&(t.time=e.longDateFormat("LT")),t.datetime=t.date&&t.time?t.date+" "+t.time:t.date||t.time,t},t.componentWillReceiveProps=function(e){var t,n=this.getFormats(e),a={};void 0===(a=e.value!==this.props.value||n.datetime!==this.getFormats(this.props).datetime?this.getStateFromProps(e):a).open&&(void 0!==e.open?a.open=e.open:this.props.closeOnSelect&&this.state.currentView!==ar?a.open=!1:a.open=this.state.open),e.viewMode!==this.props.viewMode&&(a.currentView=e.viewMode),e.locale!==this.props.locale&&(this.state.viewDate&&(t=this.state.viewDate.clone().locale(e.locale),a.viewDate=t),this.state.selectedDate&&(t=this.state.selectedDate.clone().locale(e.locale),a.selectedDate=t,a.inputValue=t.format(n.datetime))),e.utc===this.props.utc&&e.displayTimeZone===this.props.displayTimeZone||(e.utc?(this.state.viewDate&&(a.viewDate=this.state.viewDate.clone().utc()),this.state.selectedDate&&(a.selectedDate=this.state.selectedDate.clone().utc(),a.inputValue=a.selectedDate.format(n.datetime))):e.displayTimeZone?(this.state.viewDate&&(a.viewDate=this.state.viewDate.clone().tz(e.displayTimeZone)),this.state.selectedDate&&(a.selectedDate=this.state.selectedDate.clone().tz(e.displayTimeZone),a.inputValue=a.selectedDate.tz(e.displayTimeZone).format(n.datetime))):(this.state.viewDate&&(a.viewDate=this.state.viewDate.clone().local()),this.state.selectedDate&&(a.selectedDate=this.state.selectedDate.clone().local(),a.inputValue=a.selectedDate.format(n.datetime)))),e.viewDate!==this.props.viewDate&&(a.viewDate=Qo()(e.viewDate)),this.checkTZ(e),this.setState(a)},t.onInputChange=function(e){var t=this,e=null===e.target?e:e.target.value,n=this.localMoment(e,this.state.inputFormat),e={inputValue:e};return n.isValid()&&!this.props.value?(e.selectedDate=n,e.viewDate=n.clone().startOf("month")):e.selectedDate=null,this.setState(e,function(){return t.props.onChange(n.isValid()?n:t.state.inputValue)})},t.onInputKey=function(e){9===e.which&&this.props.closeOnTab&&this.closeCalendar()},t.showView=function(e){var t=this;return function(){t.state.currentView!==e&&t.props.onViewModeChange(e),t.setState({currentView:e})}},t.setDate=function(t){var n=this,a={month:nr,year:tr};return function(e){n.setState({viewDate:n.state.viewDate.clone()[t](st()(e.target.getAttribute("data-value"),10)).startOf(t),currentView:a[t]}),n.props.onViewModeChange(a[t])}},t.subtractTime=function(e,t,n){var a=this;return function(){a.props.onNavigateBack(e,t),a.updateTime("subtract",e,t,n)}},t.addTime=function(e,t,n){var a=this;return function(){a.props.onNavigateForward(e,t),a.updateTime("add",e,t,n)}},t.updateTime=function(e,t,n,a){var i={},a=a?"selectedDate":"viewDate";i[a]=this.state[a].clone()[e](t,n),this.setState(i)},t.setTime=function(e,t){var n,a=this.allowedSetTime.indexOf(e)+1,i=this.state,o=(i.selectedDate||i.viewDate).clone();for(o[e](t);a<this.allowedSetTime.length;a+=1)o[n=this.allowedSetTime[a]](o[n]());this.props.value||this.setState({selectedDate:o,inputValue:o.format(i.inputFormat)}),this.props.onChange(o)},t.updateSelectedDate=function(e,t){var n,a=e.currentTarget,i=0,o=this.state,r=o.viewDate,e=o.inputFormat,o=this.state.selectedDate||r;-1!==a.className.indexOf("rdtDay")?(-1!==a.className.indexOf("rdtNew")?i=1:-1!==a.className.indexOf("rdtOld")&&(i=-1),n=r.clone().month(r.month()+i).date(st()(a.getAttribute("data-value"),10))):-1!==a.className.indexOf("rdtMonth")?n=r.clone().month(st()(a.getAttribute("data-value"),10)).date(o.date()):-1!==a.className.indexOf("rdtYear")&&(n=r.clone().month(o.month()).date(o.date()).year(st()(a.getAttribute("data-value"),10))),n.hours(o.hours()).minutes(o.minutes()).seconds(o.seconds()).milliseconds(o.milliseconds()),this.props.value?this.props.closeOnSelect&&t&&this.closeCalendar():((t=!(this.props.closeOnSelect&&t))||this.props.onBlur(n),this.setState({selectedDate:n,viewDate:n.clone().startOf("month"),inputValue:n.format(e),open:t})),this.props.onChange(n)},t.openCalendar=function(e){var t=this;this.state.open||this.setState({open:!0},function(){t.props.onFocus(e)})},t.closeCalendar=function(){var e=this;this.setState({open:!1},function(){e.props.onBlur(e.state.selectedDate||e.state.inputValue)})},t.handleClickOutside=function(){var e=this;this.props.input&&this.state.open&&void 0===this.props.open&&!this.props.disableCloseOnClickOutside&&this.setState({open:!1},function(){e.props.onBlur(e.state.selectedDate||e.state.inputValue)})},t.localMoment=function(e,t,n){var a=n||this.props,n=null,n=a.utc?Qo.a.utc(e,t,a.strictParsing):a.displayTimeZone?Qo.a.tz(e,t,a.displayTimeZone):Qo()(e,t,a.strictParsing);return a.locale&&n.locale(a.locale),n},t.checkTZ=function(e){var t=console;!e.displayTimeZone||this.tzWarning||Qo.a.tz||(this.tzWarning=!0,t&&t.error('react-datetime: displayTimeZone prop with value "'+e.displayTimeZone+'" is used but moment.js timezone is not loaded.'))},t.getComponentProps=function(){var t=this,e=this.getFormats(this.props),n={dateFormat:e.date,timeFormat:e.time};return this.componentProps.fromProps.forEach(function(e){n[e]=t.props[e]}),this.componentProps.fromState.forEach(function(e){n[e]=t.state[e]}),this.componentProps.fromThis.forEach(function(e){n[e]=t[e]}),n},t.overrideEvent=function(n,a){var i;return this.overridenEvents||(this.overridenEvents={}),this.overridenEvents[n]||((i=this).overridenEvents[n]=function(e){var t;!1!==(t=i.props.inputProps&&i.props.inputProps[n]?i.props.inputProps[n](e):t)&&a(e)}),this.overridenEvents[n]},t.render=function(){var e,t="rdt"+(this.props.className?ge()(this.props.className)?" "+this.props.className.join(" "):" "+this.props.className:""),n=[];return this.props.input?(e=J()({type:"text",className:"form-control",value:this.state.inputValue},this.props.inputProps,{onClick:this.overrideEvent("onClick",this.openCalendar),onFocus:this.overrideEvent("onFocus",this.openCalendar),onChange:this.overrideEvent("onChange",this.onInputChange),onKeyDown:this.overrideEvent("onKeyDown",this.onInputKey)}),n=this.props.renderInput?[Q.a.createElement("div",{key:"i"},this.props.renderInput(e,this.openCalendar,this.closeCalendar))]:[Q.a.createElement("input",J()({key:"i"},e))]):t+=" rdtStatic",(this.props.open||void 0===this.props.open&&this.state.open)&&(t+=" rdtOpen"),Q.a.createElement(ir,{ref:this.ref},Q.a.createElement("div",{className:t},n.concat(Q.a.createElement("div",{key:"dt",className:"rdtPicker"},Q.a.createElement(Xo,{view:this.state.currentView,viewProps:this.getComponentProps()})))))},e}(Q.a.Component);or.defaultProps={className:"",defaultValue:"",inputProps:{},input:!0,onFocus:function(){},onBlur:function(){},onChange:function(){},onViewModeChange:function(){},onNavigateBack:function(){},onNavigateForward:function(){},timeFormat:!0,timeConstraints:{},dateFormat:!0,strictParsing:!0,closeOnSelect:!1,closeOnTab:!0,utc:!1},or.moment=Qo.a;function rr(e){var t=ee("get","_MEIQIA_LANGUAGE")||"zh-cn",n=e.handleChange,e=e.placeholder;return Q.a.createElement("div",null,Q.a.createElement(or,{locale:lr[t],onChange:function(e){n(new Date(e))},inputProps:{readOnly:"readonly",placeholder:void 0===e?"":e}}))}var lr={cn:"zh-CN",tw:"zh-TW",en:"en",indonesia:"indonesian",malaysia:"malay"},cr=function(e){return ut.isMobile()?Q.a.createElement(qo,e):Q.a.createElement(rr,e)};function sr(e){if(e&&0<e.indexOf("T")){var t=e.split("T")[0].split("-"),e=e.split("T")[1].split(":"),e=new Date(+t[0],+t[1],+t[2],+e[0],+e[1],+e[2]);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return new Date}function dr(e){return e<10?"0"+e:e}function ur(e){var t=Bt()(),t=new Date(e).getTime()-t;return!(!Kn()(t)||t<0)&&(3600<=(t/=1e3)?st()(Math.round(t/3600),10)+Y.a.t("小时"):60<=t?st()(t/60,10)+Y.a.t("分钟"):t+Y.a.t("秒"))}function pr(t,e,n,a,i,o){function r(t){return function(e){i(t,e)}}void 0===o&&(o=[]);var l=null,c="";switch(t.type){case"text":case"string":c=Y.a.t("请输入"),l=Q.a.createElement("input",{type:"text",focus:"true",name:t.name,onChange:a});break;case"number":c=Y.a.t("请输入"),l=Q.a.createElement("input",{type:"number",focus:"true",name:t.name,onChange:a});break;case"radio":case"check":case"checkbox":var s="check"===t.type||"checkbox"===t.type,d=t.metainfo.map(function(e){return"object"==typeof e?{label:e.name,value:e.value}:{label:e,value:e}}),c=Y.a.t("请选择"),l=Q.a.createElement(Fo,{name:t.name,multi:s,options:d,value:e[t.name],handleChange:r(t.name)});break;case"date":case"datetime":c=Y.a.t("请选择"),l=Q.a.createElement(cr,{name:t.name,value:e[t.name],handleChange:r(t.name)})}return o=o.find(function(e){return e.name===t.name}),Q.a.createElement(Q.a.Fragment,{key:t.id},Q.a.createElement("label",null,c+" ",Y.a.t(t.displayName)||(null==o?void 0:o.display_name)||t.name),l,n[t.name]?Q.a.createElement("p",{className:"error-field"},n[t.name]):null)}function mr(e){var t=e.themeColor,n=e.content,a=e.handleImgOnload,e=function(e){switch(e){case"desktop.standard":case"desktop.standard.full":case"desktop.custom":case"desktop.iframe":return 240;case"desktop.mini":case"desktop.edge":return 150;default:return 200}}(e.windowType);return Q.a.createElement(_r,{themeColor:t,cardSize:e},Q.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n[0].body.target_url},Q.a.createElement("img",{alt:"",src:n[0].body.pic_url,onLoad:a})))}function gr(e){var t=e.content,n=e.themeColor,a=e.windowType,i=(l=t[0].body).pic_url,o=l.product_url,r=l.title,e=l.description,l=void 0===(l=l.sales_count)?-1:l,t=t[0].size,a=(a=a,"small"!==(t=void 0===t?"small":t)||!/(mini|edge)/.test(a)),l=Q.a.createElement(Ir,{themeColor:n},Q.a.createElement("div",{className:"title",title:r},r),a?Q.a.createElement("div",{className:"desc",title:e},e):null,Q.a.createElement("div",{className:"option"},0<=l?"销量: "+l:null,Q.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"查看详情"))),o=Q.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o},Q.a.createElement("div",{className:"pic"}));return"small"===t?Q.a.createElement(Cr,{url:i,desc:a},o,l):Q.a.createElement(Er,{url:i},o,l)}function hr(e){var t=e.msgId,n=e.content,a=e.themeColor,i=e.fontColor,o=e.sendSmartGuideOption,e=ut.isMobile(),r={themeColor:a,fontColor:i},l=Object(V.useCallback)(Tr(function(e){return o({msgId:t,content:e.content,next_node_id:e.next})},5e3),[]);return Q.a.createElement(Sr,{mobile:e},n.map(function(e,t){return Q.a.createElement(jr,ua()({},r,{key:t,onClick:function(){return l(e)}}),e.content)}))}function fr(e,t,n){var a=Ge.dispatch;a(_e(e,{_evaluateStatus:t})),n&&n.length&&(a(xe(n)),an())}function br(t){var e=Ge.getState(),n=Ge.dispatch,a=e.get("config"),i=e.get("message"),o=i.get("queue"),r=o.findIndex(function(e){return e.id===t});(e=o[r]._cancelToken)&&e("cancel"),n(_e(t,{_fileStatus:"cancel"})),P({ent_id:a.get("entId"),track_id:a.get("trackId"),browser_id:a.get("browserId"),conversation_id:i.get("convId")||void 0,type:o[r].extra.type,size:o[r].extra.size,filename:o[r].extra.filename})}function vr(e){var t=e.config,n=e.extra,a=e.children,i="file"===t.content_type&&["width: calc(100% - 30px);","max-width: calc(100% - 30px);"],o=t.id,r=null,l=Object(V.useCallback)(function(){Hr(o)},[o]);switch(t.from_type){case"bot":case"agent":case"client":r=!1!==t._useWrap?Q.a.createElement(Wr,ua()({styles:i},n,{handleMsgClick:l}),a):a;break;case"redirect":case"evaluation":case"blacklist":r=Q.a.createElement(Io,null,a);break;default:r=a}return r}var yr=function(e){return(e=!e.getUTCFullYear?new Date(e):e).getUTCFullYear()+"-"+dr(e.getUTCMonth()+1)+"-"+dr(e.getUTCDate())+"T"+dr(e.getUTCHours())+":"+dr(e.getUTCMinutes())+":"+dr(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e6).toFixed(6).slice(2)},xr=c.d.div.withConfig({displayName:"client-card__Wrapper",componentId:"sc-1kln586-0"})(["max-width:280px;box-sizing:border-box;background:#fff;padding:10px;box-shadow:0px 2px 9px 0px rgba(0,0,0,0.21);border-top:solid 2px ",";"],function(e){return e.themeColor}),wr=c.d.div.withConfig({displayName:"client-card__Form",componentId:"sc-1kln586-1"})(["color:rgb(179,179,179);font-size:14px;text-align:left;margin-bottom:10px;.field{padding:0 0 10px;}label{display:inline-block;padding:10px 0 5px;}input[type='text'],input[type='number']{width:100%;height:28px;border-radius:2px;padding:0 5px;color:#4a4a4a;background-color:#fff;box-shadow:inset 0px 1px 6px 0px rgba(0,0,0,0.1);border:1px solid rgba(199,199,199,1);}.error-field{color:#ff7474;font-size:12px;padding:6px 0;}"]),kr=Object(Ro.b)({mapPropsToValues:function(){return{}},validate:function(t){var n={},a=!1;return K()(t).forEach(function(e){void 0!==t[e]&&(a=!0),"tel"===e&&(/^[\d-]{10,18}$/.test(t[e].trim())||(n[e]=Y.a.t("请正确填写手机或带区号的座机号码"))),"qq"===e&&(/^[1-9][\d]{4,10}$/.test(t[e].trim())||(n[e]=Y.a.t("请正确填写QQ")))}),a||(n.global=Y.a.t("请至少填写一项")),n},handleSubmit:function(e,t){var n=t.props,a=n.id,i=n.cardType,o=n.data,n=n.handleCardSubmit,r=t.setSubmitting,l=J()({},e),c={};o.forEach(function(e){c[e.name]=e.type}),K()(l).forEach(function(e){l[e]?"date"!==c[e]&&"datetime"!==c[e]||(l[e]=yr(l[e])):delete l[e]});o=o[0].node_id?{node_id:o[0].node_id}:{};n(a,i,l,o).finally(function(){r(!1)})}})(function(e){var t=e.themeColor,n=e.fontColor,a=e.data,i=e.values,o=e.errors,r=e.handleChange,l=e.isSubmitting,c=e.handleSubmit,s=e.setFieldValue,d=e.attrConfig,e=Object($.c)()[0];return Q.a.createElement(xr,{themeColor:t},Q.a.createElement(wr,null,a.map(function(e){return pr(e,i,o,r,s,d)}),o.global?Q.a.createElement("p",{className:"error-field"},o.global):null),Q.a.createElement("div",null,Q.a.createElement(Oo,{bgColor:t,fontColor:n,disabled:l,handleClick:c},e("发送"))))}),_r=c.d.div.withConfig({displayName:"photo-card__Wrapper",componentId:"sc-3bw2yv-0"})(["box-sizing:border-box;background:#fff;padding:10px 10px 10px 10px;box-shadow:0px 2px 9px 0px rgba(0,0,0,0.21);border-top:solid 2px ",";img{width:","px;max-width:","px;}"],function(e){return e.themeColor},function(e){return e.cardSize||200},function(e){return e.cardSize||200}),Er=c.d.div.withConfig({displayName:"prod-card__LargeCard",componentId:"sc-10ljgzs-0"})(["width:220px;height:312px;padding:200px 8px 8px 8px;box-sizing:border-box;position:relative;text-align:left;.title{-webkit-line-clamp:1;}.desc{-webkit-line-clamp:2;}.pic{width:204px;height:184px;position:absolute;left:8px;top:8px;background:url(",") no-repeat center/cover border-box border-box;}"],function(e){return e.url}),Cr=c.d.div.withConfig({displayName:"prod-card__SmallCard",componentId:"sc-10ljgzs-1"})(["min-width:220px;max-width:280px;width:100%;height:88px;padding:8px 8px 8px 88px;box-sizing:border-box;position:relative;text-align:left;.title{-webkit-line-clamp:",";}.desc{-webkit-line-clamp:1;}.pic{width:72px;height:72px;position:absolute;left:8px;top:8px;background:url(",") no-repeat center/cover border-box border-box;}"],function(e){return e.desc?1:2},function(e){return e.url}),Ir=c.d.div.withConfig({displayName:"prod-card__Content",componentId:"sc-10ljgzs-2"})(["position:relative;height:100%;.title{font-size:14px;color:#343b66;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;/*! autoprefixer:off */ -webkit-box-orient:vertical;}.desc{margin-top:5px;font-size:12px;color:#6f7592;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;/*! autoprefixer:off */ -webkit-box-orient:vertical;}.option{color:#6f7592;position:absolute;width:100%;bottom:0;}a{float:right;color:",";text-decoration:none;}"],function(e){return e.themeColor}),Tr=function(i,o){void 0===o&&(o=500);var r=0;return function(){var e=Bt()();if(o<e-r){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];i.apply(void 0,n),r=e}}},Sr=c.d.div.withConfig({displayName:"msg-smart-guide__Container",componentId:"sc-160chqq-0"})(["margin-left:",";padding-right:50px;margin-top:0px;"],function(e){return e.mobile?"46px":"0"}),jr=c.d.div.withConfig({displayName:"msg-smart-guide__OptionItem",componentId:"sc-160chqq-1"})(["display:inline-block;word-break:break-all;margin-right:10px;margin-bottom:8px;line-height:20px;cursor:pointer;background:",";color:",";padding:6px 12px;border-radius:12px;box-shadow:0 2px 20px rgba(0,0,0,0.17);"],function(e){return e.themeColor},function(e){return e.fontColor}),H=function(e){var t=e.id,n=e.avatar,a=e.arrow,i=e.name,o=e.content,r=e.themeColor,l=e.fontColor,c=e.msgType,s=e.windowType,d=e.handleCardSubmit,u=e.handleMenuClick,p=e.scrollToBottom,m=e.sendSmartGuideOption,g=e.attrConfig,h={},f={themeColor:r,fontColor:l,windowType:s},b=Object(V.useCallback)(function(){"normal"!==c&&"scheduler"!==c||p()},[p,c]);switch("mobile"===ut.isMobile()?(h.avatar=n,h.arrow=a):h.name=i,o[0].type){case"option":return Q.a.createElement(hr,ua()({},f,{content:o[0].option,sendSmartGuideOption:m}));case"client_card":return Q.a.createElement(kr,ua()({},f,h,{id:t,handleCardSubmit:d,data:o[0].body,attrConfig:g}));case"photo_card":return Q.a.createElement(mr,ua()({},f,h,{id:t,content:o,handleImgOnload:b}));case"product_card":return Q.a.createElement(gr,ua()({},f,h,{id:t,content:o,handleImgOnload:b}));default:var v=o;return"list"===o[0].type&&(v=o[0].body),v=o.map(function(e){switch(e.type){case"text":case"txt":case"rich_text":return e.body;case"choices":return{type:"menu",items:e.body.choices.map(function(e){return{value:e,text:e}})};default:return""}}),Q.a.createElement(zi,{content:v,handleMenuClick:u})}},Nr=Q.a.memo(H),Or=c.d.div.withConfig({displayName:"user-options__Container",componentId:"sc-oy6z4k-0"})(["margin-left:",";margin-top:-10px;padding-right:50px;"],function(e){return e.mobile?"46px":"0"}),Mr=c.d.div.withConfig({displayName:"user-options__OptionItem",componentId:"sc-oy6z4k-1"})(["display:inline-block;word-break:break-all;margin-right:10px;margin-bottom:8px;line-height:20px;cursor:pointer;background:",";color:",";padding:6px 12px;border-radius:12px;box-shadow:0 2px 20px rgba(0,0,0,0.17);"],function(e){return e.themeColor},function(e){return e.fontColor}),Br=function(e){var n=e.msgId,t=e.content,a=e.handleUserOption,i=e.themeColor,o=e.fontColor,e=ut.isMobile(),r={themeColor:i,fontColor:o};return Q.a.createElement(Or,{mobile:e},t.map(function(e,t){return Q.a.createElement(Mr,ua()({},r,{key:t,onClick:function(){return a(n,e.content,e.next)}}),e.content)}))},qr=function(n,e,a,t){var i=Ge.getState(),o=i.get("config"),r=i.get("message"),l=o.get("entId"),i=o.get("trackId"),o=r.get("convId"),r=r.get("agent");fr(n,"submit"),r=r.id,X({url:"/knowledge/questions/"+e+"/evaluate",method:"post",headers:{"content-type":"application/json"},data:{ent_id:l,track_id:i,conv_id:o,useful:a,robot_id:r,client_question_text:t}}).then(function(e){var t=[];e.data&&e.data.message&&t.push({id:Math.random(),from_type:"bot",agent:{nickname:""},content_type:"text",content:e.data.message}),0===a&&t.push({id:+Bt()(),from_type:"redirect_btn"}),fr(n,"finish",t)},function(e){var t={};try{t=e.response.data||{}}catch(e){}setTimeout(function(){Jn(t.message||Y.a.t("提交失败，请稍候再试"),2e3)},1e3),fr(n,"waiting")})},zr=function(e,t){if(!e)return"0 B";var n=t+1||2,t=Math.floor(Math.log(e)/Math.log(1e3));return yt()((e/Math.pow(1e3,t)).toFixed(n))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},Dr=function(e,t){var n=Ge.dispatch;t?n(we(t,e)):(n(xe(e)),an())},Pr=function(e){return/^video/.test(e)?"video":e},F=n("5ytX"),Ar=n.n(F),H=n("lgCi"),Lr=n.n(H),Fr=function(e,t){var n=Ge.dispatch;t?n(we(t,e)):(n(xe(e)),an()),ln(e.id)},Rr=function(e,t,n,a,i){return Z({url:"/upload?ent_id="+e,method:"post",data:{msg:i,entId:e,trackId:t,convId:n,agentToken:a}},"uploadImage")},Ur=function(e){var a=e,t=Ge.getState(),i=Ge.dispatch,o=t.get("message"),n=o.get("convId"),r=o.get("agentToken"),e=t.get("config"),t=e.get("entId"),e=e.get("trackId");Fr(a),Rr(t,e,n,r,a).then(function(e){var t={},n=[].concat(o.get("fakeMsg"));e.data&&e.data.success?(a.media_url=e.data.photo_url,a.content=e.data.photo_key,delete a.status,delete a.file,o.get("schedulerAfterClientSendMsg")&&!o.get("scheduler")?(wn(),n.push(a),t.fakeMsg=n,t.schedulerMsg=!0,t.schedulerAfterClientSendMsg=!1,i(ye(t))):o.get("chatHasEnd")?(wn(),n.push(a),t.fakeMsg=n,t.schedulerMsg=!0,i(ye(t))):(Fr(a,a.id),Kt(a))):(a.media_url=Lr.a,a.status="error",Fr(a,a.id))},function(){a.media_url=Lr.a,a.status="error",Fr(a,a.id)})},Hr=function(t){var e=Ge.getState(),n=Ge.dispatch,a=e.getIn(["message","queue"]).find(function(e){return e.id===t});a&&"client"===a.from_type&&"error"===a.status&&(e=J()({},a,{id:Math.random()}),"text"===a.content_type?(n(xe(e)),Kt(e)):"photo"===a.content_type&&(e.status="sending",e.media_url=Ar.a,Ur(e)))},Wr=Object(c.d)(ki).withConfig({displayName:"msg-wrapper__Base",componentId:"sc-19mnsx8-0"})(["",""],function(e){return e.styles?e.styles.join(""):""}),F=n("zl59"),Gr=n.n(F),Vr=function(e){var t=window.parent.document,n=t.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";var a=window.parent.getSelection(),i=!1;0<a.rangeCount&&(i=a.getRangeAt(0)),t.body.appendChild(n),n.select();e=!1;try{e=t.execCommand("copy")}catch(e){throw e}return t.body.removeChild(n),i&&(a.removeAllRanges(),a.addRange(i)),e},Qr=ut.isMobile()?"mobile":"desktop",Yr=c.d.div.withConfig({displayName:"msg-window__BtnsWrap",componentId:"sc-1y5k7uj-0"})(["display:flex;flex-wrap:wrap;padding:0 10px;"]),$r=c.d.div.withConfig({displayName:"msg-window__OperatorBtn",componentId:"sc-1y5k7uj-1"})(["display:flex;align-items:center;margin-right:8px;text-align:center;padding:4px 12px;border-radius:14px;background-color:#fff;border:1px solid #cdcfd9;cursor:pointer;color:#6f7592;margin:2px 2px;font-size:12px;a{color:#6f7592;}:hover{border-color:#1880ff;color:#1880ff;a{color:#1880ff;}}"]),Kr=c.d.div.withConfig({displayName:"msg-window__Container",componentId:"sc-1y5k7uj-2"})(["width:100%;height:100%;padding:14px;box-sizing:border-box;overflow-y:auto;position:relative;",""],function(e){return e.history?"padding-top: 40px;":""}),Jr=c.d.div.withConfig({displayName:"msg-window__BlackTip",componentId:"sc-1y5k7uj-3"})(["flex:1 1 auto;background:#fff5e6;flex-direction:row;display:flex;box-shadow:0 2px 4px 0 rgba(0,0,0,0.1);z-index:1;"]),Zr=c.d.div.withConfig({displayName:"msg-window__MsgContainer",componentId:"sc-1y5k7uj-4"})(["width:100%;position:relative;"]),Xr=c.d.div.withConfig({displayName:"msg-window__HistoryBtn",componentId:"sc-1y5k7uj-5"})(["position:absolute;top:10px;left:0;right:0;width:100%;height:20px;line-height:20px;text-align:center;font-size:12px;color:#777;cursor:pointer;"]),el=c.d.div.withConfig({displayName:"msg-window__Sensitive",componentId:"sc-1y5k7uj-6"})(["position:absolute;text-align:right;font-size:12px;color:#b2b2b2;right:0;bottom:-10px;"]),tl=c.d.div.withConfig({displayName:"msg-window__BlackTipLeft",componentId:"sc-1y5k7uj-7"})(["text-align:center;padding-top:8px;width:30px;"]),nl=c.d.div.withConfig({displayName:"msg-window__BlackTipRight",componentId:"sc-1y5k7uj-8"})(["flex:1 1 auto;padding:8px 8px 8px 0;"]),al=c.d.div.withConfig({displayName:"msg-window__ShowSuccess",componentId:"sc-1y5k7uj-9"})(["height:38px;line-height:38px;padding-left:12px;font-family:PingFangSC-Regular;color:#6f7592 100%;font-size:14px;background:#ffffff;box-shadow:0px 2px 4px 0px rgba(0,0,0,0.1);display:flex;align-items:center;img{width:18px;height:18px;margin-right:6px;}"]),il=c.d.img.withConfig({displayName:"msg-window__InfoImgWrap",componentId:"sc-1y5k7uj-10"})(["src:",";"],function(e){return e.src});function ol(e,t){var n,a=null,i=t.styles,o=t.windowType,r=t.handleRedirect,l=t.handleRedirectTicket,c=t.highlightMsg,s=t.handleHighLight,d=t.robotEvalSwitch,u=(void 0===c?{}:c)[e.id],p={id:e.id,windowType:o,direction:"client"===e.from_type?"right":"left",status:e.status,time:(c=e.created_on,o=sr(c),(c=(c=o.getHours())<10?"0"+c:c)+":"+((o.getMinutes()<10?"0":"")+o.getMinutes())),customExtra:e.customExtra,highlightFlag:u,handleHighLight:s,operator_msg:null!=(n=null==e||null==(n=e.extra)?void 0:n.operator_msg)?n:[]};switch("evaluate"===e.sub_type&&"normal"===e._renderType&&(p.evaluateStatus=d?e._evaluateStatus||"waiting":"",p.questionId=e.question_id,p.question=e.extra.client_msg,p.handleFeedback=qr),e.from_type){case"bot":"mobile"===Qr?(p.avatar=e.agent.avatar,p.arrow=!0):p.name=e.agent.nickname,null!=e&&null!=(m=e.extra)&&m.display_agent&&(p.name=e.extra.display_agent.nickname),a=function(e,t,n){var a=null,i=n.styles,o=n.handleImgOnload,r=n.handleImagePreview,l=n.scrollToBottom,c=n.handleMenuClick,s=n.handleCardSubmit,d=n.handleUserOption,u=n.sendSmartGuideOption,p=n.attrConfig;switch(e.content_type){case"welcome":a=Q.a.createElement(ii,ua()({},t,{msg:Gi(e.content)}));break;case"text":case"bot":e.content_robot&&e.content_robot.length?(m=(e.extra||{}).client_msg,a=Q.a.createElement(Ki,ua()({},t,{clientMessage:m,handleMenuClick:c,content:e.content_robot,handleImagePreview:r}))):e.content&&(a=Q.a.createElement(ii,ua()({},t,{msg:Gi(e.content)})));break;case"rich_text":a=Q.a.createElement(zi,ua()({},t,{content:(null==e||null==(g=e.extra)?void 0:g.content)||"",handleImagePreview:r}));break;case"photo":J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Xi,ua()({},t,{url:e.media_url,handleOnload:o,handleImagePreview:r}));break;case"video":J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(lo,ua()({},t,{url:e.media_url,thumbUrl:e.extra&&e.extra.thumb_url}));break;case"hybrid":var m={themeColor:i.panel.themeColor,fontColor:i.panel.fontColor},g={handleCardSubmit:s,scrollToBottom:l,msgType:e._renderType};["client_card","photo_card"].includes(e.content[0].type)&&J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Nr,ua()({attrConfig:p},t,m,g,{content:e.content,sendSmartGuideOption:u}));break;case"_user_options":J()(t,{themeColor:i.panel.themeColor,fontColor:i.panel.fontColor}),a=Q.a.createElement(Br,ua()({},t,{content:e.content,msgId:e.extra.msgId,handleUserOption:d}));break;default:a=null}return a}(e,p,t);break;case"agent":"mobile"===Qr?(p.avatar=e.agent.avatar,p.arrow=!0):p.name=e.agent.nickname,a=function(e,t,n){var a=null,i=n.styles,o=n.handleImgOnload,r=n.handleImagePreview,l=n.scrollToBottom,c=n.handleCardSubmit,s=n.handleFileDownload,d=n.attrConfig;switch(e.content_type){case"welcome":case"text":a=Q.a.createElement(ii,ua()({},t,{msg:Gi(e.content)}));break;case"rich_text":a=Q.a.createElement(zi,ua()({},t,{content:(null==e||null==(u=e.extra)?void 0:u.content)||"",handleImagePreview:r}));break;case"photo":J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Xi,ua()({},t,{url:e.media_url,handleOnload:o,handleImagePreview:r}));break;case"video":J()(t,{themeColor:"transparent",padding:"0"});var u={url:e.media_url,thumbUrl:e.extra&&e.extra.thumb_url},a=Q.a.createElement(lo,ua()({},t,u));break;case"file":var p=ur(e.extra.expire_at),m="";J()(t,{themeColor:"#fff"});m=p?Y.a.t("{{expireTime}}后过期",{expireTime:p}):Y.a.t("已过期"),m={fileName:e.extra.filename,fileSize:e.extra.convert_size,fileStatus:m,status:e.extra.cancel?"cancel":"",hasExpired:!p,fileUrl:e.media_url,handleFileDownload:s,disableDownload:!p};a=Q.a.createElement(xo,ua()({},t,m));break;case"hybrid":p={themeColor:i.panel.themeColor,fontColor:i.panel.fontColor},m={handleCardSubmit:c,scrollToBottom:l,msgType:e._renderType};["client_card","photo_card","product_card"].includes(e.content[0].type)&&J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Nr,ua()({attrConfig:d},t,p,m,{content:e.content}));break;default:a=null}return a}(e,p,t);break;case"client":p.themeColor=i.panel.themeColor,p.fontColor=i.panel.fontColor,"mobile"===Qr&&(p.arrow=!0),a=function(e,t,n){var a=null,i=n.handleImgOnload,o=n.handleImagePreview,r=n.styles,l=n.attrConfig;switch(e.content_type){case"text":a=Q.a.createElement(ii,ua()({},t,{msg:Gi(e.content)}));break;case"photo":J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Xi,ua()({},t,{url:e.media_url,status:e.status,handleOnload:i,handleImagePreview:o}));break;case"video":J()(t,{themeColor:"transparent",padding:"0"});var c={url:e.media_url,thumbUrl:e.extra&&e.extra.thumb_url,status:e._fileStatus,progress:e._progress,scrollToBottom:an},a=Q.a.createElement(lo,ua()({},t,c));break;case"file":var s=ur(e.extra.expire_at),d="";switch(J()(t,{themeColor:"#fff"}),e._fileStatus){case"uploading":d=Y.a.t("上传中");break;case"fail":d=Y.a.t("上传失败");break;case"success":d=Y.a.t("上传成功");break;case"cancel":d=Y.a.t("取消上传");break;default:d=s?Y.a.t("{{expireTime}}后过期",{expireTime:s}):Y.a.t("已过期")}var u={id:e.id,fileName:e.extra.filename,fileSize:zr(e.extra.size,0),fileStatus:d,status:e.extra.cancel?"cancel":e._fileStatus,hasExpired:!s,progress:e._progress,speed:e._speed,cancelUpload:br,disableDownload:!0};a=Q.a.createElement(xo,ua()({},t,u));break;case"hybrid":c={themeColor:r.panel.themeColor,fontColor:r.panel.fontColor},u={scrollToBottom:an,msgType:e._renderType};["client_card","photo_card","product_card"].includes(e.content[0].type)&&J()(t,{themeColor:"transparent",padding:"0"}),a=Q.a.createElement(Nr,ua()({attrConfig:l},t,c,u,{content:e.content}));break;default:a=null}return a}(e,p,t);break;case"redirect":a=Q.a.createElement(ko,{name:e.toNickname});break;case"evaluation":var m={level:e.level,levelText:e.levelText,content:e.content,resolved:e.resolved},a=Q.a.createElement(Eo,m);break;case"blacklist":a=Q.a.createElement("span",null,Y.a.t("你被移出了黑名单"));break;case"redirect_agent":a=Q.a.createElement(Io,null,Y.a.t("正在为您转接，请稍候.."));break;case"redirect_btn":a=Q.a.createElement(So,{handleClick:function(){return r()}},Y.a.t("转人工"));break;case"redirect_message_board":a=Q.a.createElement(So,{handleClick:l,prevContent:Y.a.t("抱歉没能理解您的提问，可选择")},Y.a.t("留言"));break;case"system_msg":a=Q.a.createElement(Io,null,e.content);break;default:a=null}return{base:p,component:a}}var rl=Object(i.b)(function(e){return{showHistoryBtn:e.getIn(["message","showHistoryBtn"]),historyTimes:e.getIn(["message","historyTimes"]),historyLoading:e.getIn(["message","historyLoading"]),robotEvalSwitch:e.getIn(["config","robotEvalSwitch"]),showBlackTip:e.getIn(["message","showBlackTip"]),attrConfig:e.getIn(["config","attrConfig"])}},function(e){return{dispatch:e}})(function(c){var s=(o=Object(V.useState)({}))[0],e=o[1],t=(l=Object(V.useState)(!1))[0],n=l[1],a=c.showHistoryBtn,i=c.historyTimes,o=c.historyLoading,r=void 0===(l=c.msgs)?[]:l,d=c.attrConfig,l=c.showBlackTip,u=window.parent.meiqia.event;Object(V.useEffect)(function(){u.on("reconnectSuccess",function(){n(!0),setTimeout(function(){return n(!1)},3e3)})},[u]);var p=Object($.c)()[0],i=p(0<i?"加载更多历史消息":"加载历史消息");o&&(i=p("加载中..."));var m=Object(V.useCallback)(function(n){e(function(e){var t;return e[n]?J()({},e,((t={})[n]=e[n]+1,t)):J()({},e,((e={})[n]=1,e))})},[]),g=Object(V.useMemo)(function(){var e=r.filter(function(e){return"message"===e.action});return 0<(null==e?void 0:e.length)?e[e.length-1].id:0},[r]),h=Object(V.useCallback)(function(e){Vr(e),Jn(""+p("已复制"),1e3)},[p]),f=Object(V.useCallback)(function(e){h(e.body.value),X({url:"/mpush/copy/statistics",method:"POST",data:e})},[h]),o=r.map(function(e){var t,n=ol(e,J()({},c,{highlightMsg:s,handleHighLight:m,attrConfig:d})),a=n.base,i=n.component;if(e.extra&&"mpush_clue"===e.extra.conv_type&&"hybrid"===e.content_type&&["option","client_card"].includes(e.content[0].type))return e.id===g?Q.a.createElement(Zr,{key:e.id,id:"m"+e.id},i):Q.a.createElement(Zr,{key:e.id,id:"m"+e.id});if("hybrid"===e.content_type&&"mini_program_card"===e.content[0].type)return null;var o,r,l=e.sensitive,n=e.extra&&e.extra.contains_sensitive_words||!1,n=l||n;return Q.a.createElement(Zr,{key:e.id,id:"m"+e.id},Q.a.createElement(vr,{config:e,extra:a},i),null!=a&&null!=(t=a.operator_msg)&&t.length?Q.a.createElement(Yr,null,(a=null==a?void 0:a.operator_msg,o=e.from_type,r={message_id:e.id,ent_id:e.enterprice_id,conv_id:e.conversation_id,track_id:e.track_id},!(null==a||!a.length)&&(null==a?void 0:a.map(function(e,t){switch(e.type){case"copy":return Q.a.createElement($r,{key:t,onClick:function(){return"bot"===o?f(J()({},r,{body:e})):h(e.value)}},e.name);case"call":return Q.a.createElement($r,{key:t},Q.a.createElement("a",{href:"tel:"+e.value},e.name));case"link":return Q.a.createElement($r,{key:t},Q.a.createElement("a",{href:e.value,target:"_blank",rel:"noreferrer"},e.name))}return null})))):null,Q.a.createElement(el,null,n?"!消息包含不规范用语":""))}),b=Object(V.useRef)(null);return Object(V.useEffect)(function(){var e,t;e=b.current,t=Tr(function(){Lt(b.current)},300),e&&t&&e.addEventListener("scroll",t),en=e},[b]),Object(V.useEffect)(function(){an()},[]),Q.a.createElement(Q.a.Fragment,null,l?Q.a.createElement(Jr,null,Q.a.createElement(tl,null,Q.a.createElement(ti,{size:16,fontColor:"#FF8806",type:"iconprompt_fill"})),Q.a.createElement(nl,null,p("请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉举报，请"),Q.a.createElement("a",{href:p("[[report_url]]"),rel:"noreferrer",target:"_blank"},p("点击此处")))):null,t?Q.a.createElement(al,null,Q.a.createElement(il,{alt:"",src:Gr.a}),p("你的网络已恢复正常")):null,Q.a.createElement(Kr,{id:"__widget_msg_container",history:a,ref:b},a?Q.a.createElement(Xr,{onClick:function(){return dn({keepPosition:!0})}},Q.a.createElement("span",null,i)):null,o))}),ll=ut.isMobile()?"mobile":"desktop",cl=c.d.div.withConfig({displayName:"frame-bubble-content__Wrapper",componentId:"sc-lbgrtb-0"})(["width:100%;height:100%;color:#000;padding:10px;border-radius:5px;box-sizing:border-box;position:relative;.close{",";position:absolute;right:0;top:0;z-index:100;font-size:18px;width:30px;height:30px;line-height:30px;text-align:center;background:#fff;color:#999;cursor:pointer;}&:hover .close{display:block;}"],function(e){return"mobile"===e.device?"":"display: none;"}),sl=c.d.div.withConfig({displayName:"frame-bubble-content__Header",componentId:"sc-lbgrtb-1"})(["height:30px;display:flex;flex-direction:row;img{width:26px;height:26px;vertical-align:middle;}span{font-size:16px;line-height:26px;vertical-align:middle;padding-left:10px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]),dl=c.d.div.withConfig({displayName:"frame-bubble-content__Content",componentId:"sc-lbgrtb-2"})(["font-size:14px;height:auto;max-height:60px;overflow:auto;"]),ul=Object(i.b)(function(e){return{theme:e.get("theme"),unReadMsg:e.getIn(["message","unReadMsg"])}},function(e){return{dispatch:e}})(function(e){var t=e.unReadMsg,n=e.theme,a=e.dispatch;if(t){var i=t.agent,o=i.avatar,i=i.nickname,n=n.get(ll),n=ol(Jt({msg:t,type:"normal"}),{styles:n}).component;return Q.a.createElement(cl,ua()({},e,{device:ll}),Q.a.createElement("div",{className:"close",onClick:function(e){e.stopPropagation(),a(ce(!1))}},"✕"),Q.a.createElement(sl,null,Q.a.createElement("img",{alt:"Meiqia",src:o}),Q.a.createElement("span",null,i)),Q.a.createElement(dl,null,n))}return Q.a.createElement(cl,e)}),pl=ut.isMobile()?"mobile":"desktop",ml=c.d.div.withConfig({displayName:"bubble-arrow__Arrow",componentId:"sc-3uxf0p-0"})(["width:0;height:0;position:absolute;z-index:10;border:8px solid transparent;"," "," "," "," "," "," "," ",""],function(e){return e.left?"left: "+e.left+";":""},function(e){return e.right?"right: "+e.right+";":""},function(e){return e.top?"top: "+e.top+";":""},function(e){return e.bottom?"bottom: "+e.bottom+";":""},function(e){return e.transform?"transform: "+e.transform+";":""},function(e){return e["border-left"]?"border-left: "+e["border-left"]+";":""},function(e){return e["border-right"]?"border-right: "+e["border-right"]+";":""},function(e){return e["border-top"]?"border-top: "+e["border-top"]+";":""}),gl=Object(i.b)(function(e){return{theme:e.get("theme")}})(function(e){e=e.theme,e=function(e,t){var n,a,i={},o="left"===t?"right":"left";if("desktop"===pl)"bottom"===e?J()(i,((n={bottom:"0","border-top":"9px solid #fff"})[t]="40px",n)):J()(i,((n={})[t]="0",n["border-"+o]="9px solid #fff",n.top="50%",n.transform="translateY(-50%)",n));else switch(e){case"bottom":J()(i,((a={bottom:"0","border-top":"9px solid #fff"})[t]="40px",a));break;case"aside":J()(i,((a={})[t]="0",a["border-"+o]="9px solid #fff",a.top="50%",a.transform="translateY(-50%)",a))}return i}(e.getIn([pl,"btn","type"]),e.getIn([pl,"btn","position","type"]));return Q.a.createElement(ml,e)}),hl=Object(c.c)(["html,body{height:100%;width:100%;margin:0;padding:0;}body{padding:16px;box-sizing:border-box;}"]),fl=c.d.div.withConfig({displayName:"router-bubble__Wrapper",componentId:"sc-k6dy4k-0"})(["width:100%;height:100%;overflow:hidden;border-radius:5px;background:#fff;border:solid 1px #f7f7f7;box-shadow:0 0 14px 0 rgba(0,0,0,0.16);"]),bl=Object(i.b)(function(e){return{router:e.get("router"),msg:e.get("message")}},null)(function(e){var t=e.msg,e=e.router;return Q.a.createElement(da,{visible:t.get("unReadPreview")&&e.get("showBubble"),component:Xa,GlobalStyle:hl,iframeName:"bubble"},Q.a.createElement(gl,null),Q.a.createElement(fl,{onClick:function(){Ht(!0,"chat"),an()}},Q.a.createElement(ul,null)))}),vl=ut.isMobile();function yl(e){switch(e){case"desktop.mondeo":case"desktop.fusion":return"standard";case"desktop.fiesta":case"desktop.focus":return"mini";case"desktop.edge":return"edge";case"desktop.customer":return"custom";case"desktop.iframe":return"iframe";case"mobile.fiesta":case"mobile.mustang":return"full";case"mobile.kuga":return"half";default:return"standard"}}function xl(e,t){var n=vl?"mobile":"desktop";if(t){var a=e.getIn(["standalone",n]);if(!a)return null;var t="full"===a.type,i=a.theme[1];return"white"!==i&&(i="#"+a.theme[1]),{device:n,panel:{type:yl(n+"."+a.type)+(t?".full":""),themeColor:"#"+a.theme[0],fontColor:i,profileBgColor:"#"+a.theme[2]}}}i=e.getIn([n,"panel"]),a=e.getIn([n,"btn"]);if(!i||!a)return null;e=i.theme[1];return"white"!==e&&(e="#"+i.theme[1]),{device:n,panel:{type:yl(n+"."+i.type),position:i.position,themeColor:"#"+i.theme[0],fontColor:e,profileBgColor:"#"+i.theme[2],windowSize:i.windowSize},btn:{type:a.type,position:a.position,themeColor:"#"+a.theme}}}function wl(e,t){var n=e;K()(t).forEach(function(e){n.style[e]=t[e]})}function kl(e){if(ut.isMobile()){var t,n=(t=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document,t.getElementById("_MEIQIA_IMAGE_PREVIEW_")||Tl(t));(t=n).removeEventListener("click",Sl),t.addEventListener("click",Sl);try{n.getElementsByTagName("img")[0].src=e,n.style.display="block"}catch(e){}}else window.parent.open(e)}var _l=function(e){var t=[],n={};return e.forEach(function(e){n[e.id]||(t.push(e),n[e.id]=e.id)}),t},El=c.d.iframe.withConfig({displayName:"frame-chat__FrameMain",componentId:"sc-jge1pb-0"})(["border:none;margin:0;padding:0;overflow-x:visible;overflow-y:visible;overflow-wrap:normal;box-shadow:rgba(0,0,0,0.16) 0 5px 40px;border-radius:8px;position:fixed;z-index:9999999;",""],function(e){return e.styles?e.styles.join(""):""}),Cl=c.d.iframe.withConfig({displayName:"frame-chat__FrameMobile",componentId:"sc-jge1pb-1"})(["border:none;margin:0;position:fixed;z-index:9999999;top:0;bottom:0;left:0;right:0;height:100% !important;overflow:hidden;box-sizing:border-box;",""],function(e){return e.styles?e.styles.join(""):""}),Il=o(Object(c.e)(Object(i.b)(function(e){return{standalone:e.getIn(["config","standalone"]),customTheme:e.get("theme")}},function(e){return{dispatch:e}})(function(e){var t=e.forwardRef,n=e.customTheme,a=e.visible,i=e.theme,o=e.standalone,r=xl(n,o),n=ut.isMobile(),e=Object(V.useMemo)(function(){var e=o?function(e){var t=["top: 50%;","left: 50%;","transform: translateX(-50%) translateY(-50%);"];if(!e)return["display: none !important;"];if(t.push(["display: block !important;"]),ut.isMobile()){var n=window.parent.document.body.clientWidth;t.push("width: "+n+"px !important;")}else switch(e.type){case"standard.full":t.push("height:100% !important;width:100% !important");break;case"standard":case"custom":t.push.apply(t,["width: 688px;","height: 580px;","min-height:250px;","max-height:700px;"]);break;case"mini":t.push.apply(t,["width: 500px;","height: 610px;"])}return t}((r||i).panel):function(e,t){var n=[];if(!e)return["display: none !important;"];if(n.push(["display: block !important;"]),ut.isMobile())n.push("width:100%; !important; max-width: 100% !important;"),t.windowSize?n.push("height:"+t.windowSize+" !important;top:auto"):"half"===t.type?n.push("padding-top: 60px;"):n.push("height:100% !important;top:auto");else{var e=t.position,a=e.type,i=e.bottom,o=e.horizontal;switch(t.type){case"standard":case"iframe":case"custom":n.push.apply(n,["width: 688px !important;","height: 580px !important;","min-height:250px;","max-height:700px;"]),"center"===a?n.push.apply(n,["top: 50%;","left: 50%;","transform: translateX(-50%) translateY(-50%);"]):n.push.apply(n,["bottom: "+i+"px;",a+": "+o+"px;"]);break;case"edge":n.push.apply(n,["width: 330px !important;","height: 100% !important;","top:0;","bottom: 0;",a+":0;"]);break;case"mini":n.push.apply(n,["width: 330px !important;","height: 540px !important;","bottom: 0;",a+": "+o+"px;"])}}return n}(a,(r||i).panel);return e},[o,r,i.panel,e,a]);return n?Q.a.createElement(Cl,{name:"chat",frameborder:"0",scrolling:"no",styles:e,ref:t}):Q.a.createElement(El,{name:"chat",frameborder:"0",scrolling:"no",styles:e,ref:t})}))),Tl=function(e){var t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("img");return t.id="_MEIQIA_IMAGE_PREVIEW_",wl(t,{display:"none"}),wl(n,{position:"absolute",textAlign:"center",top:0,bottom:0,right:0,left:0,zIndex:5,width:"100%",height:"auto",minHeight:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",fontSize:0,overflow:"auto"}),wl(a,{width:"100%",height:"auto"}),n.appendChild(a),t.appendChild(n),e.body.appendChild(t),t},Sl=function(){var e=window.parent.document.querySelector("iframe[name=chat]").contentWindow.document.getElementById("_MEIQIA_IMAGE_PREVIEW_");e&&(e.style.display="none")},jl=c.d.div.withConfig({displayName:"title-bar__Header",componentId:"sc-1tx1lhu-0"})(["width:100%;padding:10px 12px;display:flex;min-height:60px;font-size:14px;box-sizing:border-box;color:",";background:",";"],function(e){return e.fontColor||e.theme.panel.fontColor},function(e){return e.themeColor||e.theme.panel.themeColor}),Nl=c.d.div.withConfig({displayName:"title-bar__HeaderLeft",componentId:"sc-1tx1lhu-1"})(["display:flex;margin-right:4px;.avatar{height:40px;width:40px;display:block;border-radius:50%;}.back{width:20px;height:20px;transform:rotate(90deg);}"]),Ol=c.d.div.withConfig({displayName:"title-bar__HeaderRight",componentId:"sc-1tx1lhu-2"})(["width:100px;flex:1 1 auto;text-align:left;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;.signature{width:100%;overflow:hidden;box-sizing:border-box;padding-bottom:6px;text-overflow:ellipsis;}"]),Ml=c.d.div.withConfig({displayName:"title-bar__Icons",componentId:"sc-1tx1lhu-3"})(["display:flex;align-items:center;i{background:white;border-radius:50%;width:24px;height:24px;display:inline-block;text-align:center;line-height:24px;margin-right:16px;color:",";}"],function(e){return e.themeColor||e.theme.panel.themeColor}),Bl=c.d.div.withConfig({displayName:"title-bar__NameBar",componentId:"sc-1tx1lhu-4"})(["display:flex;justify-content:space-between;height:22px;line-height:22px;align-items:center;.handle{display:flex;cursor:pointer;align-items:center;height:100%;margin-right:-4px;> span{display:block;min-width:26px;height:100%;text-align:center;i{width:100%;height:100%;display:block;}}}.name{flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}"]),ql=function(){window.parent.history.back()};function zl(e){var t=e.name,n=e.agentInfo,a=void 0===n?{}:n,i=e.showBack,o=e.ringEnabled,r=e.closeEnabled,l=e.showSwitch,c=e.themeColor,s=e.fontColor,d=e.handleClose,u=e.handleRedirect,p=e.handleRing,m=a.avatar,g=a.name,h=a.cellphone,f=a.tel,b=a.weixin,v=a.qq,n=a.signature,y=h||f,e=t||g,h=ut.isMobile(),f=void 0!==o&&!h,t=h&&y,x=Object($.c)()[0],g=Object(V.useCallback)(function(){p(!o)},[p,o]),w=Object(V.useCallback)(function(e,t){Vr(t),Jn(x("已复制")+" "+x(e),1e3)},[x]);return Q.a.createElement(jl,{themeColor:c,fontColor:s,hasContact:a.hasContact},Q.a.createElement(Nl,{hasAvatar:m,hasContact:a.hasContact},i?Q.a.createElement("div",{className:"back"},Q.a.createElement(ti,{type:"iconicon_open",onClick:ql})):null,m?Q.a.createElement("div",null,Q.a.createElement("img",{className:"avatar",alt:"#",src:m})):null),Q.a.createElement(Ol,null,Q.a.createElement(Bl,null,Q.a.createElement("div",{title:e,className:"name"},e),Q.a.createElement("div",{className:"handle"},l?Q.a.createElement("span",{style:{padding:"0 4px"},"data-cy":"redirect-btn",fontColor:s,bgColor:"transparent",onClick:function(){return u()}},x("转人工")):null,f?Q.a.createElement("span",{onClick:g},Q.a.createElement(ti,{fontColor:s,onClick:g,type:o?"iconicon_voice1":"iconicon_voice_close1",size:14,className:"close"})):null,r?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement("span",{onClick:d},Q.a.createElement(ti,{fontColor:s,type:"icondropdown1",className:"close",size:14})),Q.a.createElement("span",{onClick:d},Q.a.createElement(ti,{fontColor:s,type:"iconclose1",className:"close",size:14}))):null)),n?Q.a.createElement("div",{className:"signature"},n):null,Q.a.createElement(Ml,null,b&&Q.a.createElement(ti,{onClick:function(){return w("微信",b)},type:"iconwechat"}),v&&Q.a.createElement(ti,{onClick:function(){return w("QQ",v)},type:"iconqq"}),y&&!h&&Q.a.createElement(ti,{onClick:function(){return w("电话",y)},type:"iconphone"}),t?Q.a.createElement("a",{href:"tel:"+y,target:"_parent"},Q.a.createElement(ti,{fontColor:s,type:"iconphone"})):null)))}var Dl=c.d.div.withConfig({displayName:"swiper__Content",componentId:"sc-gpsi7u-0"})(["overflow:hidden;position:relative;height:",";width:",";"],function(e){return"number"==typeof e.height?e.height+"px":e.height},function(e){return"number"==typeof e.width?e.width+"px":e.width}),Pl=c.d.ul.withConfig({displayName:"swiper__List",componentId:"sc-gpsi7u-1"})(["height:",";white-space:nowrap;word-break:keep-all;zoom:1;width:","px;transition:"," 1s;transform:translateX(",");::after{clear:both;content:'';display:block;height:0;}"],function(e){return"number"==typeof e.height?e.height+"px":e.height},function(e){return e.width*e.count},function(e){return e.animating?"all":"opacity"},function(e){return e.animating?"-"+10/e.count*10+"%":0}),Al=c.d.li.withConfig({displayName:"swiper__Item",componentId:"sc-gpsi7u-2"})(["display:block;float:left;height:100%;"]),Ll=c.d.div.withConfig({displayName:"swiper__ItemImg",componentId:"sc-gpsi7u-3"})(["display:block;width:100%;height:100%;cursor:pointer;background:",";background-repeat:no-repeat;background-position:center center;background-size:",";"],function(e){return'url("'+e.src+'")'},function(e){return e.imgMode||"contain"}),Fl=c.d.div.withConfig({displayName:"swiper__PointList",componentId:"sc-gpsi7u-4"})(["position:absolute;width:100%;text-align:center;bottom:6px;"]),Rl=c.d.div.withConfig({displayName:"swiper__PointItem",componentId:"sc-gpsi7u-5"})(["display:inline-block;height:6px;width:6px;border-radius:3px;background:rgba(255,255,255,1);margin:0 4px;opacity:",";"],function(e){return e.selected?1:.3}),Ul=function(e){var t=e.img,n=void 0===t?"":t,t=e.url,a=void 0===t?"":t,t=e.imgMode,e=void 0===t?"imgMode":t,t=Object(V.useCallback)(function(){window.open(a,"_blank")},[a]);return Q.a.createElement(Ll,{imgMode:e,src:n,onClick:t})},H=function(a){function e(){for(var r,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(r=a.call.apply(a,[this].concat(t))||this).state={currentIndex:0,childWidth:0,picList:[],animating:!1},r.time=0,r.contentRef=null,r.ticket=function(){var a=V.Children.count(r.props.children),e=r.state,i=e.picList,o=e.currentIndex;r.time=setTimeout(function(){var e=o+1;a-1<e&&(e=0);var t=[].concat(i),n=t[0];r.setState({currentIndex:e,animating:!0}),setTimeout(function(){t.splice(0,1),t.push(n),r.setState({animating:!1,picList:t.concat([])}),r.ticket()},1e3)},3e3)},r.ref=function(e){r.contentRef=e},r}Vo()(e,a);var t=e.prototype;return t.componentDidMount=function(){var e=this,t=this.props.children,n=V.Children.map(t,function(e,t){e=e.props;return{img:e.img,url:e.url,index:t}});this.setState({picList:n,childWidth:this.contentRef.clientWidth},function(){1<n.length&&e.ticket()})},t.componentWillUnmount=function(){window.clearTimeout(this.time)},t.render=function(){var e=this.state,t=this.props,n=t.height,a=void 0===n?150:n,i=t.width,o=void 0===i?"100%":i,n=t.children,i=void 0===n?null:n,n=t.imgMode,r=void 0===n?"contain":n,l=e.currentIndex,c=e.childWidth,t=e.picList,n=e.animating,e=V.Children.count(i);return e?Q.a.createElement(Dl,{ref:this.ref,height:a,width:o},Q.a.createElement(Pl,{animating:n,height:a,width:c,count:e},t.map(function(e){return Q.a.createElement(Al,{style:{width:c},key:e.index},Q.a.createElement(Ul,{imgMode:r,url:e.url,img:e.img}))})),Q.a.createElement(Fl,null,V.Children.map(i,function(e,t){return Q.a.createElement(Rl,{selected:l===t,key:t})}))):null},e}(Q.a.PureComponent);H.defaultProps={imgMode:"contain"};var Hl=H,Wl=c.d.div.withConfig({displayName:"user-info__Container",componentId:"sc-8wgbg-0"})(["margin:0 auto;"]),Gl=c.d.img.withConfig({displayName:"user-info__Avatar",componentId:"sc-8wgbg-1"})(["width:186px;height:186px;margin:0 auto;display:block;margin-bottom:5px;"]),Vl=c.d.div.withConfig({displayName:"user-info__Item",componentId:"sc-8wgbg-2"})(["width:100%;line-height:20px;font-size:12px;word-break:break-all;margin:0 0 5px 0;color:#abaaac;.info{display:inline-block;vertical-align:middle;padding-left:10px;}"]);function Ql(e){var t=e.avatar,n=e.tel,a=e.cellphone,i=e.email,o=e.qq,e=e.weixin;return Q.a.createElement(Wl,null,Q.a.createElement(Gl,{src:t}),n?Q.a.createElement(Vl,null,Q.a.createElement(Da,{type:"tele",width:"20px",height:"20px"}),Q.a.createElement("span",{className:"info"},n)):null,a?Q.a.createElement(Vl,null,Q.a.createElement(Da,{type:"phone",width:"20px",height:"20px"}),Q.a.createElement("span",{className:"info"},a)):null,i?Q.a.createElement(Vl,null,Q.a.createElement(Da,{type:"email",width:"20px",height:"20px"}),Q.a.createElement("span",{className:"info"},i)):null,o?Q.a.createElement(Vl,null,Q.a.createElement(Da,{type:"qq",width:"20px",height:"20px"}),Q.a.createElement("span",{className:"info"},o)):null,e?Q.a.createElement(Vl,null,Q.a.createElement(Da,{type:"wechat",width:"20px",height:"20px"}),Q.a.createElement("span",{className:"info"},e)):null)}var Yl=c.d.div.withConfig({displayName:"side-tab__Tab",componentId:"sc-16r4sm1-0"})(["position:relative;background:#fff;overflow:hidden;height:100%;"]),$l=c.d.div.withConfig({displayName:"side-tab__TabTitle",componentId:"sc-16r4sm1-1"})(["height:44px;line-height:44px;text-align:center;font-size:12px;box-shadow:0 4px 8px 0 rgba(29,39,84,0.1);zoom:1;position:relative;z-index:1;background:#fff;&::after{clear:both;content:'';display:block;height:0;}"]),Kl=c.d.div.withConfig({displayName:"side-tab__TabTitleItem",componentId:"sc-16r4sm1-2"})(["height:44px;line-height:44px;position:relative;font-size:12px;float:left;cursor:pointer;color:",";width:",";"],function(e){return e.selected?"#1D2754":"#6F7592"},function(e){return"auto"===e.tabBarWidth?10/e.count*10+"%":e.tabBarWidth}),Jl=c.d.div.withConfig({displayName:"side-tab__TabTitleItemBar",componentId:"sc-16r4sm1-3"})(["position:absolute;bottom:0;width:100%;left:0;::after{content:'';display:block;border-bottom:2px solid ",";width:40px;margin:0 auto;}"],function(e){return e.themeColor}),Zl=c.d.div.withConfig({displayName:"side-tab__TabPane",componentId:"sc-16r4sm1-4"})(["position:absolute;left:0;top:0;bottom:0;width:100%;padding-top:44px;overflow:hidden;"]),Xl=c.d.div.withConfig({displayName:"side-tab__TabScroll",componentId:"sc-16r4sm1-5"})(["overflow:auto;height:100%;box-sizing:border-box;"]),ec=c.d.div.withConfig({displayName:"side-tab__TabPaneItem",componentId:"sc-16r4sm1-6"})([""]);var tc=function(e){var a=void 0===(n=e.themeColor)?"#fff":n,t=e.style,n=void 0===t?{}:t,i=void 0===(t=e.children)?null:t,o=void 0===(t=e.tabBarWidth)?"auto":t,e=void 0===(t=e.className)?"":t,r=(t=Object(V.useState)(0))[0],l=t[1],c=Q.a.Children.count(i);Object(V.useEffect)(function(){var n=null;Q.a.Children.forEach(i,function(e,t){e&&null===n&&(n=t)}),l(n)},[i]);var s=Object(V.useCallback)(function(e){l(e)},[]);return Q.a.createElement(Yl,{style:n,className:e},Q.a.createElement(Zl,null,Q.a.createElement(Xl,null,Q.a.Children.map(i,function(e,t){return e&&r===t?Q.a.createElement(ec,null,e):null}))),Q.a.createElement($l,null,Q.a.Children.map(i,function(e,t){var n=r===t;return e?Q.a.createElement(Kl,{tabBarWidth:o,onClick:function(){return s(t)},selected:n,count:c},e.props.name,n?Q.a.createElement(Jl,{themeColor:a}):null):null})))},nc=c.d.ul.withConfig({displayName:"quick-entry__List",componentId:"sc-lyq0cm-0"})(["overflow:hidden;zoom:1;padding:0 5px;::after{clear:both;content:'';display:block;height:0;}"]),ac=c.d.li.withConfig({displayName:"quick-entry__Item",componentId:"sc-lyq0cm-1"})(["display:block;width:50%;float:left;text-align:center;margin-top:20px;cursor:pointer;padding:0 7px;box-sizing:border-box;:hover{div{color:",";}}"],function(e){return e.themeColor}),ic=c.d.img.withConfig({displayName:"quick-entry__ItemImg",componentId:"sc-lyq0cm-2"})(["display:block;margin:0 auto;height:48px;width:48px;object-fit:contain;border-radius:24px;margin-bottom:6px;"]),oc=c.d.div.withConfig({displayName:"quick-entry__ItemText",componentId:"sc-lyq0cm-3"})(["height:20px;font-size:12px;line-height:20px;color:#343b66;text-align:center;overflow:hidden;text-overflow:ellipsis;word-break:keep-all;"]);function rc(e){var t=void 0===(i=e.img)?"":i,n=void 0===(a=e.url)?"":a,a=void 0===(i=e.title)?"":i,e=void 0===(i=e.themeColor)?"":i,i=Object(V.useCallback)(function(){window.open(n,"_blank")},[n]);return Q.a.createElement(ac,{onClick:i,themeColor:e},Q.a.createElement(ic,{src:t}),Q.a.createElement(oc,null,a))}var lc=function(e){return e=e.children,Q.a.createElement(nc,null,e)},cc=c.d.div.withConfig({displayName:"question-item__Item",componentId:"sc-19lrs93-0"})(["height:34px;line-height:34px;text-overflow:ellipsis;word-break:keep-all;overflow:hidden;color:#6f7592;font-size:12px;padding-left:16px;border-bottom:1px solid rgba(238,240,246,1);cursor:pointer;:hover{color:",";}"],function(e){return e.themeColor});var sc=function(e){var t=e.title,n=e.value,a=e.onClick,i=e.themeColor,e=Object(V.useCallback)(function(){a&&a(n)},[a,n]);return Q.a.createElement(cc,{onClick:e,themeColor:i},t)},dc=c.d.div.withConfig({displayName:"side-panel__Container",componentId:"sc-1tvj7eq-0"})(["width:100%;height:100%;position:relative;box-sizing:border-box;",";"],function(e){return e.bgColor?"background:"+e.bgColor+";":""}),uc=c.d.div.withConfig({displayName:"side-panel__Content",componentId:"sc-1tvj7eq-1"})(["width:100%;height:100%;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;padding-bottom:",";"],function(e){return e.hasAd?"150px":0}),pc=c.d.div.withConfig({displayName:"side-panel__Custom",componentId:"sc-1tvj7eq-2"})(["ul,ol{list-style:none;padding:5px 0;}img{max-width:100%;}"]),mc=c.d.div.withConfig({displayName:"side-panel__CustomContent",componentId:"sc-1tvj7eq-3"})(["padding:10px 10px 0 10px;"]),gc=c.d.iframe.withConfig({displayName:"side-panel__IframeContent",componentId:"sc-1tvj7eq-4"})(["height:100%;width:100%;border:none;"]),hc=c.d.div.withConfig({displayName:"side-panel__SwiperContent",componentId:"sc-1tvj7eq-5"})(["position:absolute;width:100%;bottom:0;left:0;right:0;height:150px;"]),fc=c.d.div.withConfig({displayName:"side-panel__UserContent",componentId:"sc-1tvj7eq-6"})(["padding:10px 10px 0 10px;"]);function bc(e){var t=e.bgColor,n=e.userInfo,a=e.custom,i=e.showAvatar,o=e.themeColor,r=e.onQuestionClick,l=e.questionList,c=void 0===l?[]:l,l=e.entryList,s=void 0===l?[]:l,l=e.adList,d=void 0===l?[]:l,u=e.iframeUrl,p=void 0===i||i,m=Object(V.useRef)(null),g=Object(V.useCallback)(function(e){r&&r(e)},[r]),e=Object(V.useMemo)(function(){var e=!c.length&&!s.length;return u?Q.a.createElement(gc,{ref:m}):a||e?Q.a.createElement(mc,null,p?Q.a.createElement(Ql,n):null,a?Q.a.createElement(pc,{dangerouslySetInnerHTML:{__html:a}}):null):Q.a.createElement(tc,{themeColor:o,style:{height:"100%"}},s.length?Q.a.createElement("div",{name:"快捷入口"},Q.a.createElement(lc,null,s.map(function(e,t){var n=e.image_url,a=e.label,e=e.url;return Q.a.createElement(rc,{key:t,themeColor:o,img:n,url:e,title:a})}))):null,c.length?Q.a.createElement("div",{name:"常见问题"},c.map(function(e){var t=e.id,n=e.question;return Q.a.createElement(sc,{key:t,onClick:g,themeColor:o,value:e,title:n})})):null,Q.a.createElement("div",{name:"客服名片"},Q.a.createElement(fc,null,p?Q.a.createElement(Ql,n):null)))},[a,c,s,p,n,o,u,g]),i=Object(V.useMemo)(function(){return!!d.length&&!a&&!u},[d,a,u]);return Object(V.useEffect)(function(){m&&m.current&&m.current.contentWindow.location.replace(u)},[u]),Q.a.createElement(dc,{bgColor:t},Q.a.createElement(uc,{hasAd:i},e,i?Q.a.createElement(hc,null,Q.a.createElement(Hl,null,d.map(function(e,t){var n=e.image_url,e=e.url;return Q.a.createElement(Ul,{key:t,img:n,url:e})}))):null))}var vc=Object(V.memo)(bc,function(e,t){return v()(e)===v()(t)}),yc=c.d.div.withConfig({displayName:"count-down__OfflineText",componentId:"sc-1pcm6nl-0"})(["margin-top:16px;width:100%;text-align:center;height:22px;font-size:14px;font-weight:400;line-height:22px;"]),F=function(e){var t=e.reconnectTime,n=Object(V.useState)(t/1e3||0),e=n[0],a=n[1],i=Object(V.useRef)(null),n=Object($.c)()[0];return Object(V.useEffect)(function(){clearInterval(i.current),i.current=null;var e=500===t?0:t/1e3;a(32<=e?32:e)},[t]),Object(V.useEffect)(function(){i.current||(i.current=setInterval(function(){a(function(e){return 0<=e-1?e-1:0})},[1e3]))},[e]),Object(V.useEffect)(function(){return function(){clearInterval(i.current),i.current=null}},[]),Q.a.createElement(yc,null,n("您的网络连接已断开，{{second}}秒后自动重连",{second:e}))},xc=Q.a.memo(F),wc=c.d.a.withConfig({displayName:"support__Container",componentId:"sc-lrhi0c-0"})(["width:100%;height:30px;line-height:30px;text-align:center;font-size:12px;color:#c6cbdd;border-top:#ededed;text-decoration:none;background-color:#f4f4f4;border-top:1px solid #ededed;position:relative;display:block;i,span{display:inline-block;vertical-align:middle;}"]),kc=c.d.span.withConfig({displayName:"support__Text",componentId:"sc-lrhi0c-1"})(["display:inline-block;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function _c(e){var t=e.link,n=Object($.c)()[0],e=n("客服软件由{{企业名称}}提供",{"企业名称":n("[[企业名称]]")});return Q.a.createElement(wc,{target:"_blank",href:t},Q.a.createElement(ti,{fontColor:"#c6cbdd",type:n("[[logo]]")}),Q.a.createElement(kc,{title:e},e))}var Ec=c.d.div.withConfig({displayName:"action-tooltip__Btns",componentId:"sc-12tnxr9-0"})(["display:flex;justify-content:flex-start;align-items:center;flex-wrap:nowrap;"]),Cc=c.d.label.withConfig({displayName:"action-tooltip__IconLabel",componentId:"sc-12tnxr9-1"})(["margin-right:6px;display:flex;justify-content:center;align-items:center;i{color:#666;font-size:24px;}"]),Ic=c.d.span.withConfig({displayName:"action-tooltip__InputSpan",componentId:"sc-12tnxr9-2"})(["visibility:hidden;position:absolute;"]);function Tc(e){var t=e.toggleEmojiPanel,n=e.showEvaluation,a=e.showEva,i=e.showVideo,o=e.showFile,r=e.sendImage,l=e.uploadFile,c=e.clickImage,s=e.clickFile,e=Object($.c)()[0];return Q.a.createElement(Ec,null,Q.a.createElement(Cc,{title:e("表情"),onClick:t},Q.a.createElement(ti,{type:"iconicon_widget_face"})),Q.a.createElement(Cc,{title:e("发送图片")},Q.a.createElement(ti,{type:"iconicon_widget_picture"}),Q.a.createElement(Ic,null,Q.a.createElement("input",{id:"photoFile",type:"file",accept:"image/*",onClick:c,onChange:r}))),i?Q.a.createElement(Cc,{title:e("发送视频")},Q.a.createElement(ti,{type:"iconicon_widget_video"}),Q.a.createElement(Ic,null,Q.a.createElement("input",{id:"photoFile",type:"file",value:"",accept:"video/mp4,video/quicktime",onClick:c,onChange:function(e){return l(e,"video")}}))):null,o?Q.a.createElement(Cc,{title:e("发送文件")},Q.a.createElement(ti,{type:"iconicon_widget_file"}),Q.a.createElement(Ic,null,Q.a.createElement("input",{id:"uploadFile",type:"file",onClick:s,onChange:l}))):null,a?Q.a.createElement(Cc,{title:e("评价"),onClick:n},Q.a.createElement(ti,{type:"iconicon_widget_assess"})):null)}var Sc=n("RhP/"),jc=c.d.div.withConfig({displayName:"emoji-panel__Wrap",componentId:"sc-1yf82ds-0"})([".emoji-mart,.emoji-mart *{box-sizing:border-box;line-height:1.15;}.emoji-mart{font-size:16px;display:inline-block;color:#222427;border-top:1px solid #ededed;border-bottom:1px solid #ededed;background:#fff;width:100% !important;}.emoji-mart .emoji-mart-emoji{padding:6px;}.emoji-mart-bar{border:0 solid #ededed;}.emoji-mart-bar:first-child{border-bottom-width:1px;}.emoji-mart-bar:last-child{border-top-width:1px;border-bottom-left-radius:5px;border-bottom-right-radius:5px;}.emoji-mart-anchors{display:flex;flex-direction:row;justify-content:space-between;padding:0 6px;line-height:0;}.emoji-mart-anchor{position:relative;display:block;flex:1 1 auto;color:#858585;text-align:center;padding:12px 4px;overflow:hidden;transition:color 0.1s ease-out;margin:0;box-shadow:none;background:none;border:none;}.emoji-mart-anchor:focus{outline:0;}.emoji-mart-anchor:hover,.emoji-mart-anchor:focus,.emoji-mart-anchor-selected{color:#464646;}.emoji-mart-anchor-selected .emoji-mart-anchor-bar{bottom:0;}.emoji-mart-anchor-bar{position:absolute;bottom:-3px;left:0;width:100%;height:3px;background-color:#464646;}.emoji-mart-anchors i{display:inline-block;width:100%;max-width:22px;}.emoji-mart-anchors svg,.emoji-mart-anchors img{fill:currentColor;height:18px;width:18px;}.emoji-mart-scroll{overflow-y:scroll;overflow-x:hidden;height:255px;padding:0 6px 6px 6px;will-change:transform;}.emoji-mart-search{display:none;}.emoji-mart-search input{font-size:16px;display:block;width:100%;padding:5px 25px 6px 10px;border-radius:5px;border:1px solid #ededed;outline:0;}.emoji-mart-search input,.emoji-mart-search input::-webkit-search-decoration,.emoji-mart-search input::-webkit-search-cancel-button,.emoji-mart-search input::-webkit-search-results-button,.emoji-mart-search input::-webkit-search-results-decoration{-webkit-appearance:none;}.emoji-mart-search-icon{position:absolute;top:7px;right:11px;z-index:2;padding:2px 5px 1px;border:none;background:none;}.emoji-mart-category .emoji-mart-emoji span{z-index:1;position:relative;text-align:center;cursor:default;}.emoji-mart-category .emoji-mart-emoji:hover:before{z-index:0;content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:#f4f4f4;border-radius:100%;}.emoji-mart-category-label{z-index:2;position:relative;position:-webkit-sticky;position:sticky;top:0;}.emoji-mart-category-label span{display:block;width:100%;font-weight:500;padding:5px 6px;background-color:#fff;background-color:rgba(255,255,255,0.95);}.emoji-mart-category-list{margin:0;padding:0;}.emoji-mart-category-list li{list-style:none;margin:0;padding:0;display:inline-block;}.emoji-mart-emoji{position:relative;display:inline-block;font-size:0;margin:0;padding:0;border:none;background:none;box-shadow:none;}.emoji-mart-no-results{font-size:14px;text-align:center;padding-top:70px;color:#858585;}.emoji-mart-no-results-img{display:block;margin-left:auto;margin-right:auto;width:50%;}.emoji-mart-no-results .emoji-mart-category-label{display:none;}.emoji-mart-no-results .emoji-mart-no-results-label{margin-top:0.2em;}.emoji-mart-no-results .emoji-mart-emoji:hover:before{content:none;}.emoji-mart-preview{position:relative;height:70px;}.emoji-mart-preview-emoji,.emoji-mart-preview-data,.emoji-mart-preview-skins{position:absolute;top:50%;transform:translateY(-50%);}.emoji-mart-preview-emoji{left:12px;}.emoji-mart-preview-data{left:68px;right:12px;word-break:break-all;}.emoji-mart-preview-skins{right:30px;text-align:right;}.emoji-mart-preview-skins.custom{right:10px;text-align:right;}.emoji-mart-preview-name{font-size:14px;}.emoji-mart-preview-shortname{font-size:12px;color:#888;}.emoji-mart-preview-shortname + .emoji-mart-preview-shortname,.emoji-mart-preview-shortname + .emoji-mart-preview-emoticon,.emoji-mart-preview-emoticon + .emoji-mart-preview-emoticon{margin-left:0.5em;}.emoji-mart-preview-emoticon{font-size:11px;color:#bbb;}.emoji-mart-title span{display:inline-block;vertical-align:middle;}.emoji-mart-title .emoji-mart-emoji{padding:0;}.emoji-mart-title-label{color:#999a9c;font-size:26px;font-weight:300;}.emoji-mart-skin-swatches{font-size:0;padding:2px 0;border:1px solid #ededed;border-radius:12px;background-color:#fff;}.emoji-mart-skin-swatches.custom{font-size:0;border:none;background-color:#fff;}.emoji-mart-skin-swatches.opened .emoji-mart-skin-swatch{width:16px;padding:0 2px;}.emoji-mart-skin-swatches.opened .emoji-mart-skin-swatch.selected:after{opacity:0.75;}.emoji-mart-skin-swatch{display:inline-block;width:0;vertical-align:middle;transition-property:width,padding;transition-duration:0.125s;transition-timing-function:ease-out;}.emoji-mart-skin-swatch:nth-child(1){transition-delay:0s;}.emoji-mart-skin-swatch:nth-child(2){transition-delay:0.03s;}.emoji-mart-skin-swatch:nth-child(3){transition-delay:0.06s;}.emoji-mart-skin-swatch:nth-child(4){transition-delay:0.09s;}.emoji-mart-skin-swatch:nth-child(5){transition-delay:0.12s;}.emoji-mart-skin-swatch:nth-child(6){transition-delay:0.15s;}.emoji-mart-skin-swatch.selected{position:relative;width:16px;padding:0 2px;}.emoji-mart-skin-swatch.selected:after{content:'';position:absolute;top:50%;left:50%;width:4px;height:4px;margin:-2px 0 0 -2px;background-color:#fff;border-radius:100%;pointer-events:none;opacity:0;transition:opacity 0.2s ease-out;}.emoji-mart-skin-swatch.custom{display:inline-block;width:0;height:38px;overflow:hidden;vertical-align:middle;transition-property:width,height;transition-duration:0.125s;transition-timing-function:ease-out;cursor:default;}.emoji-mart-skin-swatch.custom.selected{position:relative;width:36px;height:38px;padding:0 2px 0 0;}.emoji-mart-skin-swatch.custom.selected:after{content:'';width:0;height:0;}.emoji-mart-skin-swatches.custom .emoji-mart-skin-swatch.custom:hover{background-color:#f4f4f4;border-radius:10%;}.emoji-mart-skin-swatches.custom.opened .emoji-mart-skin-swatch.custom{width:36px;height:38px;padding:0 2px 0 0;}.emoji-mart-skin-swatches.custom.opened .emoji-mart-skin-swatch.custom.selected:after{opacity:0.75;}.emoji-mart-skin-text.opened{display:inline-block;vertical-align:middle;text-align:left;color:#888;font-size:11px;padding:5px 2px;width:95px;height:40px;border-radius:10%;background-color:#fff;}.emoji-mart-skin{display:inline-block;width:100%;padding-top:100%;max-width:12px;border-radius:100%;}.emoji-mart-skin-tone-1{background-color:#ffc93a;}.emoji-mart-skin-tone-2{background-color:#fadcbc;}.emoji-mart-skin-tone-3{background-color:#e0bb95;}.emoji-mart-skin-tone-4{background-color:#bf8f68;}.emoji-mart-skin-tone-5{background-color:#9b643d;}.emoji-mart-skin-tone-6{background-color:#594539;}.emoji-mart-sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0;}.emoji-mart-dark{color:#fff;border-color:#555453;background-color:#222;}.emoji-mart-dark .emoji-mart-bar{border-color:#555453;}.emoji-mart-dark .emoji-mart-search input{color:#fff;border-color:#555453;background-color:#2f2f2f;}.emoji-mart-dark .emoji-mart-search-icon svg{fill:#fff;}.emoji-mart-dark .emoji-mart-category .emoji-mart-emoji:hover:before{background-color:#444;}.emoji-mart-dark .emoji-mart-category-label span{background-color:#222;color:#fff;}.emoji-mart-dark .emoji-mart-skin-swatches{border-color:#555453;background-color:#222;}.emoji-mart-dark .emoji-mart-anchor:hover,.emoji-mart-dark .emoji-mart-anchor:focus,.emoji-mart-dark .emoji-mart-anchor-selected{color:#bfbfbf;}"]),Nc=c.d.div.withConfig({displayName:"emoji-panel__Info",componentId:"sc-1yf82ds-1"})(["background-color:#fffde1;padding:8px 12px;color:#3d1f14;"]),Oc=ut.isWin(),Mc=Q.a.forwardRef(function(e,t){var n=e.themeColor,a=e.handleClick,e=Object($.c)()[0];return Q.a.createElement(jc,{ref:t,themeColor:n},Q.a.createElement(Sc.a,{set:"twitter",showPreview:!1,showSkinTones:!1,sheetSize:32,backgroundImageFn:function(){return M.public+"32.png"},onSelect:function(e){a(e.native)},i18n:{categories:{recent:e("经常使用"),smileys:e("微笑和情感"),people:e("人和身体"),nature:e("动物和自然"),foods:e("食物和饮料"),activity:e("活动"),places:e("旅行和地点"),objects:e("物体"),symbols:e("符号"),flags:e("旗帜"),custom:e("自定义")}}}),Oc?Q.a.createElement(Nc,null,e("表情提示")):null)}),H=function(o,r,l){var c;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=void 0,i=l&&!c;clearTimeout(c),c=setTimeout(function(){c=null,l||o.apply(a,t)},r),i&&o.apply(a,t)}},Bc=!1,qc=[];function zc(){Bc&&(qc.forEach(function(e){return clearTimeout(e)}),qc=[])}function Dc(e,t){var n=Ge.getState().get("config");try{var a="unsentMsg-"+n.get("entId")+"-"+n.get("trackId");if("get"===e)return ee("get",a);if("set"===e)return ee("set",a,t),!0;if("remove"===e)return ee("remove",a),!0}catch(e){return!1}return!1}var Pc=H(function(e){var t=Ge.getState(),n=Ge.dispatch,a=t.get("message"),i=+new Date,o=a.get("schedulerAfterClientSendMsg"),r={id:i,from_type:"client",content_type:"text",status:"sending",content:e,type:"text"},t=Jt({msg:r,productCard:a.get("productCard")}),e={id:i,content_type:"text",content:e};zc(),a.get("convId")?a.get("chatHasEnd")?(wn(),n(Ce(e)),n(ye({schedulerMsg:!0}))):(n(xe(t)),Kt(r)):(o&&!a.get("scheduler")&&(wn(),n(ye({schedulerAfterClientSendMsg:!1,schedulerMsg:!0,queue:[]}))),n(Ce(e))),an()},300,!0),Ac=H(function(e,t){var n=Ge.getState(),a=Ge.dispatch,i=n.get("message"),o=+new Date,r=i.get("schedulerAfterClientSendMsg"),n={id:o,from_type:"client",content_type:"text",status:"sending",content:e,type:"text",extra:{sub_type:"faq",id:t}},t=Jt({msg:n}),e={id:o,content_type:"text",content:e};zc(),i.get("convId")?i.get("chatHasEnd")?(wn(),a(Ce(e)),a(ye({schedulerMsg:!0}))):(a(xe(t)),Kt(n)):(r&&!i.get("scheduler")&&(wn(),a(ye({schedulerAfterClientSendMsg:!1,schedulerMsg:!0,queue:[]}))),a(Ce(e))),an()},300,!0),Lc=["value","handleKeyDown","handleInput","handleKeyUp","handleFocus","handleBlur","handlePaste"],Fc=c.d.textarea.withConfig({displayName:"action-textarea__Textarea",componentId:"sc-m7qpvj-0"})(["display:block;width:100%;height:100%;resize:none;outline:0;background:#fff;border:none;font-size:13px;padding:0;height:60px;font-family:'Helvetica Neue',Helvetica,Arial,'Hiragino Sans GB','Microsoft YaHei',sans-serif;"]),Rc=c.d.input.withConfig({displayName:"action-textarea__Input",componentId:"sc-m7qpvj-1"})(["display:block;width:100%;padding:4px 6px;outline:0;background:#f3f4f8;border:none;font-size:13px;height:32px;font-family:'Helvetica Neue',Helvetica,Arial,'Hiragino Sans GB','Microsoft YaHei',sans-serif;"]),Uc=Q.a.forwardRef(function(e,t){var n=e.value,a=e.handleKeyDown,i=e.handleInput,o=e.handleKeyUp,r=e.handleFocus,l=e.handleBlur,c=e.handlePaste,s=me()(e,Lc),d=Object($.c)()[0],e=ut.isMobile(),c=J()({},s,{ref:t,value:n,placeholder:d("请输入"),onClick:i,onChange:i,onKeyUp:o,onKeyDown:a,onFocus:r,onBlur:l,onPaste:c});return Q.a.createElement(Q.a.Fragment,null,e?Q.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},Q.a.createElement(Rc,ua()({},c,{type:"text",autoComplete:"off"}))):Q.a.createElement(Fc,c))}),Hc=function(e){if(e.clipboardData.items)for(var t,n=e.clipboardData.items,a=0,i=n.length;a<i;a+=1)n[a].type.match(/^image\//)&&(t=n[a].getAsFile(),t={id:Math.random(),from_type:"client",content_type:"photo",status:"sending",media_url:Ar.a,file:t},Ur(t))},Wc=!1,Gc="",Vc=function e(t){var n,a=Ge.getState(),i=a.get("config"),o=i.get("entId"),r=i.get("trackId"),l=a.getIn(["message","agent"]),c=a.getIn(["message","chatHasEnd"]),i=a.getIn(["message","scheduler"]),a=a.getIn(["config","socket"]);Gc=t,!Wc&&i&&!c&&l&&(n={ent_id:o,agent_id:l?l.id:null,track_id:r,content:t,action:"client_inputting"},Wc=!0,31991!==o?X({url:"/client/inputting",method:"post",headers:{"content-type":"application/json"},data:n}).then(function(){setTimeout(function(){Wc=!1,n.content!==Gc&&e(Gc)},3e3)},function(){setTimeout(function(){Wc=!1},3e3)}):(a.send(v()(n)),setTimeout(function(){Wc=!1,n.content!==Gc&&e(Gc)},3e3)))},Qc=ut.isMobile()?"mobile":"desktop",Yc=c.d.div.withConfig({displayName:"chat-textarea__AutoFit",componentId:"sc-catw5r-0"})(["position:absolute;top:0;width:100%;z-index:300;box-sizing:border-box;padding:10px 13px 5px 10px;transform:translateY(-100%);ul{background:#fff;box-shadow:0 0 12px 1px rgba(0,0,0,0.2);}li{list-style:none;color:#888;border-top:solid 1px #eee;& > a{display:block;padding:10px;em{color:#6088e6;}}&:hover,&.selected{color:#fff;cursor:pointer;background:",";& > a em{color:#fff;}}}"],function(e){return"#"+e.themeColor}),$c=Object(i.b)(function(e){return{autoFit:e.getIn(["message","autoFit"]),autoFitSelected:e.getIn(["message","autoFitSelected"]),themeColor:e.getIn(["theme",Qc,"panel","theme"])}},function(e){return{dispatch:e}})(function(e){var n,t=e.autoFit,a=e.autoFitSelected,i=e.sendMsg,o=e.setPos,r=e.setContent,l=e.content,c=e.lineHeight,s=e.themeColor,d=e.inputRef,a=(n=a,Q.a.createElement("ul",null,t.map(function(t,e){return Q.a.createElement("li",{key:t.question_id,className:n===e?"selected":""},Q.a.createElement("a",{onClick:function(){var e;e=t.question,i(e.replace(/<em>|<\/em>/g,""))},dangerouslySetInnerHTML:{__html:t.question}}))})));return Object(V.useEffect)(function(){return function(){vt.wxScroll()}},[]),Q.a.createElement(Q.a.Fragment,null,t&&0<t.length?Q.a.createElement(Yc,{themeColor:s&&s[0]},a):null,Q.a.createElement(Uc,{id:"_MEIQIA_INPUT",value:l,handleInput:function(e){var t=e.target.value,n=e.target.selectionStart,e=e.target.selectionEnd;r(t),o({start:n,end:e}),ct.searchDebounce(t)},handleKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i());var t="";38===e.keyCode?t=ct.select("prev"):40===e.keyCode&&(t=ct.select("next")),t&&r(t)},handleKeyUp:function(e){var t=e.target.value.trim();2048<t.length&&(r(t.substr(0,2048)),Jn("最多只能发送 2048 个字符哦",3e3)),Vc(t);e=e.which||e.keyCode;38!==e&&40!==e&&ct.searchDebounce(t)},handleFocus:function(){"hoist"===vt.fixInput()&&e.dispatch(Oe(!0))},handleBlur:function(){vt.wxScroll(),vt.fixInputBlur(),setTimeout(function(){e.dispatch(Oe(!1)),ct.remove()},240)},handlePaste:function(e){Hc(e)},lineHeight:c,ref:d}))}),Kc=c.d.div.withConfig({displayName:"action-box__Container",componentId:"sc-13hjnnn-0"})(["width:100%;position:relative;box-sizing:border-box;padding:6px;"]),Jc=c.d.div.withConfig({displayName:"action-box__FinishTip",componentId:"sc-13hjnnn-1"})(["width:100%;height:100%;position:absolute;z-index:2;left:0;right:0;top:0;bottom:0;text-align:center;background:#fff;display:table;span{display:table-cell;vertical-align:middle;word-break:break-word;padding:0 20px;}"]),Zc=c.d.div.withConfig({displayName:"action-box__EmojiPanelWrap",componentId:"sc-13hjnnn-2"})(["position:absolute;top:-","px;z-index:12;left:0px;"],function(e){return e.emojiHeight}),Xc=c.d.a.withConfig({displayName:"action-box__Link",componentId:"sc-13hjnnn-3"})(["color:#4ca0ff;padding:0 5px;cursor:pointer;"]),es=c.d.div.withConfig({displayName:"action-box__DisabledBox",componentId:"sc-13hjnnn-4"})(["position:absolute;z-index:2;left:0;right:0;top:0;bottom:0;text-align:center;background-color:rgba(255,255,255,0.9);cursor:not-allowed;"]),ts=c.d.div.withConfig({displayName:"action-box__TooltipWrap",componentId:"sc-13hjnnn-5"})(["width:100%;display:flex;height:32px;line-height:32px;"]),ns=c.d.div.withConfig({displayName:"action-box__ButtonWrap",componentId:"sc-13hjnnn-6"})(["flex:0 0 60px;width:60px;"]),as=c.d.div.withConfig({displayName:"action-box__TextareaWrap",componentId:"sc-13hjnnn-7"})(["flex:1 1 auto;"]),is=c.d.div.withConfig({displayName:"action-box__OfflineWrap",componentId:"sc-13hjnnn-8"})(["width:100%;height:90px;"]),os=c.d.div.withConfig({displayName:"action-box__ReconnectBtn",componentId:"sc-13hjnnn-9"})(["margin-top:8px;width:100%;text-align:center;"]),rs=Object(i.b)(function(e){return{socket:e.getIn(["config","socket"]),reconnectTime:e.getIn(["config","reconnectTime"]),isReconnect:e.getIn(["config","isReconnect"])}},function(e){return{dispatch:e}})(function(e){function n(e){T(e),e?Dc("set",e):Dc("remove")}function t(e){(e=(e||I).trim())&&!v&&(o||Jn(B("连接已断开，请刷新页面"),0),Pc(e),n(""),ct.remove(),j({start:0,end:0}))}var a=e.isReconnect,i=e.reconnectTime,o=e.socket,r=e.themeColor,l=e.fontColor,c=e.inputDisabled,s=void 0!==c&&c,d=e.finish,u=e.showEvaluation,p=e.showEva,m=e.sendImage,g=e.videoEnabled,h=e.fileEnabled,f=e.uploadFile,b=e.checkSocket,v=e.blacklist,y=e.newConversation,x=e.toMessageBoard,w=e.showSupport,k=void 0!==w&&w,c=e.supportLink,w=void 0===c?"":c,e=Object(V.useState)(0),c=e[0],_=e[1],e=Object(V.useState)(!1),E=e[0],C=e[1],e=Object(V.useState)(function(){return Dc("get")||""}),I=e[0],T=e[1],e=Object(V.useState)({start:0,end:0}),S=e[0],j=e[1],N=Object(V.useRef)(null),O=Object(V.useRef)(null),M=window.parent.meiqia.event,B=Object($.c)()[0],e=Object(V.useCallback)(function(){return C(!E)},[C,E]);Object(V.useEffect)(function(){E&&_(N&&N.current.offsetHeight)},[E]);return!o&&a?Q.a.createElement(is,null,500!==i?Q.a.createElement(xc,{reconnectTime:i}):null,500!==i?Q.a.createElement(os,null,Q.a.createElement("a",{href:"javascript:void(0)",onClick:function(){M.emit("reconnect")}},B("立即重连"))):null):Q.a.createElement(Kc,null,Q.a.createElement($c,{sendMsg:t,setPos:j,setContent:n,content:I,inputRef:O}),Q.a.createElement(ts,null,Q.a.createElement(as,null,Q.a.createElement(Tc,{clickImage:b,clickFile:b,sendImage:m,uploadFile:f,showEva:p,showVideo:g,showFile:h,toggleEmojiPanel:e,showEvaluation:u})),Q.a.createElement(ns,null,Q.a.createElement(Oo,{"data-cy":"send-btn",bgColor:r,fontColor:l,handleClick:function(){return t()}},Q.a.createElement("span",null,B("发送"))))),E?Q.a.createElement(Zc,{emojiHeight:c,visible:E},Q.a.createElement(Mc,{ref:N,handleClick:function(e){var t=e.length;C(!1),n(""+I.slice(0,S.start)+e+I.slice(S.end)),j({start:S.start+t,end:S.start+t}),setTimeout(function(){var e=O.current.value;O.current.focus(),O.current.selectionStart=S.start+t,O.current.selectionEnd=S.start+t,2048<e.length&&(n(e.substr(0,2048)),Jn("最多只能发送 2048 个字符哦",3e3))},0)},themeColor:r})):null,s?Q.a.createElement(es,null):null,d?Q.a.createElement(Jc,null,Q.a.createElement("span",null,Q.a.createElement($.a,null,"对话已结束，您可以",Q.a.createElement(Xc,{onClick:y},"开始新的对话"),"或",Q.a.createElement(Xc,{onClick:x},"留言")))):null,v?Q.a.createElement(Jc,null,Q.a.createElement("span",null,B("抱歉，客服系统暂时无法使用"))):null,k?Q.a.createElement(_c,{link:w}):null)});function ls(e){return Q.a.createElement(Oo,J()({},e,{width:"100%"}))}var cs=c.d.div.withConfig({displayName:"question-btn__Btn",componentId:"sc-l343u5-0"})(["display:inline-block;height:34px;line-height:34px;width:128px;border:1px solid rgba(205,207,217,1);border-radius:17px;cursor:pointer;text-align:center;color:#6f7592;box-sizing:border-box;&.select{background:#eef0f6;border:1px rgba(0,0,0,0) solid;}i{font-size:13px;margin-right:6px;}"]);function ss(e){var t=void 0!==(n=e.resolved)&&n,n=void 0!==(o=e.selected)&&o,a=void 0===(o=e.value)?"":o,i=e.onClick,o=Object($.c)().t,e=Object(V.useCallback)(function(){i&&i(a)},[a,i]);return Q.a.createElement(cs,{className:n?"select":"",onClick:e},Q.a.createElement(ti,{type:t?"iconlike":"iconunlike"}),Q.a.createElement("span",null,o(t?"问题已解决":"问题未解决")))}var ds=c.d.div.withConfig({displayName:"evaluation__Container",componentId:"sc-4mk0t7-0"})(["position:relative;width:100%;height:100%;"]),us=c.d.div.withConfig({displayName:"evaluation__CloseBtn",componentId:"sc-4mk0t7-1"})(["position:absolute;right:10px;top:10px;width:20px;height:20px;"]),ps=c.d.div.withConfig({displayName:"evaluation__Header",componentId:"sc-4mk0t7-2"})(["padding:16px 30px 0 16px;box-sizing:border-box;width:100%;text-align:center;font-size:14px;color:#666;"]),ms=c.d.div.withConfig({displayName:"evaluation__Btns",componentId:"sc-4mk0t7-3"})(["text-align:center;margin-top:10px;"]),gs=c.d.div.withConfig({displayName:"evaluation__Btn",componentId:"sc-4mk0t7-4"})(["display:inline-block;width:60px;height:70px;margin:0 5px;border:1px solid #fff;cursor:pointer;color:#666;padding-top:10px;&:hover,&.selected{color:",";background-color:#f0f0f0;border-color:#f0f0f0;border-radius:3px;}p{padding-top:5px;}"],function(e){return e.color}),hs=c.d.div.withConfig({displayName:"evaluation__Content",componentId:"sc-4mk0t7-5"})(["padding:10px 20px 15px;"]),fs=c.d.textarea.withConfig({displayName:"evaluation__Textarea",componentId:"sc-4mk0t7-6"})(["width:100%;height:60px;padding:10px;box-sizing:border-box;overflow-y:auto;resize:none;outline:none;border:1px solid #ededed;"]),bs=Object(c.d)(ls).withConfig({displayName:"evaluation__Submit",componentId:"sc-4mk0t7-7"})(["margin-top:10px;"]),vs=Object(c.d)(Da).withConfig({displayName:"evaluation__Icon",componentId:"sc-4mk0t7-8"})(["cursor:pointer;"]),ys={height:"35px",fontColor:"#fff",bgColor:"#007aff"},xs=c.d.div.withConfig({displayName:"evaluation__GoodWrap",componentId:"sc-4mk0t7-9"})(["margin-top:16px;text-align:center;div{margin:0 6px;}"]);var ws=Object(i.b)(function(e){return{evaluation:e.get("evaluation")}},function(e){return{dispatch:e}})(function(e){var t=e.handleClose,n=e.handleSubmit,a=void 0===(g=e.promptText)?"":g,i=e.themeColor,o=e.fontColor,r=e.evaluation.get("problem_feedback"),l=(g=Object(V.useState)(""))[0],c=g[1],s=(e=Object(V.useState)(null))[0],d=e[1],u=(g=Object(V.useState)(void 0))[0],p=g[1],m=Object($.c)()[0],e=Object(V.useCallback)(function(e){p(e)},[]),g=Object(V.useCallback)(function(){[0,1,2].includes(s)?30<l.length?Jn(m("最多只能发送 30 个字哦"),3e3):n({level:s,content:l.trim(),resolved:u}):Jn(m("请选择评价等级"),3e3)},[s,l,n,u,m]);return Q.a.createElement(ds,null,Q.a.createElement(us,null,Q.a.createElement(vs,{handleClick:t,type:"close",width:"20px",height:"20px"})),Q.a.createElement(ps,null,a),"open"===r?Q.a.createElement(xs,null,Q.a.createElement(ss,{resolved:!0,selected:1===u,value:1,onClick:e}),Q.a.createElement(ss,{resolved:!1,selected:0===u,value:0,onClick:e})):null,Q.a.createElement(ms,null,Q.a.createElement(gs,{color:"#00ce7d",onClick:function(){return d(2)},className:2===s?"selected":""},Q.a.createElement(vs,{type:"eva-good",width:"40px",height:"40px"}),Q.a.createElement("p",null,m("好评"))),Q.a.createElement(gs,{color:"#ffb652",onClick:function(){return d(1)},className:1===s?"selected":""},Q.a.createElement(vs,{type:"eva-normal",width:"40px",height:"40px"}),Q.a.createElement("p",null,m("中评"))),Q.a.createElement(gs,{color:"#ff5c5e",onClick:function(){return d(0)},className:0===s?"selected":""},Q.a.createElement(vs,{type:"eva-bad",width:"40px",height:"40px"}),Q.a.createElement("p",null,m("差评")))),Q.a.createElement(hs,null,null!==s?Q.a.createElement(fs,{placeholder:m("请填写评价内容（选填）"),value:l,onBlur:vt.wxScroll,onChange:function(e){return c(e.target.value)}}):null,Q.a.createElement(bs,ua()({},ys,{handleClick:g,bgColor:i,fontColor:o}),Q.a.createElement("span",null,m("提交")))))}),ks=["closeEvaluation"],_s=c.d.div.withConfig({displayName:"evaluation__Mask",componentId:"sc-17nztew-0"})(["width:100%;height:100%;background:rgba(0,0,0,0.35);"]),Es=c.d.div.withConfig({displayName:"evaluation__EvaPanel",componentId:"sc-17nztew-1"})(["position:absolute;background:#fff;min-height:254px;z-index:600;"," ",""],function(e){return"fixed"===e.width?"width:320px;":"width:100%;"},function(e){return"center"===e.position?"top:50%;left:50%;transform: translate3d(-50%, -50%, 0);":"top:0;"});var Cs=Object(i.b)(function(e){return{message:e.get("message"),config:e.get("config")}},function(e){return{dispatch:e}})(function(i){var o=i.closeEvaluation,e=me()(i,ks),r=Object($.c)()[0];return Q.a.createElement(_s,null,Q.a.createElement(Es,i,Q.a.createElement(ws,ua()({},e,{handleClose:o,handleSubmit:function(t){var e,n,a;e=i.message.get("convId"),n=t,a=i.config.get("trackId"),X({url:"/conversation/"+e+"/evaluation?track_id="+a,method:"post",headers:{"content-type":"application/json"},data:n}).then(function(e){e.data.success?(e=r("好评"),0===t.level?e=r("差评"):1===t.level&&(e=r("中评")),e={id:+new Date,from_type:"evaluation",level:t.level,levelText:e,resolved:t.resolved,content:t.content},i.dispatch(xe(e)),an()):Jn("评价失败，请稍后重试",2e3)},function(){Jn("评价失败，请稍后重试",2e3)}).finally(function(){o()})}}))))}),Is=c.d.div.withConfig({displayName:"layout__Container",componentId:"sc-119t50m-0"})(["position:relative;background:#fcfcfc;flex:1 1 auto;height:100px;display:flex;"]),Ts=c.d.div.withConfig({displayName:"layout__MainContainer",componentId:"sc-119t50m-1"})(["width:100%;height:100%;display:flex;box-sizing:border-box;flex-direction:column;overflow:hidden;position:relative;background:#fcfcfc;"]),Ss=c.d.div.withConfig({displayName:"layout__TitleWrap",componentId:"sc-119t50m-2"})(["width:100%;"]),F=c.d.div.withConfig({displayName:"layout__Base",componentId:"sc-119t50m-3"})(["width:100%;height:100%;"]),js=c.d.div.withConfig({displayName:"layout__ContentWrap",componentId:"sc-119t50m-4"})(["flex:1 1 auto;width:100px;height:100%;"]),Ns=Object(c.d)(F).withConfig({displayName:"layout__MainPanel",componentId:"sc-119t50m-5"})(["display:flex;flex-direction:column;position:relative;"]),Os=c.d.div.withConfig({displayName:"layout__MsgWindowWrap",componentId:"sc-119t50m-6"})(["background:#fcfcfc;flex:1 1 auto;height:100px;position:relative;display:flex;flex-direction:column;"]),Ms=c.d.div.withConfig({displayName:"layout__InputWrap",componentId:"sc-119t50m-7"})(["width:100%;background:#fff;border-top:1px solid #ededed;"]),Bs=c.d.div.withConfig({displayName:"layout__PopPanel",componentId:"sc-119t50m-8"})(["position:absolute;z-index:100;left:0;right:0;bottom:0;top:0;overflow-y:auto;"]);function qs(e,t){return J()({themeColor:e.themeColor,fontColor:e.fontColor},t)}var zs={getTitleBar:function(e){return qs(e,{})},getMsgText:function(e){return qs(e,{})},getActionBox:function(e){return qs(e,{})},getEvaluation:function(e){return qs(e,{})}};function Ds(n,e){var a={};return e.forEach(function(e){var t=zs["get"+e];zs["get"+e]&&(a[e]=t(n))}),a}var Ps=c.d.div.withConfig({displayName:"chat-desktop-standard__SidePanelWrap",componentId:"sc-1a5eik6-0"})(["width:206px;flex:0 0 206px;border-left:1px solid #e8e8e8;"]);function As(e){var t=e.titleBar,n=e.evaluation,a=n.enable,i=n.promptText,o=n.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.support,d=e.extra,u=d.adImages,p=void 0===u?[]:u,m=d.quickImages,g=void 0===m?[]:m,h=d.questionList,n=void 0===h?[]:h,u=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),m=Object(V.useCallback)(function(){o(!1)},[o]),d=Object(V.useCallback)(function(){o(!0)},[o]),h=Object(V.useCallback)(function(e){Ac(e.question,e.id)},[]);return Object(V.useEffect)(function(){Mt.updatePosition()},[]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},u.TitleBar,t,{agentInfo:J()({},l,{avatar:""})}))),Q.a.createElement(Is,null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},r))),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},u.ActionBox,c,{showEvaluation:d,showSupport:s.showSupport,supportLink:s.supportLink})))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},u.Evaluation,{position:"center",width:"fixed",promptText:i,closeEvaluation:m}))):null),Q.a.createElement(Ps,null,Q.a.createElement(vc,{userInfo:l,themeColor:u.TitleBar.themeColor,onQuestionClick:h,questionList:n,adList:p,entryList:g}))))}var Ls=c.d.div.withConfig({displayName:"side-panel-full__Container",componentId:"sc-1uxf158-0"})(["width:100%;height:100%;background:#fff;position:relative;box-sizing:border-box;",";"],function(e){return e.bgColor?"background:"+e.bgColor+";":""}),Fs=c.d.div.withConfig({displayName:"side-panel-full__Content",componentId:"sc-1uxf158-1"})(["width:100%;height:330px;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;position:relative;z-index:1;"]),Rs=c.d.div.withConfig({displayName:"side-panel-full__Custom",componentId:"sc-1uxf158-2"})(["ul,ol{list-style:none;padding:5px 0;}"]),Us=c.d.div.withConfig({displayName:"side-panel-full__CustomContent",componentId:"sc-1uxf158-3"})(["padding:10px;"]),Hs=c.d.div.withConfig({displayName:"side-panel-full__UserContent",componentId:"sc-1uxf158-4"})(["padding:10px 10px 0 10px;"]),Ws=c.d.div.withConfig({displayName:"side-panel-full__BottomQuestionList",componentId:"sc-1uxf158-5"})(["position:absolute;bottom:0;left:0;width:100%;height:100%;padding-top:330px;box-sizing:border-box;"]),Gs=c.d.div.withConfig({displayName:"side-panel-full__BottomList",componentId:"sc-1uxf158-6"})(["border-top:1px solid rgba(225,229,240,1);"]);function Vs(e){var t=e.bgColor,n=e.userInfo,a=e.custom,i=e.showAvatar,o=e.themeColor,r=e.onQuestionClick,l=e.questionList,l=void 0===l?[]:l,e=e.entryList,c=void 0===e?[]:e,s=void 0===i||i,d=Object(V.useCallback)(function(e){r&&r(e)},[r]),e=!!l.length,i=Object(V.useMemo)(function(){var e=!c.length;return a||e?Q.a.createElement(Us,null,s?Q.a.createElement(Ql,n):null,a?Q.a.createElement(Rs,{dangerouslySetInnerHTML:{__html:a}}):null):Q.a.createElement(tc,{tabBarWidth:"33.33333333%",themeColor:o,style:{height:"100%"}},c.length?Q.a.createElement("div",{name:"快捷入口"},Q.a.createElement(lc,null,c.map(function(e,t){var n=e.image_url,a=e.label,e=e.url;return Q.a.createElement(rc,{key:t,themeColor:o,img:n,url:e,title:a})}))):null,Q.a.createElement("div",{name:"客服名片"},Q.a.createElement(Hs,null,s?Q.a.createElement(Ql,n):null)))},[a,c,s,n,o]);return Q.a.createElement(Ls,{bgColor:t},Q.a.createElement(Fs,{hasQuestion:e},i),e?Q.a.createElement(Ws,null,Q.a.createElement(Gs,null,Q.a.createElement(tc,{tabBarWidth:"33.33333333%"},Q.a.createElement("div",{name:"常见问题"},l.map(function(e){var t=e.id,n=e.question;return Q.a.createElement(sc,{key:t,onClick:d,themeColor:o,value:e,title:n})}))))):null)}var Qs=c.d.div.withConfig({displayName:"chat-desktop-standard-fullscreen__SidePanelWrap",componentId:"sc-1q8x7xt-0"})(["width:216px;flex:0 0 216px;border-left:1px solid #e8e8e8;"]),Ys=c.d.div.withConfig({displayName:"chat-desktop-standard-fullscreen__Left",componentId:"sc-1q8x7xt-1"})(["border-right:1px solid #e8e8e8;overflow:hidden;width:25%;flex:0 0 25%;"]);function $s(e){var t=e.titleBar,n=e.evaluation,a=n.enable,i=n.promptText,o=n.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.support,d=e.extra,u=d.fullAdImages,p=void 0===u?[]:u,m=d.quickImages,g=void 0===m?[]:m,h=d.questionList,f=void 0===h?[]:h,n=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),u=Object(V.useCallback)(function(){o(!1)},[o]),m=Object(V.useCallback)(function(){o(!0)},[o]),d=Object(V.useCallback)(function(e){Ac(e.question,e.id)},[]);Object(V.useEffect)(function(){Mt.updatePosition()},[]);h=!!p.length;return Q.a.createElement(Ts,{hasContact:l.hasContact},Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},n.TitleBar,t,{agentInfo:J()({},l,{avatar:""})}))),Q.a.createElement(Is,null,h?Q.a.createElement(Ys,{key:p},Q.a.createElement(Hl,{imgMode:"cover",height:"100%"},p.map(function(e,t){var n=e.image_url,e=e.url;return Q.a.createElement(Ul,{key:t,img:n,url:e})}))):null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},r))),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},n.ActionBox,c,{showEvaluation:m,showSupport:s.showSupport,supportLink:s.supportLink})))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},n.Evaluation,{position:"center",width:"fixed",promptText:i,closeEvaluation:u}))):null),Q.a.createElement(Qs,null,Q.a.createElement(Vs,{userInfo:l,themeColor:n.TitleBar.themeColor,onQuestionClick:d,questionList:f,entryList:g}))))}var Ks=c.d.div.withConfig({displayName:"top-modal__Header",componentId:"sc-1pvneac-0"})(["width:100%;height:60px;background:",";border-bottom:1px solid #eee;line-height:60px;text-align:center;font-size:16px;color:#fff;position:relative;span{position:absolute;right:12px;top:0px;}"],function(e){return e.themeColor}),Js=c.d.div.withConfig({displayName:"top-modal__Main",componentId:"sc-1pvneac-1"})(["width:100%;height:100%;background:rgba(0,0,0,0.3);position:fixed;z-index:100;top:0;left:0;"]),Zs=c.d.div.withConfig({displayName:"top-modal__Content",componentId:"sc-1pvneac-2"})(["width:100%;height:65%;background:#fff;overflow-y:auto;"]),H=function(e){var t=Object(V.useState)(!1),n=t[0],a=t[1],i=e.children,o=e.visible,r=e.onCancel,t=e.title,t=void 0===t?"常见问题":t,e=e.themeColor;Object(V.useEffect)(function(){void 0!==o&&a(o)},[o]);function l(e){r(e)}return n?Q.a.createElement(Js,null,Q.a.createElement(Ks,{themeColor:e},Q.a.createElement("div",null,t),Q.a.createElement("span",{onClick:function(){return l(!1)}},Q.a.createElement(ti,{type:"iconicon_open"}))),Q.a.createElement(Zs,null,i),Q.a.createElement("div",{style:{height:"100%",width:"100%"},onClick:function(){return l(!1)}})):Q.a.createElement(Q.a.Fragment,null)};H.defaultProps={onCancel:function(){return null}};var Xs=H,ed=c.d.div.withConfig({displayName:"chat-desktop-mini__BtnContainer",componentId:"sc-1mdwt15-0"})(["position:absolute;bottom:6px;right:12px;z-index:10;> div{float:left;}"]),td=c.d.div.withConfig({displayName:"chat-desktop-mini__QuestionButton",componentId:"sc-1mdwt15-1"})(["color:",";border-radius:16px;z-index:10;width:92px;height:32px;text-align:center;line-height:32px;background:#ffffff;margin-right:4px;box-shadow:0px 0px 8px 0px rgba(29,39,84,0.1);cursor:pointer;i,span{vertical-align:middle;}"],function(e){return e.theme.panel.themeColor}),nd=c.d.div.withConfig({displayName:"chat-desktop-mini__QuestionList",componentId:"sc-1mdwt15-2"})(["> div{color:#6f7592;line-height:36px;font-size:14px;border-bottom:1px solid #eee;padding:0 12px;cursor:pointer;}"]);function ad(e){var t,a,n=e.titleBar,i=e.evaluation,o=i.enable,r=i.promptText,l=i.setEvaluation,c=e.msgWindow,s=e.agentInfo,d=e.actionTooltip,u=e.extra,p=e.support,m=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),g=m.ActionBox.themeColor,h=u.questionList,f=Object(V.useState)(!1),b=f[0],v=f[1],i=Object(V.useCallback)(function(){l(!1)},[l]),u=Object(V.useCallback)(function(){l(!0)},[l]),f=!!h.length;return Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},m.TitleBar,n,{agentInfo:s}))),Q.a.createElement(Is,null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},c)),Q.a.createElement(ed,null,f?Q.a.createElement(td,{onClick:function(){return v(!0)}},"常见问题"):null)),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},m.ActionBox,d,{showEvaluation:u,showSupport:p.showSupport,supportLink:p.supportLink})))),o?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},m.Evaluation,{position:"top",width:"auto",promptText:r,closeEvaluation:i}))):null)),Q.a.createElement(Xs,{visible:b,themeColor:g,onCancel:function(){return v(!1)}},Q.a.createElement(nd,{themeColor:g},(a=[],(t=h)&&ge()(t)&&t.forEach(function(e){var t=e.id,n=e.question;a.push(Q.a.createElement("div",{key:t,onClick:function(){v(!1),Ac(n,t)}},n))}),a))))}function id(e){var t=e.titleBar,n=e.evaluation,a=n.enable,i=n.promptText,o=n.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.support,d=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),u=Object(V.useCallback)(function(){o(!1)},[o]),n=Object(V.useCallback)(function(){o(!0)},[o]);return Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},d.TitleBar,t,{agentInfo:l}))),Q.a.createElement(Is,null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},r))),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},d.ActionBox,c,{showEvaluation:n,showSupport:s.showSupport,supportLink:s.supportLink}))))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},d.Evaluation,{position:"center",width:"auto",promptText:i,closeEvaluation:u}))):null))}var od=c.d.div.withConfig({displayName:"chat-desktop-custom__SidePanelWrap",componentId:"sc-1ayd97u-0"})(["width:200px;flex:0 0 200px;border-left:1px solid #e8e8e8;"]);function rd(e){var t=e.titleBar,n=e.evaluation,a=n.enable,i=n.promptText,o=n.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.support,d=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),u=e.panel,p=u.customer_content,m=u.customer_photo_type,n=Object(V.useCallback)(function(){o(!1)},[o]),u=Object(V.useCallback)(function(){o(!0)},[o]);return Object(V.useEffect)(function(){Mt.updatePosition()},[]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},d.TitleBar,t,{agentInfo:J()({},l,{avatar:"small"===m?l.avatar:""})}))),Q.a.createElement(Is,null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},r))),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},d.ActionBox,c,{showEvaluation:u,showSupport:s.showSupport,supportLink:s.supportLink})))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},d.Evaluation,{position:"center",width:"fixed",promptText:i,closeEvaluation:n}))):null),Q.a.createElement(od,null,Q.a.createElement(vc,{userInfo:{avatar:l.avatar,name:l.name},showAvatar:"big"===m,custom:p,bgColor:e.styles.panel.profileBgColor}))))}n("YJVH");var ld=function(e,t){return X({url:"/v1/user/customer_data",method:"get",params:{track_id:e,visit_id:t}})},cd=c.d.div.withConfig({displayName:"chat-desktop-iframe__SidePanelWrap",componentId:"sc-j9nyuo-0"})(["width:206px;flex:0 0 206px;border-left:1px solid #e8e8e8;"]);function sd(e){var t=e.titleBar,n=e.evaluation,a=n.enable,i=n.promptText,o=n.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.support,d=e.extra,u=e.iframeInfo,p=Object(V.useState)(""),n=p[0],m=p[1],p=Object(V.useState)({}),g=p[0],h=p[1],f=u.trackId,b=u.visitId,v=u.convId,p=d.iframeConfig,u=(p=void 0===p?{}:p).url,y=void 0===u?"":u,d=p.params,x=void 0===d?[]:d,u=Ds(e.styles.panel,["TitleBar","ActionBox","Evaluation"]),p=Object(V.useCallback)(function(){o(!1)},[o]),d=Object(V.useCallback)(function(){o(!0)},[o]);return Object(V.useEffect)(function(){Mt.updatePosition()},[]),Object(V.useEffect)(function(){var t;y&&(t=new window.URL(y),x&&0<x.length?(x.forEach(function(e){switch(e){case"track_id":t.searchParams.append(e,f);break;case"conv_id":t.searchParams.append(e,v);break;default:t.searchParams.append(e,g[e]||null)}}),m(t.toString())):m(y))},[y,x,f,v,g]),Object(V.useEffect)(function(){x.every(function(e){return"track_id"===e||"conv_id"===e})||f&&b&&ld(f,b).then(function(e){e&&e.data&&(e=(e.data||{}).user_data,h(void 0===e?{}:e))})},[x,f,b]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},u.TitleBar,t,{agentInfo:l}))),Q.a.createElement(Is,null,Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,null,Q.a.createElement(rl,ua()({styles:e.styles},r))),Q.a.createElement(Ms,null,Q.a.createElement(rs,ua()({},u.ActionBox,c,{showEvaluation:d,showSupport:s.showSupport,supportLink:s.supportLink})))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},u.Evaluation,{position:"center",width:"fixed",promptText:i,closeEvaluation:p}))):null),Q.a.createElement(cd,null,Q.a.createElement(vc,{userInfo:l,themeColor:u.TitleBar.themeColor,iframeUrl:n}))))}var dd=c.d.div.withConfig({displayName:"mobile-question-list__Content",componentId:"sc-1538gtp-0"})(["height:24px;line-height:24px;box-sizing:border-box;font-size:0;overflow-y:hidden;overflow-x:auto;position:relative;word-break:break-all;white-space:nowrap;ul{display:block;word-break:keep-all;white-space:nowrap;box-sizing:border-box;height:24px;padding:8px 0 0 16px;}"]),ud=c.d.div.withConfig({displayName:"mobile-question-list__Item",componentId:"sc-1538gtp-1"})(["display:inline-block;font-size:12px;border:1px solid ",";color:",";height:20px;line-height:20px;border-radius:2px;margin-right:8px;padding:0 8px;"],function(e){return e.themeColor},function(e){return e.themeColor});function pd(e){var t=e.children,e=Object(V.useRef)(null);return Q.a.createElement(dd,{ref:e},t)}function md(e){var t=e.children,n=e.themeColor,a=e.value,i=e.onClick,e=Object(V.useCallback)(function(){i&&i(a)},[i,a]);return Q.a.createElement(ud,{themeColor:n,onClick:e},t)}function gd(e){return Q.a.createElement(Oo,J()({bgColor:"transparent",fontColor:"initial"},e,{width:"auto",height:"auto"}))}var hd=c.d.div.withConfig({displayName:"action-box-mobile__Container",componentId:"sc-erl9tf-0"})(["width:100%;position:relative;box-sizing:border-box;padding:6px 6px 0 6px;margin-bottom:12px;"]),fd=c.d.div.withConfig({displayName:"action-box-mobile__FinishTip",componentId:"sc-erl9tf-1"})(["width:100%;height:100%;position:absolute;z-index:2;left:0;right:0;top:0;bottom:0;text-align:center;background:#fff;display:table;span{display:table-cell;vertical-align:middle;word-break:break-word;padding:0 20px;}"]),bd=c.d.div.withConfig({displayName:"action-box-mobile__TooltipWrap",componentId:"sc-erl9tf-2"})(["width:100%;display:flex;height:32px;line-height:32px;"]),vd=c.d.div.withConfig({displayName:"action-box-mobile__ButtonWrap",componentId:"sc-erl9tf-3"})(["flex:0 0 60px;width:60px;margin-left:6px;a{display:block;}"]),yd=c.d.div.withConfig({displayName:"action-box-mobile__TextareaWrap",componentId:"sc-erl9tf-4"})(["flex:1 1 auto;width:100px;"]),xd=c.d.div.withConfig({displayName:"action-box-mobile__EmojiPanelWrap",componentId:"sc-erl9tf-5"})(["position:absolute;top:-","px;z-index:12;left:0;box-sizing:border-box;"],function(e){return e.emojiHeight}),wd=c.d.a.withConfig({displayName:"action-box-mobile__Link",componentId:"sc-erl9tf-6"})(["color:#4ca0ff;padding:0 5px;cursor:pointer;"]),kd=c.d.div.withConfig({displayName:"action-box-mobile__DisabledBox",componentId:"sc-erl9tf-7"})(["position:absolute;z-index:2;left:0;right:0;top:0;bottom:0;text-align:center;background-color:rgba(255,255,255,0.9);cursor:not-allowed;"]),_d=c.d.div.withConfig({displayName:"action-box-mobile__OfflineWrap",componentId:"sc-erl9tf-8"})(["width:100%;height:90px;"]),Ed=c.d.div.withConfig({displayName:"action-box-mobile__ReconnectBtn",componentId:"sc-erl9tf-9"})(["margin-top:8px;width:100%;text-align:center;"]),Cd=Object(i.b)(function(e){return{socket:e.getIn(["config","socket"]),reconnectTime:e.getIn(["config","reconnectTime"]),isReconnect:e.getIn(["config","isReconnect"])}},function(e){return{dispatch:e}})(function(e){function n(e){T(e),e?Dc("set",e):Dc("remove")}function t(e){(e=(e||I).trim())&&!b&&(o||Jn(B("连接已断开，请刷新页面"),0),Pc(e),n(""),ct.remove(),j({start:0,end:0}))}var a=e.isReconnect,i=e.reconnectTime,o=e.socket,r=e.themeColor,l=e.inputDisabled,c=void 0!==l&&l,s=e.finish,d=e.showEvaluation,u=e.showEva,p=e.sendImage,m=e.videoEnabled,g=e.fileEnabled,h=e.uploadFile,f=e.checkSocket,b=e.blacklist,v=e.newConversation,y=e.toMessageBoard,x=e.questionList,w=void 0===x?[]:x,k=e.fontColor,l=Object(V.useState)(0),x=l[0],_=l[1],e=Object(V.useState)(!1),E=e[0],C=e[1],l=Object(V.useState)(""),I=l[0],T=l[1],e=Object(V.useState)({start:0,end:0}),S=e[0],j=e[1],N=Object(V.useRef)(null),O=Object(V.useRef)(null),M=window.parent.meiqia.event,B=Object($.c)()[0],q=Object(V.useCallback)(function(e){Ac(e.question,e.id)},[]),l=Object(V.useCallback)(function(){return C(!E)},[C,E]),e=!!w.length;return Object(V.useEffect)(function(){E&&_(N&&N.current.offsetHeight)},[E]),!o&&a?Q.a.createElement(_d,null,500!==i?Q.a.createElement(xc,{reconnectTime:i}):null,500!==i?Q.a.createElement(Ed,null,Q.a.createElement("a",{href:"javascript:void(0)",onClick:function(){M.emit("reconnect")}},B("立即重连"))):null):Q.a.createElement(hd,null,e?Q.a.createElement(pd,null,w.map(function(e){var t=e.id,n=e.question;return Q.a.createElement(md,{key:t,themeColor:r,onClick:q,value:e},n)})):null,Q.a.createElement("div",{style:{padding:"6px 0"}},Q.a.createElement(Tc,{clickImage:f,clickFile:f,sendImage:p,uploadFile:h,showEva:u,showVideo:m,showFile:g,toggleEmojiPanel:l,showEvaluation:d})),Q.a.createElement(bd,null,Q.a.createElement(yd,null,Q.a.createElement($c,{lineHeight:"20px",sendMsg:t,setPos:j,setContent:n,content:I,inputRef:O})),Q.a.createElement(vd,null,Q.a.createElement(gd,{bgColor:r,fontColor:k,fontSize:"14px",handleClick:function(){return t()}},Q.a.createElement("span",null,B("发送"))))),E?Q.a.createElement(xd,{emojiHeight:x},Q.a.createElement(Mc,{ref:N,handleClick:function(e){var t=e.length;C(!1),n(""+I.slice(0,S.start)+e+I.slice(S.end)),j({start:S.start+t,end:S.start+t}),O.current.focus(),setTimeout(function(){var e=O.current.value;O.current.selectionStart=S.start+t,O.current.selectionEnd=S.start+t,2048<e.length&&(n(e.substr(0,2048)),Dc("set",I),Jn("最多只能发送 2048 个字符哦",3e3))},0)},themeColor:r})):null,c?Q.a.createElement(kd,null):null,s?Q.a.createElement(fd,null,Q.a.createElement("span",null,Q.a.createElement($.a,null,"对话已结束，您可以",Q.a.createElement(wd,{onClick:v},"开始新的对话"),"或",Q.a.createElement(wd,{onClick:y},"留言")))):null,b?Q.a.createElement(fd,null,Q.a.createElement("span",null,B("抱歉，客服系统暂时无法使用"))):null)});function Id(e){var t=e.inputting,n=e.titleBar,a=(m=e.evaluation).enable,i=m.promptText,o=m.setEvaluation,r=e.msgWindow,l=e.agentInfo,c=e.actionTooltip,s=e.styles,d=e.support,u=void 0===(g=e.extra.questionList)?[]:g,p=Ds(s.panel,["TitleBar","ActionBox","Evaluation"]),m=Object(V.useCallback)(function(){o(!1)},[o]),e=Object(V.useCallback)(function(){o(!0)},[o]),g=!!u.length;return Q.a.createElement(Ts,{hasContact:l.hasContact},Q.a.createElement(Ss,null,Q.a.createElement(zl,ua()({},p.TitleBar,n,{agentInfo:J()({},l,{avatar:""})}))),Q.a.createElement(Is,{showCallbackBtn:!1},Q.a.createElement(js,null,Q.a.createElement(Ns,null,Q.a.createElement(Os,{hasQuestion:g,styles:s,inputting:t},Q.a.createElement(rl,ua()({styles:s},r))),Q.a.createElement(Ms,null,Q.a.createElement(Cd,ua()({},c,p.ActionBox,{showEvaluation:e,questionList:u,showSupport:d.showSupport,supportLink:d.supportLink})))),a?Q.a.createElement(Bs,null,Q.a.createElement(Cs,ua()({},p.Evaluation,{position:"top",width:"auto",promptText:i,closeEvaluation:m}))):null)))}var Td=window.parent.meiqia.event,Sd=function(t,e,n){var n=void 0===n?{}:n,a=n.success,i=n.error,n=(new Date).valueOf(),o=Ge.getState().get("config").get("entId"),r={id:n,content:e.content,extra:{next_node_id:e.next_node_id},type:"text",content_type:"text",action:"message"},l=Jt({msg:r});setTimeout(function(){t(xe(J()({},l,{from_type:"client"})));function e(e){e.success?a&&E(a)&&a(J()({success:!0},e)):i&&E(i)&&i(J()({success:!1},e))}31991===o?(Td.on("client_send_msg",e),Kt(r)):Kt(r).then(e),an()},300)},jd=function(t,n,e){var a=e.visitId,i=e.trackId,o=e.convId,r=e.cardType,l=e.data,e=e.extraData;return a=a,o=o,l=l,e=e,void 0===(r=r)&&(r="client_card"),X({url:"/client/"+i+"/reply_card",method:"post",data:J()({visit_id:a,conv_id:o,card_type:r,attrs:l},e)}).then(function(e){e.data.success&&n(ke(t))})};var Nd=Object(c.e)(Object(i.b)(function(e){return{convId:e.getIn(["message","convId"]),queue:e.getIn(["message","queue"]),scheduling:e.getIn(["message","scheduling"]),noMsgFilter:e.getIn(["message","noMsgFilter"]),enterpriseInfoForAgent:e.getIn(["message","enterpriseInfoForAgent"]),agentInfo:e.getIn(["message","agentInfo"]),agentInputing:e.getIn(["message","agentInputing"]),inputting:e.getIn(["message","inputting"]),blacklist:e.getIn(["message","blacklist"]),inputDisabled:e.getIn(["message","inClue"]),startBySmartGuide:e.getIn(["message","startBySmartGuide"]),chatHasEnd:e.getIn(["message","chatHasEnd"]),scheduler:e.getIn(["message","scheduler"]),evaluationActive:e.getIn(["message","evaluationActive"]),ringEnabled:e.getIn(["message","ringEnabled"]),videoEnabled:e.getIn(["message","videoEnabled"]),fileEnabled:e.getIn(["message","fileEnabled"]),chatEndStatus:"open"===e.getIn(["message","enterpriseInfo","prompt_status"]),templateId:e.getIn(["message","templateId"]),entId:e.getIn(["config","entId"]),visitId:e.getIn(["config","visitId"]),trackId:e.getIn(["config","trackId"]),socket:e.getIn(["config","socket"]),standalone:e.getIn(["config","standalone"]),disableBrandLink:e.getIn(["config","disableBrandLink"]),showSwitch:e.getIn(["robot","show_switch"]),callback:e.get("call"),custom:e.get("theme"),evaConfig:e.get("evaluation")}},function(e){return{dispatch:e}})(function(i){var n=i.dispatch,o=i.convId,e=i.queue,t=i.scheduling,a=i.noMsgFilter,r=i.enterpriseInfoForAgent,l=i.agentInfo,c=i.agentInputing,s=i.inputting,d=i.blacklist,u=i.chatHasEnd,p=i.evaluationActive,m=i.ringEnabled,g=i.videoEnabled,h=i.fileEnabled,f=i.inputDisabled,b=i.startBySmartGuide,v=i.templateId,y=i.chatEndStatus,x=i.entId,w=i.visitId,k=i.trackId,_=i.socket,E=i.standalone,C=i.disableBrandLink,I=i.showSwitch,T=i.callback,S=i.theme,j=i.custom,N=Object($.c)()[0],O=E?i.custom.getIn(["standalone","desktop"]):i.custom.getIn(["desktop","panel"]),M=c?""+N("对方输入消息中..."):"",B=Object(V.useMemo)(function(){return Object(ae.mergeDeep)({},S,xl(j,E))},[S,j,E]),q=Object(V.useMemo)(function(){return function(e,t,n){var a=vl?"mobile":"desktop",i=n?e.getIn(["standalone",a]):e.getIn([a,"panel"]);if(!i)return{};var o=i,r=o.adImages,l=void 0===r?[]:r,c=o.questionList,s=void 0===c?[]:c,d=o.fullAdImages,e=o.quickImages,i=void 0===e?[]:e,r=o.questionEnable,c=void 0!==r&&r,e=o.quickEnable,r=void 0!==e&&e,e=o.adEnable,e=void 0!==e&&e,o=o.iframeConfig,o=void 0===o?{}:o;return n?{device:a,fullAdImages:void 0===d?[]:d,adImages:e?l:[],questionList:c&&t?_l(s):[],quickImages:r?i:[]}:{device:a,adImages:e?l:[],questionList:c&&t?_l(s):[],quickImages:r?i:[],iframeConfig:o}}(j,i.scheduler,E)},[j,i.scheduler,E]),z=Object(V.useMemo)(function(){var a;return(a=e).map(function(n){if(n&&n.extra&&n.extra.reply_msg_id){var t=n.extra.reply_msg_id;if(t){var e=a.find(function(e){return e.id===t});if(e)return J()({},n,{customExtra:J()({},n.customExtra,{remindMessage:e,remindMessageId:t})})}}if(n&&n.extra&&"mpush_clue"===n.extra.conv_type&&"client_card"===n.content[0].type){e=[{type:"client_card",body:n.content[0].content.map(function(e){var t=e.name,e=J()({},e);return Ln[t]&&(e.displayName=Ln[t]),n.content[0].node_id&&(e.node_id=n.content[0].node_id),e})}];return J()({},n,{content:e})}return n}).filter(function(e){return!(e.extra&&e.extra.is_withdrawn)})},[e]),D=Object(V.useMemo)(function(){return{name:""+(M||l.name),avatar:l.avatar,signature:l.signature,artificial:l.isBot,tel:l.tel,cellphone:l.cellphone,email:l.email,qq:l.qq,weixin:l.weixin,hasContact:l.tel||l.cellphone||l.qq||l.weixin}},[M,l]),P=(W=Object(V.useState)({}))[0],A=W[1],L=N("[[聊天链接]]"),F=Object(V.useCallback)(function(e,t,n,a){a=a.node_id?J()({},a,{template_id:v}):a;return jd(e,i.dispatch,{convId:o,visitId:w,trackId:k,cardType:t,data:n,extraData:a})},[o,i.dispatch,k,w,v]),R=Object(V.useCallback)(function(e){Pc(e)},[]),U=Object(V.useCallback)(function(e){X({url:"/client/file_downloaded",method:"POST",headers:{"content-type":"application/json"},data:{ent_id:x,track_id:k,conversation_id:o,msg_id:e}})},[o,x,k]),H=Object(V.useCallback)(function(){Ht(!1)},[]),c=Object(V.useCallback)(function(e){n(je(!!e)),ee("set","MEIQIA_RING",e?"TRUE":"FALSE")},[n]),W=E?"close"===j.getIn(["standalone","removeBrand"]):"close"===j.get("removeBrand"),G={standalone:E,styles:B,extra:q,inputting:s,support:{showSupport:W,supportLink:C?"":""+L+x},evaluation:{enable:!1,setEvaluation:function(e){i.dispatch(ye({evaluationActive:e}))},promptText:i.evaConfig.get("prompt_text"),problemFeedback:i.evaConfig.get("problem_feedback")},callback:{captcha:"open"===T.get("callback_captcha"),showCallbackBtn:"open"===T.get("callback")&&T.get("panelCallbackBtn"),showCallbackPanal:T.get("showCallbackPanal"),setCallback:function(e){i.dispatch(Fe({showCallbackPanal:e}))}},agentInfo:a?r:{},actionTooltip:{videoEnabled:g,fileEnabled:h,inputDisabled:f,checkSocket:function(e){_||(e.preventDefault(),Jn(N("连接已断开，请刷新页面"),0))},sendImage:function(e){var t;e.target.value&&(e=(e=(t=e).target.value.split("."))[e.length-1].toLowerCase(),["png","jpg","jpeg","gif"].includes(e)?(e={id:Math.random(),from_type:"client",content_type:"photo",status:"sending",media_url:Ar.a,file:t.target.files[0]},t.target.value="",Ur(e)):Jn(Y.a.t("只能发送图片哦")+"（png/jpg/jpeg/gif）",5e3))},uploadFile:function(e,t){e.target.value&&function(e,t){void 0===t&&(t="file");var o,r,n=Ge.getState().getIn(["config","entId"]),a=e.target.files[0];5e7<a.size?Jn(Y.a.t("只能发送小于 50MB 的文件哦"),5e3):(o=Math.random(),r={id:o,from_type:"client",content_type:t,status:"sending",file:a,_fileStatus:"uploading",_speed:zr(0),extra:{filename:a.name,size:a.size,type:Pr(a.type)}},e.target.value="",Dr(r),("video"===t?ne:te)(n,{filename:a.name,content_type:t}).then(function(i){var a,e;i.data&&(a=Bt()(),e={url:i.data.policy.url,method:"post",data:{msg:r,fields:i.data.policy.fields},cancelToken:new Ze.a.CancelToken(function(e){r._cancelToken=e}),onUploadProgress:function(e){var t=e.position||e.loaded,n=e.totalSize||e.total,e=(Bt()()-a)/1e3,e=zr(e?t/e:0);r._fileStatus="uploading",r._progress=100*t/n,r._speed=e+"/s",Dr(r,o)}},Z(e,"uploadFile").then(function(){var e=Ge.getState(),t=Ge.dispatch,n=e.get("message"),a=[].concat(n.get("fakeMsg")),e={};r._fileStatus="success",r.content=i.data.policy.fields.key,r.extra.expire_at=yr((new Date).setDate((new Date).getDate()+1)),r.media_url=i.data.file_url,r.extra.thumb_url=i.data.file_url+"?x-oss-process=video/snapshot,t_0,f_jpg,w_0,h_0,ar_auto",n.get("schedulerAfterClientSendMsg")&&!n.get("scheduler")?(wn(),a.push(r),e.fakeMsg=a,e.schedulerMsg=!0,e.schedulerAfterClientSendMsg=!1,t(ye(e))):n.get("chatHasEnd")?(wn(),a.push(r),e.fakeMsg=a,e.schedulerMsg=!0,t(ye(e))):(Dr(r,o),Kt(r))},function(e){e&&"cancel"===e.message||(r._fileStatus="fail",Dr(r,o))}))}))}(e,t)},newConversation:function(){i.dispatch(Ne("newConv")),wn()},toMessageBoard:function(){Gt("messageBoard")}},msgWindow:{msgs:[],handleRedirect:Un,handleImgOnload:Qt,handleRedirectTicket:function(){Gt("messageBoard")},scrollToBottom:an,handleImagePreview:kl,handleMenuClick:R,handleCardSubmit:F,handleFileDownload:U,windowType:i.type,sendSmartGuideOption:function(e){var t=e.content,e=e.next_node_id;Sd(n,{content:t,next_node_id:e})}},titleBar:{connecting:t,showBack:ut.isMobile()&&!!E&&(!window.history||1<window.history.length),showSwitch:I,ringEnabled:m,closeEnabled:!E,closeText:ut.isMobile()?N("关闭"):null,handleClose:H,handleRing:c,handleRedirect:Un}};return Object(V.useEffect)(function(){var e={evaluation:{enable:p},msgWindow:{msgs:z},actionTooltip:{blacklist:d,finish:u&&(y||b),showEva:!l.isBot},titleBar:{showSwitch:I&&(!l||l.isBot)}};l.name&&(e.agentInfo=D),A(e)},[p,z,l,M,d,u,y,I,D,b]),function(e){switch(K()(P).forEach(function(e){"agentInfo"===e?P.agentInfo&&(G.agentInfo=P.agentInfo):G[e]&&P[e]&&J()(G[e],P[e])}),e){case"desktop.standard":return Q.a.createElement(As,G);case"desktop.standard.full":return Q.a.createElement($s,G);case"desktop.mini":return Q.a.createElement(ad,G);case"desktop.edge":return Q.a.createElement(id,G);case"desktop.custom":return Q.a.createElement(rd,ua()({panel:O},G));case"desktop.iframe":var t={convId:o,visitId:w,trackId:k};return Q.a.createElement(sd,ua()({},G,{iframeInfo:t}));case"mobile":return Q.a.createElement(Id,G);default:return Q.a.createElement(As,G)}}(i.type)})),Od=c.d.div.withConfig({displayName:"category__Container",componentId:"sc-qhan5i-0"})(["width:100%;height:100%;overflow-y:auto;"]),Md=c.d.div.withConfig({displayName:"category__Title",componentId:"sc-qhan5i-1"})(["padding:16px;font-size:12px;color:#666;word-break:break-all;"]),Bd=c.d.ul.withConfig({displayName:"category__List",componentId:"sc-qhan5i-2"})(["list-style:none;background:#fff;li{margin:0;box-shadow:0 -1px 0 0 rgba(0,0,0,0.04);}li > div{padding:14px;cursor:pointer;}a{text-align:left;}"]);function qd(e){var t=e.title,n=e.assignments,a=e.handleCategory;return Q.a.createElement(Od,null,Q.a.createElement(Md,null,t),Q.a.createElement(Bd,null,n.map(function(e,t){return Q.a.createElement("li",{key:t},Q.a.createElement("div",{onClick:function(){return a(e)}},Q.a.createElement(gd,{fontColor:"#6088e6",data:e},Q.a.createElement("span",null,e.description))))})))}var zd=["imgUrl","className","handleClick"],Dd=c.d.div.withConfig({displayName:"captcha__Container",componentId:"sc-1vo1t5l-0"})(["width:",";height:",";"],function(e){return e.width},function(e){return e.height}),Pd=c.d.img.withConfig({displayName:"captcha__Img",componentId:"sc-1vo1t5l-1"})(["display:inline-block;width:100%;height:100%;"]);function Ad(e){var t=e.imgUrl,n=e.className,a=e.handleClick,e=me()(e,zd);return Q.a.createElement(Dd,ua()({},e,{className:n,onClick:a}),Q.a.createElement(Pd,{src:t}))}function Ld(){return X({url:"/captchas?v="+Bt()(),method:"post"}).then(function(e){return e},function(){Jn("获取验证码失败",3e3)})}var Fd=["handleToken","refreshToken"],F=function(e){var t=e.handleToken,n=e.refreshToken,a=me()(e,Fd),i=Object(V.useState)(""),e=i[0],o=i[1],i=Object(V.useCallback)(function(){Ld().then(function(e){o(M.defaults+e.data.captcha_image_url),t&&t(e.data.captcha_token)})},[t]);return Object(V.useEffect)(function(){Ld().then(function(e){o(M.defaults+e.data.captcha_image_url),t&&t(e.data.captcha_token)})},[t,n]),Q.a.createElement(Ad,ua()({width:"80px",height:"40px"},a,{imgUrl:e,handleClick:i}))},Rd=c.d.div.withConfig({displayName:"user-form__Container",componentId:"sc-163y00h-0"})(["width:100%;height:100%;overflow-y:auto;padding:0 16px;box-sizing:border-box;"]),Ud=c.d.div.withConfig({displayName:"user-form__Title",componentId:"sc-163y00h-1"})(["padding:16px 0;font-size:12px;color:#666;word-break:break-all;"]),Hd=c.d.ul.withConfig({displayName:"user-form__List",componentId:"sc-163y00h-2"})(["list-style:none;li{margin-bottom:16px;}.name{padding:0 0 6px 0;color:#444;font-size:12px;span{padding:0 3px;color:#ff5c5e;}}"]),Wd=c.d.input.withConfig({displayName:"user-form__Input",componentId:"sc-163y00h-3"})(["width:100%;height:auto;padding:4px 6px;border:1px solid #ddd;line-height:26px;border-radius:4px;"]),Gd=c.d.div.withConfig({displayName:"user-form__CaptchaWrap",componentId:"sc-163y00h-4"})(["width:100%;padding-right:80px;margin-bottom:16px;box-sizing:border-box;position:relative;"]),Vd=Object(c.d)(F).withConfig({displayName:"user-form__CaptchaImg",componentId:"sc-163y00h-5"})(["position:absolute;right:0;top:0;bottom:0;"]),Qd=c.d.label.withConfig({displayName:"user-form__InputItem",componentId:"sc-163y00h-6"})(["display:block;box-sizing:border-box;width:100%;height:auto;padding:12px;background:#fff;box-shadow:0 -1px 0 0 rgba(0,0,0,0.04);cursor:pointer;input{margin-right:10px;}"]),Yd=c.d.div.withConfig({displayName:"user-form__DateWrap",componentId:"sc-163y00h-7"})(["input{height:37px;width:100%;}"]);function $d(e){function n(e,t){var n=J()({},u);n[e]=t,p(n)}function a(e){var t=(i=e.target).type,n=i.checked,e=i.name,a=i.value,i=J()({},u);"radio"===t&&n?i[e]=a:"checkbox"===t&&(i[e]=i[e]||[],n?i[e].push(a):(n=i[e].findIndex(function(e){return e===a}),i[e].splice(n,1))),p(i)}var t=e.title,i=e.captcha,o=e.fields,r=e.handleUserForm,l=e.fontColor,c=e.bgColor,s=Object($.c)()[0],d=Object(V.useState)({}),u=d[0],p=d[1],e=Object(V.useState)(""),m=e[0],d=e[1],e=Object(V.useState)(""),g=e[0],h=e[1],e=Object(V.useCallback)(function(){return r(u,{captchaToken:m,captchaValue:g})},[r,u,m,g]);return Q.a.createElement(Rd,null,Q.a.createElement(Ud,null,t),Q.a.createElement(Hd,null,o.map(function(e){return Q.a.createElement("li",{key:e.field_name},Q.a.createElement("div",{className:"name"},e.display_name,!e.optional&&Q.a.createElement("span",null,"*")),function(t){switch(t.type){case"text":case"number":return Q.a.createElement(Wd,{type:"text",placeholder:s("请输入"),name:t.field_name,onBlur:vt.wxScroll,onChange:function(e){return n(t.field_name,e.target.value)}});case"single_choice":return Q.a.createElement("div",null,t.choices.map(function(e){return Q.a.createElement(Qd,{key:e},Q.a.createElement("input",{type:"radio",name:t.field_name,value:e,onChange:a}),e)}));case"multiple_choice":return Q.a.createElement("div",null,t.choices.map(function(e){return Q.a.createElement(Qd,{key:e},Q.a.createElement("input",{type:"checkbox",name:t.field_name,value:e,onChange:a}),e)}));case"datetime":return Q.a.createElement(Yd,null,Q.a.createElement(cr,{value:u[t.field_name],styles:{height:"37px",border:"none",padding:"0 12px","box-shadow":"none"},name:t.field_name,handleChange:function(e){n(t.field_name,e)}}));default:return Q.a.createElement("div",null)}}(e))}),i?Q.a.createElement("li",{key:"captcha"},Q.a.createElement("div",{className:"name"},s("验证码"),Q.a.createElement("span",null,"*")),Q.a.createElement(Gd,null,Q.a.createElement(Wd,{type:"text",name:"captcha",autoComplete:"false",value:g||"",onBlur:vt.wxScroll,onChange:function(e){return h(e.target.value)}}),Q.a.createElement(Vd,{width:"80px",height:"40px",refreshToken:i,handleToken:d}))):null),Q.a.createElement(ls,{height:"40px",bgColor:c,fontColor:l,handleClick:e},Q.a.createElement("span",null,s("提交"))))}var Kd=Object(c.e)(Object(i.b)(function(e){return{customTheme:e.get("theme"),config:e.get("config"),captchaStatus:e.getIn(["survey","form","form_def","captcha"]),formDef:e.getIn(["survey","form","form_def"]),title:e.getIn(["survey","form","title"]),categoryEnabled:e.getIn(["survey","categoryEnabled"]),userFormEnabled:e.getIn(["survey","userFormEnabled"])}},function(e){return{dispatch:e}})(function(e){var a=e.config,t=e.theme,n=e.customTheme,i=e.captchaStatus,o=e.formDef,r=e.categoryEnabled,l=e.userFormEnabled,c=e.dispatch,s=e.title,d=Object(ae.merge)({},t,xl(n,a.get("standalone"))),u=Object($.c)()[0],e={assignments:[]},p={fields:[]};r||l||c(ue({showSurvey:!1}));var n=(t=Object(V.useState)(i))[0],m=t[1],r=(t=Object(V.useState)(r?"category":"user"))[0],g=t[1];return o&&(e=o.get("menus").toJS(),(p=o.get("inputs").toJS()).fields=p.fields.filter(function(e){return!e.ignore})),s={name:s,showBack:ut.isMobile()&&!!a.get("standalone")&&(!window.history||1<window.history.length),fontColor:d.panel.fontColor,themeColor:d.panel.themeColor,closeEnabled:!a.get("standalone"),closeText:ut.isMobile()?u("关闭"):null,handleClose:function(){Ht(!1)}},Object(V.useEffect)(function(){Mt.updatePosition()},[]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,s)),Q.a.createElement(Is,null,Q.a.createElement(js,{style:{overflowY:"auto"}},"category"===r?Q.a.createElement(qd,ua()({},e,{handleCategory:function(e){var t={},n={};"agent"===e.target_kind?t.agentToken=e.target:"group"===e.target_kind&&(t.groupToken=e.target,t.agentToken=null),n.surveyMsg={id:+new Date,content_type:"text",content:e.description},Qe(t,!0),c(ye(n)),l?g("user"):c(ue({showSurvey:!1}))}})):Q.a.createElement($d,ua()({},p,{captcha:n,fontColor:d.panel.fontColor,bgColor:d.panel.themeColor,handleUserForm:function(e,t){var n;!function(e){for(var t=0,n=p.fields.length;t<n;t+=1){var a=p.fields[t];if(!a.ignore){var i=a.field_name,o=a.display_name,r=e[i],l="",l="en"===ee("get","_MEIQIA_LANGUAGE")?i:o;if("tel"===a.field_name){if(!a.optional&&!/^\d+$/.test(r))return Jn(u("电话号码必须为数字"),3e3),!1;if(a.optional&&r&&!/^\d+$/.test(r))return Jn(u("电话号码必须为数字"),3e3),!1}switch(a.type){case"text":if(r){if(0===r.length||100<r.length)return Jn(u("请控制")+"「"+l+"」"+u("在1到100个字符"),3e3),!1}else if(!a.optional)return Jn(u("请填写必填字段")+"「"+l+"」",3e3),!1;break;case"number":if(r){if(!/^(\d*\.)?\d+$/.test(r))return Jn(u("请填写正确的数字")+"「"+l+"」",3e3),!1}else if(!a.optional)return Jn(u("请填写必填字段")+"「"+l+"」",3e3),!1;break;case"single_choice":case"multiple_choice":if(!(a.optional||r&&0!==r.length))return Jn(u("请选择")+"「"+l+"」",3e3),!1;break;case"datetime":case"date":if(!(a.optional||r&&0!==r.length))return Jn(u("请选择")+"「"+l+"」",3e3),!1}}}return!0}(e)||(!i||t.captchaValue?(n={source:"web"},a.get("subSource")&&(n.sub_source_name=a.get("subSource")),n=n,e={ent_id:a.get("entId"),track_id:a.get("trackId"),visit_id:a.get("visitId"),data:e},t={"Captcha-Value":t.captchaValue,"Captcha-Token":t.captchaToken},X({url:"/client/forms",method:"post",headers:J()({"content-type":"application/json"},t),params:n,data:e}).then(function(e){e=(e||{}).data,e=void 0===e?{}:e;e.captcha_token&&e.captcha_value&&(ee("set","MEIQIA_CAPTCHA_TOKEN",e.captcha_token),ee("set","MEIQIA_CAPTCHA_VALUE",e.captcha_value)),c(ue({showSurvey:!1}))},function(t){var n={};if("string"==typeof t)try{n=JSON.parse(t)}catch(e){n=t}else n=t;t={};try{t=n.response&&n.response.data||n.data||{}}catch(e){}Jn(u(t.message)||u("提交失败，请稍候再试"),3e3),t.captcha_needed&&m(Math.random())})):Jn(u("请输入验证码"),3e3))}})))))})),Jd=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},Zd=function(e){return!(w()(+e)||!e.trim()||e.length<6)},Xd=function(e){return/^\d+$/.test(e)},eu=c.d.div.withConfig({displayName:"category__Container",componentId:"sc-1qze3l4-0"})(["width:100%;"]),tu=c.d.label.withConfig({displayName:"category__InputItem",componentId:"sc-1qze3l4-1"})(["display:block;box-sizing:border-box;width:100%;height:auto;padding:12px;background:#fff;box-shadow:0 -1px 0 0 rgba(0,0,0,0.04);cursor:pointer;input{margin-right:10px;}"]);function nu(e){var t=e.category,n=e.handleChange;return Q.a.createElement(eu,null,e.list.map(function(e){return Q.a.createElement(tu,{key:e.id},Q.a.createElement("input",{type:"radio",name:"category",value:e.id,checked:t===e.id,onChange:function(){return n(e.id)}}),e.name)}))}function au(e){var t,n,a,i,o=(s=(t=Object(V.useState)([]),n=t[0],a=t[1],i=Object(V.useState)([]),s=i[0],c=i[1],t=Object(V.useCallback)(function(n){a(function(e){return e.filter(function(e,t){return t!==n})})},[]),i=Object(V.useCallback)(function(t){a(function(e){return[].concat(e,[t])})},[]),{imageList:n,setImageList:a,handleRemove:t,handleAdd:i,showImageList:s,setShowImageList:c})).imageList,r=s.handleAdd,l=s.handleRemove,c=Object(V.useState)([]),s=c[0],d=c[1],u=Object(V.useCallback)(function(t){d(function(e){return e.filter(function(e){return(null==e?void 0:e.id)!==t})})},[]),p=Object(V.useCallback)(function(t){d(function(e){return[].concat(e,[t])})},[]),m=Object(V.useCallback)(function(t){d(function(e){return e.map(function(e){return e.id===t.id?J()({},e,t):e})})},[]),g=e.onChange,h=Object($.c)()[0];return Object(V.useEffect)(function(){g&&g(o)},[o,g]),Q.a.createElement(ou,null,Q.a.createElement(ru,null,s.map(function(e,t){var n=e.image;return Q.a.createElement(lu,{key:e},"sending"===n?h("上传中")+"...":Q.a.createElement("img",{src:n,alt:""}),Q.a.createElement(su,{onClick:function(){l(t),u(e.id)}},Q.a.createElement(ti,{type:"iconclose1"})))}),(null==s?void 0:s.length)<=4?Q.a.createElement(uu,{title:h("上传图片")},Q.a.createElement(cu,null,Q.a.createElement(du,null,Q.a.createElement(ti,{type:"icondropdown1"}),Q.a.createElement(ti,{type:"icondropdown1"})),Q.a.createElement("div",null,h("上传图片"))),Q.a.createElement(pu,null,Q.a.createElement("input",{id:"photoFile",type:"file",accept:"image/*",onChange:function(e){var n;!function(e){if(5e6<e.target.files[0].size)return Jn(Y.a.t("只能发送小于 5MB 的图片哦"),5e3),!1;e=(e=e.target.value.split("."))[e.length-1].toLowerCase();if(["png","jpg","jpeg","gif","php"].includes(e))return!0;e=Y.a.t("只能发送图片哦")+"（png/jpg/jpeg/gif）";return Jn(e,5e3),!1}(e)||(n=Math.random(),p({id:n,image:"sending"}),iu(e).then(function(e){var t;null!=e&&null!=(t=e.data)&&t.photo_key&&(r(e.data.photo_key),m({id:n,image:e.data.photo_url}))}).catch(function(){u(n)}))}}))):null),Q.a.createElement(mu,null,h("* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M")))}var iu=function(){var t=Ye()($e.a.mark(function e(t){var n,a;return $e.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Math.random(),n={id:a,from_type:"client",content_type:"photo",file:t.target.files[0]},t.target.value="",a=Ge.getState(),a=a.getIn(["config","entId"]),e.abrupt("return",Z({url:"/upload?ent_id="+a,method:"post",data:{msg:n,entId:a}},"uploadImage"));case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),H="85px",ou=c.d.div.withConfig({displayName:"upload-image__Box",componentId:"sc-m5tglx-0"})(["padding:0 16px 6px 16px;"]),ru=c.d.div.withConfig({displayName:"upload-image__UploadBox",componentId:"sc-m5tglx-1"})(["display:flex;align-items:center;flex-wrap:wrap;"]),lu=c.d.div.withConfig({displayName:"upload-image__ImageItem",componentId:"sc-m5tglx-2"})(["margin:0 8px 8px 0;position:relative;width:",";height:",";display:flex;align-items:center;background:rgba(0,0,0,0.04);justify-content:center;img{max-width:100%;max-height:100%;}"],H,H),cu=c.d.div.withConfig({displayName:"upload-image__UploadContent",componentId:"sc-m5tglx-3"})(["display:flex;align-items:center;flex-direction:column;"]),su=c.d.div.withConfig({displayName:"upload-image__ItemIcon",componentId:"sc-m5tglx-4"})(["position:absolute;top:-1px;right:-1px;width:16px;height:16px;background:#040f42;text-align:center;line-height:16px;cursor:pointer;i{font-size:12px;color:#fff;}"]),du=c.d.div.withConfig({displayName:"upload-image__AddIcon",componentId:"sc-m5tglx-5"})(["position:relative;height:20px;width:20px;i{position:absolute;font-size:16px;left:0;}i:last-child{transform:rotate(90deg);}"]),uu=c.d.label.withConfig({displayName:"upload-image__IconLabel",componentId:"sc-m5tglx-6"})(["margin:0 8px 8px 0;display:inline-flex;width:",";height:",";justify-content:center;align-items:center;background:rgba(0,0,0,0.04);cursor:pointer;i{color:#666;font-size:24px;}"],H,H),pu=c.d.span.withConfig({displayName:"upload-image__InputSpan",componentId:"sc-m5tglx-7"})(["visibility:hidden;position:absolute;"]),mu=c.d.p.withConfig({displayName:"upload-image__ImageContent",componentId:"sc-m5tglx-8"})(["margin:8px 0 0 0;font-size:12px;color:#666;"]),gu=["content","photo"],hu=c.d.div.withConfig({displayName:"message-form__Container",componentId:"sc-we4f09-0"})(["width:100%;height:100%;box-sizing:border-box;position:relative;"]),fu=c.d.div.withConfig({displayName:"message-form__Title",componentId:"sc-we4f09-1"})(["padding:16px;font-size:12px;color:#666;word-break:break-all;white-space:pre-line;"]),bu=c.d.ul.withConfig({displayName:"message-form__List",componentId:"sc-we4f09-2"})(["list-style:none;li{margin-bottom:16px;}.name{padding:0 0 6px 16px;color:#444;font-size:12px;span{padding:0 3px;color:#ff5c5e;}}"]),vu=c.d.div.withConfig({displayName:"message-form__Form",componentId:"sc-we4f09-3"})(["color:rgb(179,179,179);font-size:14px;text-align:left;margin-bottom:10px;li{& > label{display:inline-block;padding:0 0 6px 16px;color:#444;font-size:12px;span{padding:0 3px;color:#ff5c5e;}}margin-bottom:16px;}.field{padding:0 0 10px;}.ticketCheckbox{padding-left:16px;}input[type='text'],input[type='number'],input[type='datetime-local']{width:100%;height:auto;padding:12px 16px;border:none;}.error-field{color:#ff7474;font-size:12px;padding:6px 0 6px 16px;}"]),yu=c.d.label.withConfig({displayName:"message-form__InputItem",componentId:"sc-we4f09-4"})(["display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;width:100%;padding:12px 16px;color:#000;background:#fff;box-shadow:0 -1px 0 0 rgba(0,0,0,0.04);cursor:pointer;input{margin:0 10px 0 0;}"]),xu=c.d.input.withConfig({displayName:"message-form__Input",componentId:"sc-we4f09-5"})(["width:100%;height:auto;padding:12px;border:none;"]),wu=c.d.textarea.withConfig({displayName:"message-form__Textarea",componentId:"sc-we4f09-6"})(["display:block;width:100%;height:90px;padding:12px 16px;overflow-x:hidden;overflow-y:auto;resize:none;outline:0;background-color:#fff;border:none;word-break:break-all;font-size:12px;-webkit-appearance:none;"]),ku=c.d.div.withConfig({displayName:"message-form__CaptchaWrap",componentId:"sc-we4f09-7"})(["width:100%;padding-right:80px;margin-bottom:16px;box-sizing:border-box;position:relative;"]),_u=Object(c.d)(F).withConfig({displayName:"message-form__CaptchaImg",componentId:"sc-we4f09-8"})(["position:absolute;right:0;top:0;bottom:0;"]),Eu=c.d.div.withConfig({displayName:"message-form__BtnWrap",componentId:"sc-we4f09-9"})(["padding:0 20px 20px;"]);var Cu=Object(c.e)(Object(i.b)(function(e){return{config:e.get("config"),customTheme:e.get("theme"),msgData:e.get("message"),ticket:e.get("ticket")}},function(e){return{dispatch:e}})(function(a){function t(a,e){var t,n=null;switch(a.type){case"text":case"string":n=Q.a.createElement("input",{type:"text",focus:"true",name:a.name,placeholder:a.placeholder,value:S[a.name],onChange:O});break;case"number":n=Q.a.createElement("input",{type:"number",focus:"true",name:a.name,placeholder:a.placeholder,value:S[a.name],onChange:O});break;case"radio":case"check":case"checkbox":n=Q.a.createElement("div",null,a.metainfo.map(function(e){var t="object"==typeof e?e.name:e,n="object"==typeof e?e.value:e;return Q.a.createElement(yu,{key:e},Q.a.createElement("input",{type:"radio"===a.type?"radio":"checkbox",name:a.name,value:n,onChange:O}),t)}));break;case"date":case"datetime":n=Q.a.createElement(cr,{styles:{height:"40px","box-shadow":"none",border:"none",padding:"0 16px"},name:a.name,value:S[a.name],placeholder:a.placeholder,handleChange:(t=a.name,function(e){M(t,e)})});break;case"content":n=Q.a.createElement(wu,{placeholder:a.placeholder,name:"content",value:S.content,onBlur:vt.wxScroll,onChange:O})}e=null!=(e=null==(e=e.toJS())?void 0:e.attrConfig.find(function(e){return e.name===a.name}))?e:{};return Q.a.createElement("li",{key:a.name},Q.a.createElement("label",null,I[a.name]?_(I[a.name]):(null==e?void 0:e.display_name)||a.name,a.required?Q.a.createElement("span",null,"*"):null),n,j[a.name]&&N[a.name]?Q.a.createElement("p",{className:"error-field"},j[a.name]):null)}var n,i=a.config,o=a.ticket,r=a.msgData,e=(x=xl(a.customTheme,i.get("standalone")))&&x.panel||a.customTheme,l="open"===o.get("category"),c="open"===o.get("captcha"),s=o.get("upload_image"),d=Object(V.useState)([]),u=d[0],p=d[1],m=(E=Object(V.useState)(null))[0],g=E[1],h=Object(V.useState)(c),f=h[0],b=h[1],v=Object(V.useState)(""),y=v[0],x=v[1],w=(d=Object(V.useState)(""))[0],k=d[1],_=Object($.c)()[0],E=Object(V.useMemo)(function(){return!s||"open"===s},[s]),C=Object(V.useMemo)(function(){if(!o)return{};var t=o.toJS(),n={intro:t.intro,content_title:t.content_title||_("留言内容"),custom_fields:[],content_fill_type:t.content_fill_type||"content",defaultTemplateContent:t.content_fill_type||"open"===t.defaultTemplate?t.defaultTemplateContent:"",content_placeholder:t.content_placeholder||""};return t.custom_fields?n.custom_fields=t.custom_fields:["name","tel","email","wechat","qq"].forEach(function(e){"open"===t[e]&&n.custom_fields.push({name:"wechat"===e?"weixin":e,type:"string",required:!0,placeholder:_("请输入")})}),n},[_,o]),I={name:"姓名",gender:"性别",tel:"电话",email:"邮箱",qq:"QQ",weixin:"微信",weibo:"微博",address:"地址",comment:"备注",age:"年龄",contact:"联系人",content:C.content_title||_("留言内容")},T=(d=Object(Ro.a)({initialValues:(v=(h=C).content_fill_type,d=C.defaultTemplateContent,h=C.custom_fields,n={content:"content"===v?d:""},h.forEach(function(e){n[e.name]=""}),n),validate:function(n){var a={};return K()(n).forEach(function(t){var e=C.custom_fields.find(function(e){return e.name===t})||{};if(n[t]||"content"!==t&&!e.required)if("string"!==e.type||n[t]&&n[t].trim()||!e.required)switch(t){case"name":n[t]&&50<n[t].length&&(a[t]=_("请正确填写姓名"));break;case"tel":n[t]&&!Zd(n[t])&&(a[t]=_("请正确填写手机号"));break;case"email":n[t]&&!Jd(n[t])&&(a[t]=_("请正确填写联系邮箱"));break;case"weixin":n[t]&&50<n[t].length&&(a[t]=_("请正确填写微信"));break;case"qq":n[t]&&!Xd(n[t])&&(a[t]=_("请正确填写QQ"));break;case"content":n[t]&&1e3<n[t].length&&(a[t]=_("请保持留言内容在 1～1000 字符内"))}else a[t]=_("字段不能为空");else a[t]=_("字段不能为空")}),a},onSubmit:function(e){e.content;var t=e.photo,n=me()(e,gu)||{},e={enterprise_id:i.get("entToken"),track_id:i.get("trackId"),visit_id:i.get("visitId"),channel:"widget",content:e.content,photo:t};m&&(e.category_id=m),K()(n).forEach(function(t){var e=C.custom_fields.find(function(e){return e.name===t})||{};n[t]?"date"!==e.type&&"datetime"!==e.type||(n[t]=yr(n[t])):delete n[t]}),z(i.get("entId"),i.get("trackId"),i.get("visitId"),i.get("browserId"),n);t={"content-type":"application/json"};if(c){if(!w)return Jn(_("请输入验证码"),2e3),!1;J()(t,{"Captcha-Needed":"true","Captcha-Value":w,"Captcha-Token":y})}return e.client_info=n,-1<[75507,42961,72508,16,14986].indexOf(i.get("entId"))&&(e.agent_token=r.get("agentToken")||""),e.reserve_token=r.get("reserveToken"),q({data:e,headers:t}).then(function(){a.afterSubmit()},function(e){var t={};try{t=JSON.parse(e).data||{}}catch(e){}Jn(t.message||_("留言失败，请稍候再试"),3e3),t.captcha_needed&&b(Math.random())}),null}})).submitForm,S=d.values,j=d.errors,N=d.touched,O=d.handleChange,M=d.setFieldValue,B=d.isSubmitting;return Object(V.useEffect)(function(){var e;"open"===o.get("category")&&(e=i.get("entId"),X({url:"/client/tickets_v2/categories",method:"get",params:{enterprise_id:e}}).then(function(e){p(e.data.categories)}))},[i,o]),h=Object(V.useMemo)(function(){return[].concat(C.custom_fields,[{name:"content",type:"content",required:!0,placeholder:"content"===C.content_fill_type?"":C.content_placeholder}])},[C]),d=Object(V.useCallback)(function(e){M("photo",e)},[M]),Q.a.createElement(hu,null,Q.a.createElement(fu,null,o.get("intro")),l?Q.a.createElement(bu,null,Q.a.createElement("li",null,Q.a.createElement("div",{className:"name"},_("分类"),Q.a.createElement("span",null,"*")),Q.a.createElement(nu,{list:u,category:m,handleChange:function(e){return g(e)}}))):null,Q.a.createElement(vu,null,Q.a.createElement(bu,null,h.map(function(e){return t(e,i)}),E?Q.a.createElement("li",{key:"photo"},Q.a.createElement(au,{onChange:d})):null,c?Q.a.createElement("li",{key:"captcha"},Q.a.createElement("div",{className:"name"},_("验证码"),Q.a.createElement("span",null,"*")),Q.a.createElement(ku,null,Q.a.createElement(xu,{type:"text",name:"captcha",value:w,onBlur:vt.wxScroll,onChange:function(e){return k(e.target.value)}}),Q.a.createElement(_u,{width:"80px",height:"40px",refreshToken:f,handleToken:x}))):null)),Q.a.createElement(Eu,null,Q.a.createElement(ls,{height:"40px",bgColor:e.themeColor,fontColor:e.fontColor,handleClick:function(){l&&0<u.length&&!m?Jn(_("请选择分类"),2e3):B||T()}},Q.a.createElement("span",null,_("提交")))))})),Iu=c.d.div.withConfig({displayName:"message-success__Container",componentId:"sc-1b3erm3-0"})(["width:100%;height:100%;background:#fff;overflow:hidden;"]),Tu=c.d.div.withConfig({displayName:"message-success__BtnWrap",componentId:"sc-1b3erm3-1"})(["width:150px;margin:0 auto;"]),Su=c.d.h2.withConfig({displayName:"message-success__H2",componentId:"sc-1b3erm3-2"})(["text-align:center;"]),ju=c.d.p.withConfig({displayName:"message-success__P",componentId:"sc-1b3erm3-3"})(["font-size:14px;margin:20px 0;text-align:center;"]),Nu=Object(c.d)(gd).withConfig({displayName:"message-success__AnchorButton",componentId:"sc-1b3erm3-4"})(["text-decoration:underline;"]),Ou=Object(i.b)(null,function(e){return{dispatch:e}})(function(e){var t=e.dispatch,n=e.standalone,a=Object($.c)()[0],i=Object(V.useCallback)(function(){t(de({showTicket:!1})),Ht(!1)},[t]);return Q.a.createElement(Iu,null,Q.a.createElement(Su,null,a("留言成功")),Q.a.createElement(ju,null,a("我们会尽快联系你")),n?null:Q.a.createElement(Tu,null,Q.a.createElement(ls,{bgColor:e.themeColor,fontColor:e.fontColor,handleClick:i},Q.a.createElement("span",null,a("关闭")))),Q.a.createElement(ju,null,Q.a.createElement(Nu,{handleClick:e.showForm},Q.a.createElement("span",null,a("再次留言")))))});function Mu(a,i){clearTimeout(Du),zu(a,i).then(function(e){var t=e.data,n=Ge.getState(),e=Ge.dispatch;n.get("message").get("convId")?clearTimeout(Du):!1===t.in_queue?e(Pe({inQueue:!1,status:"fail"})):(t.position&&e(Pe({position:t.position})),Du=setTimeout(function(){Mu(a,i)},15e3))})}function Bu(e){var t=e.className,n=e.content,a=e.visible,i=void 0===(s=e.closeOnClick)||s,o=e.timeout,r=e.onClose,l=e.widgetContent,e=(s=Object(V.useState)(!1))[0],c=s[1],s=function(){n!==Y.a.t("连接已断开，请刷新页面")&&n!==Y.a.t("长时间未活动窗口已失效，请刷新页面")&&i&&(c(!1),r&&r())};return Object(V.useEffect)(function(){"chatBox"===l||n!==Y.a.t("连接已断开，请刷新页面")&&n!==Y.a.t("长时间未活动窗口已失效，请刷新页面")||setTimeout(function(){c(!1),r&&r()},3e3)},[l,n,r]),Object(V.useEffect)(function(){o&&setTimeout(function(){c(!1),r&&r()},o)},[o,r]),Object(V.useEffect)(function(){c(a)},[a,n]),e&&n?Q.a.createElement(Q.a.Fragment,null,n===Y.a.t("连接已断开，请刷新页面")||n===Y.a.t("长时间未活动窗口已失效，请刷新页面")?null:Q.a.createElement(Gu,{onClick:s}),Q.a.createElement(Wu,{onClick:s,className:t},n)):null}var qu=Object(c.e)(Object(i.b)(function(e){return{standalone:e.getIn(["config","standalone"]),customTheme:e.get("theme")}},function(e){return{dispatch:e}})(function(e){var t=(o=xl(e.customTheme,e.standalone))&&o.panel||e.customTheme,n=(r=Object(V.useState)(!0))[0],a=r[1],i=Object($.c)()[0],o=ut.isMobile()&&!!e.standalone&&(!window.history||1<window.history.length),r={name:i("给我们留言"),showBack:o,fontColor:t.fontColor,themeColor:t.themeColor,closeEnabled:!e.standalone,closeText:ut.isMobile()?i("关闭"):null,handleClose:function(){Ht(!1)}},o=Object(V.useCallback)(function(){return a(!1)},[a]),i=Object(V.useCallback)(function(){return a(!0)},[a]);return Object(V.useEffect)(function(){Mt.updatePosition()},[]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,r)),Q.a.createElement(Is,null,Q.a.createElement(js,{style:{overflowY:"auto"}},n?Q.a.createElement(Cu,{afterSubmit:o}):Q.a.createElement(Ou,{standalone:e.standalone,themeColor:t.themeColor,fontColor:t.fontColor,showForm:i}))))})),zu=function(e,t){return X({url:"/client/queue/position",method:"get",params:{ent_id:e,track_id:t}})},Du=null,Pu=c.d.div.withConfig({displayName:"queue__Intro",componentId:"sc-q5cskn-0"})(["line-height:22px;color:#666;padding:20px 20px 30px;"]),Au=c.d.div.withConfig({displayName:"queue__Position",componentId:"sc-q5cskn-1"})(["position:relative;width:100%;height:160px;background-color:#fefefe;box-shadow:inset 0 -1px 0 0 rgba(0,0,0,0.04),inset 0 1px 0 0 rgba(0,0,0,0.04);text-align:center;color:",";@keyframes jump{0%{transform:translateY(0);text-shadow:0 30px 36px;}100%{transform:translateY(-6px);text-shadow:0 40px 40px;}}.text{padding-top:32px;padding-bottom:10px;}.pos{position:absolute;top:48px;left:50%;width:40px;margin-left:-20px;font-size:48px;text-shadow:0 30px 36px;animation:jump 0.3s ease-in-out infinite alternate;}"],function(e){return e.themeColor||"#000"}),Lu=c.d.div.withConfig({displayName:"queue__Message",componentId:"sc-q5cskn-2"})(["color:#666;margin-top:30px;text-align:center;padding:0 26px;.text{padding:20px 0;}a{width:268px;}"]),Fu=Object(c.e)(Object(i.b)(function(e){return{standalone:e.getIn(["config","standalone"]),entId:e.getIn(["config","entId"]),trackId:e.getIn(["config","trackId"]),customTheme:e.get("theme"),queue:e.get("queue")}},function(e){return{dispatch:e}})(function(e){var t=e.customTheme,n=e.queue,a=e.standalone,i=e.entId,o=e.trackId,r=Object($.c)()[0],l=J()({},e.theme),c=Object(ae.merge)({},l,xl(t,a)),s=n.get("intro"),l=n.get("status"),t=n.get("ticketIntro"),n=n.get("position"),a={name:r("排队等待中..."),showBack:ut.isMobile()&&!!a&&(!window.history||1<window.history.length),fontColor:c.panel.fontColor,themeColor:c.panel.themeColor,closeEnabled:!a,closeText:ut.isMobile()?r("关闭"):null,handleClose:function(){Ht(!1)}};return Object(V.useEffect)(function(){Mt.updatePosition()},[]),Object(V.useEffect)(function(){return Mu(i,o),function(){clearTimeout(Du)}},[i,o]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,a)),Q.a.createElement(Is,null,Q.a.createElement(js,{style:{overflowY:"auto"}},"normal"===l?Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(Pu,null,s),Q.a.createElement(Au,{themeColor:c.panel.themeColor},Q.a.createElement("div",{className:"text"},r("当前等待人数")),Q.a.createElement("div",{className:"pos"},n)),Q.a.createElement(Lu,null,Q.a.createElement("div",{className:"text"},t||r("如果等不及，可以选择")),Q.a.createElement(ls,{height:"35px",bgColor:c.panel.themeColor,fontColor:c.panel.fontColor,handleClick:function(){e.dispatch(de({showTicket:!0}))}},Q.a.createElement("span",null,r("给我们留言"))))):Q.a.createElement(Lu,null,r("排队失败，请刷新重试")))))})),Ru=c.d.div.withConfig({displayName:"intercept-code__Inner",componentId:"sc-tegp7b-0"})([".text{font-size:12px;color:#6f7592;line-height:24px;padding-bottom:12px;}.name{color:#1d2754;font-size:12px;font-weight:bold;line-height:24px;padding-bottom:8px;}"]),Uu=c.d.iframe.withConfig({displayName:"intercept-code__CaptchaFrame",componentId:"sc-tegp7b-1"})(["border:none;height:100% !important;width:100% !important;"]),Hu=Object(c.e)(Object(i.b)(function(e){return{customTheme:e.get("theme"),config:e.get("config"),interceptCode:e.get("interceptCode")}},function(e){return{dispatch:e}})(function(e){var t=e.config,n=e.theme,a=e.customTheme,i=e.dispatch,o=e.interceptCode,r=Object(ae.merge)({},n,xl(a,t.get("standalone"))).panel,e=r.fontColor,n=r.themeColor,a=o.get("type"),l=o.get("message"),r=Object($.c)()[0],o=r("captcha"===a?"安全验证码":"当前对话不可用");Object(V.useEffect)(function(){Jn(l,1e3)},[l]);r={name:o,showBack:ut.isMobile()&&!!t.get("standalone")&&(!window.history||1<window.history.length),fontColor:e,themeColor:n,closeEnabled:!t.get("standalone"),closeText:ut.isMobile()?r("关闭"):null,handleClose:function(){Ht(!1)}};return Object(V.useEffect)(function(){window.parent.addEventListener("message",function(e){var t=e.data,e=void 0===t?{}:t,t=e.type,e=e.token;"captcha"===t&&(i(Re({show:!1,captcha:e})),wn())})},[i]),Q.a.createElement(Ts,null,Q.a.createElement(Ss,null,Q.a.createElement(zl,r)),Q.a.createElement(Is,null,"captcha"===a?Q.a.createElement(Ru,null,Q.a.createElement(Uu,{title:"captcha",src:M.public+"captcha.html?v=2"})):null))})),Wu=c.d.div.withConfig({displayName:"bubble__Container",componentId:"sc-hpi5ch-0"})(["position:absolute;left:50%;top:50%;z-index:999;max-width:80%;background:rgba(20,20,20,0.3);transform:translateX(-50%) translateY(-50%);padding:10px;border-radius:5px;color:#fff;background:rgba(0,0,0,0.5);"]),Gu=c.d.div.withConfig({displayName:"bubble__Mask",componentId:"sc-hpi5ch-1"})(["position:absolute;top:0;bottom:0;left:0;right:0;opacity:0;background:rgba(255,255,255,0);"]),Vu=c.d.div.withConfig({displayName:"frame-chat-content__Content",componentId:"sc-smb4c1-0"})(["width:100%;height:100%;position:relative;"]);function Qu(e,t,n){function a(e){return st()(e,10)||0}var i,o,r=e.customTheme,l=e.withoutBtn,c=e.visible,s=n.greetings_type,e=n.greetings_style,d=void 0===(n=(e=void 0===e?{}:e).position)?{}:n,u=void 0===(e=e.bgi)?{}:e,p=[],m=r.getIn([op,"btn","type"]),g=r.getIn([op,"btn","position","type"]);switch(!1===c?p.push("visibility: hidden !important;z-index:-1000 !important;"):p.push("visibility: visible !important;z-index:1000 !important;"),s){case 1:p.push("width: 325px !important;"),l?p.push.apply(p,["right: 20px;","bottom: 20px;"]):"mobile"===op?(o=20+a("bottom"===t.type?0:a(t.bottom))+a(t.height)+("call"===m?a(t.height)+20:0),p.push.apply(p,[(g||"right")+": 0;","bottom: "+o+"px;"])):(i=20+a("bottom"===t.type?0:a(t.bottom))+a(t.height)+("call"===m?a(t.height)+20:0),o="aside"===m?"-"+rp:a(t[g]),p.push.apply(p,[(g||"right")+": "+o+"px;","bottom: "+i+"px;"]));break;case 2:p.push.apply(p,["width: 320px !important;","height: 300px !important;"]);break;case 3:case 4:p.push.apply(p,["width: 370px !important;","height: 190px !important;"]);break;case 5:break;case 6:p.push.apply(p,["width: "+u.width+"px !important;","height: "+u.height+"px !important;"])}if(1!==s){s=d.type||1;if("mobile"===op)switch(s){case 1:p.push.apply(p,["left: 50%;","top: 50%;","transform: translate(-50%,-50%);"]);break;case 2:p.push.apply(p,["left: 50%;","transform: translateX(-50%);","top: "+((d.value||0)-10)+"px;"]);break;case 3:p.push.apply(p,["left: 50%;","transform: translateX(-50%);","bottom: "+((d.value||0)-10)+"px;"])}else switch(s){case 1:p.push.apply(p,["left: 50%;","top: 50%;","transform: translate(-50%,-50%);"]);break;case 2:p.push.apply(p,["left: "+((d.side||0)-10)+"px;","bottom: "+((d.bottom||0)-10)+"px;"]);break;case 3:p.push.apply(p,["right: "+((d.side||0)-10)+"px;","bottom: "+((d.bottom||0)-10)+"px;"])}}return p}var Yu=Object(c.e)(Object(i.b)(function(e){return{standalone:e.getIn(["config","standalone"]),customTheme:e.get("theme"),widgetContent:e.getIn(["router","widgetContent"]),alertVisible:e.getIn(["router","alertVisible"]),alertConfig:e.getIn(["router","alertConfig"])}},function(e){return{dispatch:e}})(function(e){var t=e.standalone,n=e.widgetContent,a=e.alertVisible,i=e.alertConfig,o=xl(e.customTheme,t),r=ut.isMobile()?"mobile":"desktop",l=r+"."+(o&&o.panel.type||e.theme.panel.type);"mobile"==r&&(l="mobile");var c=!t&&("desktop.standard"===l||"desktop.custom"===l);return Object(V.useEffect)(function(){return c&&Mt.register(!0,"chat",!1),function(){Mt.unregister(!0,!1)}},[l,c]),Q.a.createElement(Vu,null,function(){switch(n){case"chatBox":return Q.a.createElement(Nd,{type:l});case"preForm":return Q.a.createElement(Kd,null);case"messageBoard":return Q.a.createElement(qu,null);case"queue":return Q.a.createElement(Fu,null);case"intercept-code":return Q.a.createElement(Hu,null);default:return null}}(),Q.a.createElement(Bu,ua()({visible:a},i,{onClose:function(){e.dispatch(oe({alertVisible:!1,alertConfig:{content:""}}))},widgetContent:n})))})),F=n("qyd5"),$u=n.n(F),F=n("boyN"),Ku=n.n(F),F=n("V15l"),Ju=n.n(F),F=n("LwUL"),Zu=n.n(F),F=n("k3qG"),Xu=n.n(F),F=n("WQMa"),ep=n.n(F),tp=c.d.div.withConfig({displayName:"audio__AudioContainer",componentId:"sc-kbmlz9-0"})(["display:none;"]),np=Object(i.b)(function(e){return{message:e.get("message")}},function(e){return{dispatch:e}})(function(e){var t=e.message,n=e.dispatch,a=t.get("ringing"),i=t.get("ringType"),o=t.get("ringEnabled"),r=ut.isMobile(),l=Object(V.useRef)(null),c=Object(V.useRef)(null),s=Object(V.useRef)(null);return Object(V.useEffect)(function(){if(o&&a&&i&&!r)try{switch(i){case"newChat":l.current.play().then(function(){},function(){});break;case"newMessage":c.current.play().then(function(){},function(){});break;case"sentMessage":s.current.play().then(function(){},function(){})}}catch(e){}n(ye({ringing:!1,ringType:""}))},[n,o,a,i,r]),Q.a.createElement(tp,null,Q.a.createElement("audio",{ref:l,preload:"preload"},Q.a.createElement("track",{kind:"captions"}),Q.a.createElement("source",{src:$u.a,type:"audio/ogg"}),Q.a.createElement("source",{src:Ku.a,type:"audio/mpeg"})),Q.a.createElement("audio",{ref:c,preload:"preload"},Q.a.createElement("track",{kind:"captions"}),Q.a.createElement("source",{src:Ju.a,type:"audio/ogg"}),Q.a.createElement("source",{src:Zu.a,type:"audio/mpeg"})),Q.a.createElement("audio",{ref:s,preload:"preload"},Q.a.createElement("track",{kind:"captions"}),Q.a.createElement("source",{src:Xu.a,type:"audio/ogg"}),Q.a.createElement("source",{src:ep.a,type:"audio/mpeg"})))}),ap=Object(c.c)(['@font-face{font-family:\'iconfont\';src:url(\'https://at.alicdn.com/t/font_1820517_sl5jy5g8e7.woff2?t=1630465347956\') format(\'woff2\'),url(\'https://at.alicdn.com/t/font_1820517_sl5jy5g8e7.woff?t=1630465347956\') format(\'woff\'),url(\'https://at.alicdn.com/t/font_1820517_sl5jy5g8e7.ttf?t=1630465347956\') format(\'truetype\');}.iconfont{font-family:"iconfont" !important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.iconunlike:before{content:"\\e7b1";}.iconlike:before{content:"\\e7b2";}.iconprompt_fill:before{content:"\\e71b";}.icondropdown1:before{content:"\\e772";}.iconicon_voice_close1:before{content:"\\e773";}.iconclose1:before{content:"\\e774";}.iconicon_voice1:before{content:"\\e775";}.iconlogo_molichat_1:before{content:"\\e714";}.iconicon_widget_face:before{content:"\\e6e0";}.iconicon_widget_picture:before{content:"\\e6e1";}.iconicon_widget_file:before{content:"\\e6e2";}.iconicon_widget_assess:before{content:"\\e6e3";}.iconicon_widget_video:before{content:"\\e6e4";}.iconphone:before{content:"\\e6dc";}.iconwechat:before{content:"\\e6d6";}.iconqq:before{content:"\\e6d8";}.iconic_meiqia:before{content:"\\e6cf";}.iconic_laigu:before{content:"\\e6cb";}.iconicon_open:before{content:"\\e6b2";}.iconicon_phone:before{content:"\\e6b0";}html,body{width:100%;height:100%;overflow:hidden;font-size:13px;font-family:\'Helvetica Neue\',Helvetica,Arial,\'Hiragino Sans GB\',\'Microsoft YaHei\',sans-serif;}html,body,div,span,ul,ol,li,p,label{margin:0;padding:0;}body{transform:translateY(0px);zoom:1;}input{outline:none;}a{color:#1880ff;text-decoration:none;}']),ip=Object(i.b)(function(e){return{showWidget:e.getIn(["router","showWidget"]),buttonActived:e.getIn(["router","buttonActived"]),servability:e.getIn(["config","servability"]),visitorStatus:e.getIn(["config","visitorStatus"]),showSurvey:e.getIn(["survey","showSurvey"]),scheduler:e.getIn(["message","scheduler"]),convId:e.getIn(["message","convId"]),unableToServe:e.getIn(["message","unableToServe"]),showTicket:e.getIn(["ticket","showTicket"]),inQueue:e.getIn(["queue","inQueue"]),showIntercept:e.getIn(["interceptCode","show"]),templateDetail:e.getIn(["smartGuide","templateDetail"])}},null)(function(e){var t=e.showWidget,n=e.buttonActived,a=e.servability,i=e.visitorStatus,o=e.showSurvey,r=e.scheduler,l=e.convId,c=e.unableToServe,s=e.showTicket,d=e.inQueue,u=e.templateDetail,p=e.showIntercept;return Object(V.useEffect)(function(){t&&(p?Gt("intercept-code"):"chat"===n?4===i?(r||l||kn(),Gt(c||s?"messageBoard":"chatBox")):a?o&&4!==i?Gt("preForm"):(r||l||kn(),c||s?Gt("messageBoard"):d?(be("convClickCallback","queue"),Gt("queue")):Gt("chatBox")):(be("convClickCallback","ticket"),Gt("messageBoard")):"callback"===n&&Gt("callback"))},[t,n,o,a,r,l,c,s,d,i,u.type,p]),Object(V.useEffect)(function(){var e=window.parent.document;return e.addEventListener("visibilitychange",rt),function(){e.removeEventListener("visibilitychange",rt)}},[]),Q.a.createElement(da,{component:Il,GlobalStyle:function(){return Q.a.createElement(ap,null)},visible:t},Q.a.createElement(Yu,null),Q.a.createElement(np,null))}),op=ut.isMobile()?"mobile":"desktop",rp=15,lp=c.d.iframe.withConfig({displayName:"frame-smart-guide__Frame",componentId:"sc-ys136d-0"})(["border:none;margin:0;padding:0;overflow:hidden;overflow-wrap:normal;display:block;position:fixed;z-index:9999999;background:transparent;",""],function(e){return e.styles?e.styles.join(""):""}),cp=o(Object(c.e)(Object(i.b)(function(e){return{withoutBtn:e.getIn(["config","withoutBtn"]),standalone:e.getIn(["config","standalone"]),customTheme:e.get("theme"),config:e.get("config"),detail:e.getIn(["smartGuide","templateDetail"])}},function(e){return{dispatch:e}})(function(e){var t=e.forwardRef,n=e.customTheme,a=e.config,i=e.detail,a=Ea(n,a,op)||{},e=Qu(e,a,i),a=ha(i.greetings_style&&i.greetings_style.src||"",20);return 5===i.greetings_type&&a&&e.push.apply(e,["width: "+a.width+" !important;","height: "+a.height+" !important;"]),Q.a.createElement(lp,{name:"smart-guide",frameborder:"0",scrolling:"no",allowtransparency:"true",ref:t,styles:e})}))),o=n("Dfy3"),sp=n.n(o),o=n("rFG3"),dp=n.n(o),o=n("8xMd"),up=n.n(o),pp=ut.isMobile()?"mobile":"desktop",mp=c.d.div.withConfig({displayName:"frame-smart-guide-content__Container",componentId:"sc-1nq7zh4-0"})(["width:100%;height:100%;padding:20px;box-sizing:border-box;background:transparent;position:relative;font-size:14px;"," ",""],function(e){return e.styles?e.styles.join(""):""},function(e){return e.isBubble?"left"===e.type?"padding-right: 45px;":"padding-left: 45px;":""}),gp=c.d.div.withConfig({displayName:"frame-smart-guide-content__Wrapper",componentId:"sc-1nq7zh4-1"})(["width:100%;height:100%;overflow:visible;position:relative;.close{"," position:absolute;right:",";top:",";z-index:100;font-size:14px;width:30px;height:30px;line-height:30px;text-align:center;background:#fff;border-radius:50%;color:#999;cursor:pointer;box-shadow:2px 2px 5px 1px rgba(0,0,0,0.1);}&:hover .close{display:block;}"],function(e){return e.mobile?"display:block;":"display: none;"},function(e){return e.isBubble?"-16px":0},function(e){return e.isBubble?"-16px":0}),hp=c.d.div.withConfig({displayName:"frame-smart-guide-content__Inner",componentId:"sc-1nq7zh4-2"})(["overflow:hidden;box-sizing:border-box;word-break:break-word;"," p{margin:0;}"],function(e){return e.styles?e.styles.join(""):""}),fp=c.d.div.withConfig({displayName:"frame-smart-guide-content__Avatar",componentId:"sc-1nq7zh4-3"})(["position:absolute;bottom:20px;"," width:36px;height:36px;border-radius:18px;overflow:hidden;box-shadow:0 4px 8px 2px rgba(0,0,0,0.08);img{width:100%;height:100%;}"],function(e){return"left"===e.type?"right: 0;":"left: 0;"}),bp=c.d.div.withConfig({displayName:"frame-smart-guide-content__RichText",componentId:"sc-1nq7zh4-4"})(["width:100%;",""],function(e){return e.styles?e.styles.join(""):""}),vp=c.d.div.withConfig({displayName:"frame-smart-guide-content__ActionButton",componentId:"sc-1nq7zh4-5"})(["position:absolute;height:","px;width:","px;left:","px;top:","px;cursor:pointer;"],function(e){return e.height},function(e){return e.width},function(e){return e.left},function(e){return e.top}),yp=c.d.a.withConfig({displayName:"frame-smart-guide-content__ActionLink",componentId:"sc-1nq7zh4-6"})(["position:absolute;height:","px;width:","px;left:","px;top:","px;cursor:pointer;"],function(e){return e.height},function(e){return e.width},function(e){return e.left},function(e){return e.top}),xp=Object(i.b)(function(e){return{smartGuide:e.getIn(["smartGuide"]),posType:e.getIn(["theme",pp,"btn","position","type"])}},function(e){return{dispatch:e}})(function(e){function p(e){e.stopPropagation(),n(function(e,t){t=t().get("config");t={ent_id:t.get("entToken"),track_id:t.get("trackId"),browser_id:t.get("browserId"),visit_id:t.get("visitId")},X({url:"/client/mpush-reject",method:"post",headers:{"content-type":"application/json"},data:t,params:{ent_id:t.ent_id}}),e(se(!1))})}function m(e){e.stopPropagation(),n(ye({convType:"mpushInvite"})),Ht(!0)}var t=e.smartGuide,n=e.dispatch,a=e.posType,i=t.get("templateDetail")||{},o=i.agent,r=void 0===o?{}:o,l=i.greetings_content,c=i.greetings_type,s=void 0===c?1:c,e=i.greetings_style,t=ut.isMobile(),o=1===s,c=6===s,d=Object(V.useRef)(null),i=Object(V.useState)(null),u=i[0],g=i[1];Object(V.useEffect)(function(){var e=d.current,t=window.parent.document.querySelector("iframe[name=smart-guide]");e&&e.scrollHeight&&1===s?300<(e=e.scrollHeight)?(g(["overflow: auto;","height: 300px;","max-height: 300px;"]),t.style.setProperty("height","375px","important")):(g(["height: "+e]),t.style.setProperty("height",e+75+"px","important")):t.style.setProperty("height","","important")},[l,s]);var h,f,i=function(e,t){var n=[],a=[],i=Q.a.createElement(bp,{styles:u,className:"rich-text",ref:d,dangerouslySetInnerHTML:{__html:l}});switch(e){case 1:n=[],a=["padding: 15px;","border-radius: 8px;","background: #fafafa;","box-shadow: 0 4px 8px 2px rgba(0, 0, 0, 0.08);"];break;case 2:n=["background: url("+sp.a+") no-repeat center;"],a=["width: 280px;","height: 126px;","padding: 58px 62px 0;","line-height: 23px;"];break;case 3:n=["background: url("+dp.a+") no-repeat center;","background-size: 320px;"],a=["width: 285px;","height: 94px;","padding: 50px 0 0 110px;","line-height: 22px;"];break;case 4:n=["background: url("+up.a+") no-repeat center;","background-size: 320px;"],a=["width: 210px;","height: 90px;","padding: 46px 0 0 40px;","line-height: 22px;"];break;case 5:t&&(i=" ",n=["padding: 0;","background: url("+t.src+") no-repeat center center;","background-size: initial;"],a=["width： 100%;","height: 100%;"]);break;case 6:t&&(i=null,n=["padding: 0;","background: url("+t.bgi.src+") no-repeat center;","background-size: "+t.bgi.width+"px "+t.bgi.height+"px"],a=["width: 100%;","height: 100%;"])}return{contentBoxStyle:n,contentStyle:a,content:i}}(s,e);return Q.a.createElement(mp,{type:a,isBubble:o,styles:i.contentBoxStyle},o?Q.a.createElement(fp,{type:a},Q.a.createElement("img",{alt:"avatar",src:r.avatar})):null,i.content?Q.a.createElement(gp,{isBubble:o,mobile:t},Q.a.createElement(hp,{onClick:m,styles:i.contentStyle},Q.a.createElement("div",{className:"close",onClick:p},"✕"),i.content)):null,c?(h=e.actions,f=[],(h=void 0===h?[]:h).forEach(function(e,t){var n=e.height,a=e.width,i=e.type,o=e.linkType,r=e.position,l=e.href,c={height:n,width:a,left:r.left,top:r.top},s="";switch(i){case 1:s=Q.a.createElement(vp,ua()({},c,{onClick:m,key:""+i+t}));break;case 2:s=Q.a.createElement(vp,ua()({},c,{onClick:p,key:""+i+t}));break;case 3:var d="",u="";1===o&&(d=l,u="_blank"),2===o&&(d="mailto:"+l),3===o&&(d="tel:"+l),s=Q.a.createElement(yp,ua()({},c,{key:""+i+t,href:d,target:u}));break;default:s=Q.a.createElement(vp,ua()({},c,{onClick:m,key:""+i+t}))}f.push(s)}),f):null)}),wp=Object(c.c)(["html,body{height:100%;width:100%;margin:0;padding:0;}"]),kp=c.d.div.withConfig({displayName:"router-smart-guide__Wrapper",componentId:"sc-ab8bk7-0"})(["width:100%;height:100%;overflow:hidden;"]),_p=Object(i.b)(function(e){return{router:e.get("router")}},null)(function(e){e=e.router;return Q.a.createElement(da,{visible:e.get("showSmartGuide"),component:cp,GlobalStyle:wp,iframeName:"smart-guide"},Q.a.createElement(kp,null,Q.a.createElement(xp,null)))}),Ep=Object(c.c)(["._MEIQIA_FIX_BODY{width:100% !important;height:100% !important;position:fixed !important;overflow:visible !important;zoom:1 !important;}"]);o=Object(i.b)(function(e){return{config:e.get("config"),theme:e.get("theme")}},function(e){return{dispatch:e}})(function(e){var t=e.config.get("standalone"),n=Object(V.useMemo)(function(){return xl(e.theme,t)||{}},[e.theme,t]),a=window.parent.meiqia.event,i=Object($.c)()[1];return Object(V.useEffect)(function(){ee("set","_MEIQIA_LANGUAGE","zh")},[i]),Object(V.useEffect)(function(){a.on("language",function(e){i.changeLanguage(e),ee("set","_MEIQIA_LANGUAGE",e||"cn")})},[a,i]),Q.a.createElement(c.b,{theme:n},Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(c.a,{target:window.parent.document.head},Q.a.createElement(Ep,null)),Q.a.createElement(ip,null),Q.a.createElement(Ka,null),Q.a.createElement(bl,null),Q.a.createElement(_p,null)))}),o=Q.a.createElement(c.b,{theme:{main:"mediumseagreen",device:"desktop",panel:{type:"standard",position:{type:"right",bottom:"30",horizontal:"30"},themeColor:"#cc8238",fontColor:"#fff",profileBgColor:"#fff"},btn:{type:"round",position:{type:"right",bottom:"30",horizontal:"30"},themeColor:"#007aff"}}},Q.a.createElement(i.a,{store:Ge},Q.a.createElement(o,null)));R(Ge.dispatch,Ge);h=h();a.render(o,h);n("sH9F")},wjrw:function(e,t,n){e.exports=n.p+"static/icon-mobile@2x.png"},wkqo:function(e){e.exports=JSON.parse('{"美洽":"Meiqia","来鼓":"Laigu","点击问题或回复数字查看答案":"Click on the question or send the number to check the answer","给我们留言":"Leave us a message","分类":"Category","姓名":"Name","手机":"Mobile phone number","邮箱":"Email","微信":"WeChat","QQ":"QQ","联系人":"Contact","性别":"Gender","年龄":"Age","电话":"Phone","微博":"Weibo","地址":"Address","备注":"Remarks","留言内容":"Message","请输入":"Please enter","验证码":"Verification Code","点击更换":"Click to replace","提交":"Submit","留言成功":"Message sent","我们会尽快联系你":"We will contact you as soon as possible","关闭":"Close","再次留言":"Leave another message","发送":"Send","对方输入消息中...":"Typing…","连接中...":"Connecting...","对话已结束":"Conversation has ended","对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>":"Conversation has ended, you may <1>continue</1> or <3>leave a message</3>?","你被移出了黑名单":"You are removed from the blacklist","表情":"Emoji","发送图片":"Send picture","发送视频":"Send video","发送文件":"Send file","上传图片":"Upload","评价":"Evaluate service","好评":"Great","中评":"Good","差评":"Bad","请填写评价内容（选填）":"Please describe your evaluation (Optional)","你给出了":"You\'ve sent the evaluation:","下载":"Download","接下来由<1>{{name}}</1>为您服务":"Next, <1>{{name}}</1> will serve you","客服软件由{{企业名称}}提供":"Customer service software provided by {{企业名称}}","转人工":"Turn to live support","免费通话":"Free calls","欢迎使用完全免费的网页回呼与我们通话":"Welcome, please use the fully free web to call us back","请输入你的电话号码":"Please enter your phone number","发起通话":"Call","重新发起通话":"Call again","请保持电话畅通，客服人员即将致电":"Please keep the phone available, the customer service is about to call","你将接到「010-52729285」的来电":"You will receive a call from 「010-52729285」","询前表单":"Inquiry form","获取验证码失败":"Failed to get verification code","加载历史消息":"Load previous messages","加载更多历史消息":"Load more previous messages","没有更多了":"No previous messages","加载中...":"Loading...","排队失败，请刷新重试":"Queuing failed. Please refresh and try again","抱歉没能理解您的提问，可选择":"Sorry, we failed to understand your question, you can choose","留言":"Leave a message","评价失败，请稍后重试":"Evaluation failed. Please try again later","客服消息":"customer service message","管理员":"Administrator","[推广消息]":"[Promotion message]","「发来了一个文件」":"「Sent a file」","「发来了一张图片」":"「Sent a picture」","新消息":"New message","粘贴图片失败，请用「图片按钮」上传图片":"Failed to paste picture. Please use the 「picture button to upload the picture」","排队等待中...":"Queuing…","正在为您转接，请稍候..":"Please wait, connecting through…","小时":"Hours","分钟":"Minutes","秒":"Seconds","网络错误，请稍后重试":"Network error. Please try again later","请控制":"Please limit","在1到100个字符":"In 1 to 100 characters","请填写必填字段":"Please fill the required fields","请选择":"Please choose","请输入验证码":"Please enter the verification code","加载询前表单失败，请稍后重试":"Failed to load the inquiry form, please try again later","连接已断开，请刷新页面":"Disconnected. You will not be able to see the messages sent by the customer service, Please check the network","很抱歉您对此回答不满意":"We are really sorry that you are dissatisfied with this answer","提交失败，请稍候再试":"Failed to submit. Please try again later","请正确填写手机或带区号的座机号码":"Please fill in the mobile phone number correctly or landline number with area code","请正确填写验证码":"Please fill in the correct verification code","请选择分类":"Please select the category","请正确填写姓名":"Please fill in the name correctly","请正确填写手机号":"Please fill in the mobile phone number correctly","请正确填写联系邮箱":"Please fill in the correct email address","请正确填写微信":"Please fill in the weChat correctly","请正确填写QQ":"Please fill in the QQ correctly","请至少填写一项联系方式":"Please fill in at least one contact information","请保持留言内容在 1～1024 字符内":"Please keep the message in 1 to 1024 characters","留言失败，请稍候再试":"Failed to leave a message. Please try again later","取消上传":"Cancel upload","上传失败":"Upload failed","上传成功":"Uploaded success","只能发送图片哦":"You may only send pictures","只能发送小于 50MB 的文件哦":"You can only send documents less than 50MB","只能发送小于 5MB 的图片哦":"You can only send photoes less than 5MB","最多只能发送 2048 个字符哦":"You can only send up to 2048 characters","请选择评价等级":"Please select the evaluation","最多只能发送 30 个字符哦":"You may only send up to 30 characters","最多只能发送 30 个字哦":"You may only send up to 30 words","抱歉，客服系统暂时无法使用":"Sorry, the customer service system is temporarily down","当前等待人数":"Numbers of people currently waiting","如果等不及，可以选择":"If you can’t wait, you may choose","上传中":"Uploading","已过期":"Expired","{{expireTime}}后过期":"Expires after {{expireTime}}","解决":"Resolved","未解决":"Unresolved","提交中":"Submitting","已反馈":"Feedback sent","长时间未活动窗口已失效，请刷新页面":"The long inactive window has expired, You will not be able to see the messages sent by the customer service, Please check the network","请至少填写一项":"Please fill out at least one item","您已成功提交":"You have successfully submitted","机器人":"Robot","安全验证码":"Security verification code","开始免费通话":"Start Free Call","输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！":"Enter your mobile number and click the \\"Start Free Call\\" button, the system will automatically establish a free call for you! ","发起通话失败，请稍后再试":"Call failed. Please try again later","已复制":"Copied","换一换":"Other questions","常见问题":"Common problem","客服撤回了一条消息":"agent has recalled a message","营销机器人结束对话":"the conversation is closed","经常使用":"Frequently Used","微笑和情感":"Smileys & Emotion","人和身体":"People & Body","动物和自然":"Animals & Nature","食物和饮料":"Food & Drink","活动":"Activity","旅行和地点":"Travel & Places","物体":"Objects","符号":"Symbols","旗帜":"Flags","自定义":"Custom","表情提示":"Tips: Don\'t panic, the emoji shows ◻︎ only in input area, just send it, everything will be fine.","* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M":"* You can upload up to 5 pictures in jpg, png, gif and svg format with image size no more than 5M.","字段不能为空":"It can\'t be empty here","图形验证码错误，请重新输入":"Verification code error,please re-enter","电话号码必须为数字":"The phone number must be a number","请填写正确的数字":"Please fill in the correct number","请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉举报，请":"Please pay attention to protect your property and privacy, and be careful when it comes to remittance, transfer, etc. If you need a complaint, please","联系我们":"contact us","点击此处":"click here","您的网络连接已断开，{{second}}秒后自动重连":"Your network connection has been disconnected，Automatic reconnection in {{second}} seconds","立即重连":"Immediately reconnection","你的网络已恢复正常":"Your network has been restored","问题已解决":"resolved","问题未解决":"Unresolved"}')},wtXf:function(e){e.exports=JSON.parse('{"美洽":"Meiqia","来鼓":"Laigu","点击问题或回复数字查看答案":"Ketik pada soalan atau hantarkan nombor untuk semak jawapan","给我们留言":"Sila tinggalkan mesej untuk kami","分类":"Kategori","姓名":"Nama","手机":"Nombor telefon bimbit","邮箱":"E-mel","微信":"WeChat","QQ":"QQ","联系人":"Kenalan","性别":"Jantina ","年龄":"Umur","电话":"Telefon","微博":"Weibo","地址":"Alamat","备注":"Catatan","留言内容":"Mesej","请输入":"Sila isikan","验证码":"Kod Pengesahan","点击更换":"Ketik untuk menggantikan","提交":"Hantar","留言成功":"Mesej dihantar","我们会尽快联系你":"Kami akan menghubungi anda secepat mungkin","关闭":"Tutup","再次留言":"Tinggalkan mesej","发送":"Hantar","对方输入消息中...":"Sedang menaip...","连接中...":"Sedang menyambung...","对话已结束":"Perbualan telah tamat","对话已结束，您可以<1>开始新的对话</1>或<3>留言</3>":"Perbualan telah tamat, anda boleh <1>Mulakan perbualan baharu<1> atau <3>Tinggalkan mesej </3>?","你被移出了黑名单":"Anda telah dikeluarkan daripada senarai hitam","表情":"Emoji","发送图片":"Hantar gambar","发送视频":"Hantar video","发送文件":"Hantar dokumen","上传图片":"Muat naik","评价":"Penilaian perkhidmatan","好评":"Cemerlang","中评":"Memuaskan","差评":"Kurang memuaskan","请填写评价内容（选填）":"Sila berikan penilaian terperinci (Tidak wajib)","你给出了":"Anda telah menghantar penilaian","下载":"Muat turun","接下来由<1>{{name}}</1>为您服务":"Seterusnya, <1>{{nama}}</1> akan melayan anda ","客服软件由{{企业名称}}提供":"Aplikasi khidmat pelanggan ini disediakan oleh {{Nama syarikat}}","转人工":"Bertukar ke ejen live","免费通话":"Panggilan percuma","欢迎使用完全免费的网页回呼与我们通话":"Sila gunakan laman web panggil balik percuma untuk berhubung dengan kami","请输入你的电话号码":"Sila masukkan nombor telefon anda","发起通话":"Memanggil","重新发起通话":"Panggil semula","请保持电话畅通，客服人员即将致电":"Sila pastikan talian sentiasa bersambung, pegawai khidmat pelanggan akan menghubungi dengan segera","你将接到「010-52729285」的来电":"Anda akan menerima panggilan daripada 「010-52729285」","询前表单":"Borang pertanyaan","获取验证码失败":"Gagal memperoleh kod verifikasi","加载历史消息":"Memuatkan mesej lama","加载更多历史消息":"Memuatkan lebih banyak mesej lama","没有更多了":"Tiada mesej lama","加载中...":"Sedang memuatkan...","排队失败，请刷新重试":"Gagal menunggu giliran. Sila muat semula halaman dan cuba semula","抱歉没能理解您的提问，可选择":"Maaf, kami tidak memahami soalan anda, anda boleh memilih","留言":"Tinggalkan mesej","评价失败，请稍后重试":"Gagal menilai. Sila cuba sebentar nanti","客服消息":"Mesej khidmat pelanggan","管理员":"Admin","[推广消息]":"[Mesej promosi]","「发来了一个文件」":"「Dokumen telah dihantar」","「发来了一张图片」":"「Gambar telah dihantar」","新消息":"Mesej baharu","粘贴图片失败，请用「图片按钮」上传图片":"Gagal menampal gambar. Sila ketik 「Butang Gambar」 untuk memuat naik gambar","排队等待中...":"Sedang menunggu giliran...","正在为您转接，请稍候..":"Sambungkan talian untuk anda, sila tunggu sebentar...","小时":"Jam","分钟":"Minit","秒":"Saat","网络错误，请稍后重试":"Masalah sambungan Internet. Sila cuba sebentar nanti","请控制":"Sila mengehadkan","在1到100个字符":"Dalam 1 hingga 100 karakter","请填写必填字段":"Sila mengisi pada ruangan wajib","请选择":"Sila pilih","请输入验证码":"Sila isikan kod pengesahan","加载询前表单失败，请稍后重试":"Gagal memuatkan borang pertanyaan, sila cuba sebentar nanti","连接已断开，请刷新页面":"Internet terputus, anda tidak dapat melihat mesej daripada khidmat pelanggan. Sila memuat semula halaman","很抱歉您对此回答不满意":"Kami amat kesal atas ketidakpuasan anda terhadap jawapan ini","提交失败，请稍候再试":"Gagal menghantar. Sila cuba sebentar nanti","请正确填写手机或带区号的座机号码":"Sila isikan nombor telefon bimbit atau talian darat dengan kod kawasan yang betul","请正确填写验证码":"Sila isikan kod pengesahan yang betul","请选择分类":"Sila pilihkan kategori","请正确填写姓名":"Sila isikan nama dengan betul","请正确填写手机号":"Silia isikan nombor telefon yang betul","请正确填写联系邮箱":"Sila isikan e-mel yang betul","请正确填写微信":"Sila isikan WeChat dengan betul","请正确填写QQ":"Sila isikan QQ dengan betul","请至少填写一项联系方式":"Sila isikan sekurang-kurangnya satu kaedah menghubungi","请保持留言内容在 1～1024 字符内":"Sila pastikan mesej anda berada di lingkungan 1 hingga 1024 karakter","留言失败，请稍候再试":"Gagal meninggalkan mesej. Sila cuba sebentar nanti ","取消上传":"Batal muat naik","上传失败":"Gagal muat naik","上传成功":"Berjaya muat naik","只能发送图片哦":"Hanya boleh menghantar gambar","只能发送小于 50MB 的文件哦":"Hanya boleh menghantar dokumen yang kurang daripada 50MB","只能发送小于 5MB 的图片哦":"Hanya boleh menghantar dokumen yang kurang daripada 5MB","最多只能发送 2048 个字符哦":"Maksimum hanya 2048 karakter yang boleh digunakan","请选择评价等级":"Sila pilih gred penilaian","最多只能发送 30 个字符哦":"Maksimum hanya 30 karakter yang boleh digunakan","抱歉，客服系统暂时无法使用":"Maaf, sistem khidmat pelanggan tidak dapat digunakan buat sementara ini","当前等待人数":"Bilangan orang yang sedang menunggu","如果等不及，可以选择":"Sekiranya anda tidak boleh menunggu, anda boleh memilih","上传中":"Sedang memuat naik","已过期":"Telah tamat tempoh","{{expireTime}}后过期":"Tamat tempoh selepas {{expireTime}}","解决":"Diselesaikan","未解决":"Belum diselesaikan","提交中":"Sedang menghantar","已反馈":"Maklum balas telah dihantar","长时间未活动窗口已失效，请刷新页面":"Laman ini telah tamat tempoh. Anda tidak akan dapat melihat mesej daripada khidmat pelanggan. Sila muat semula laman ini","请至少填写一项":"Sila isi sekurang-kurangnya satu medan","您已成功提交":"Anda telah berjaya menghantar","机器人":"Robot","安全验证码":"Kod pengesahan keselamatan","开始免费通话":"Memulakan panggilan percuma","输入你的手机号码，点击「开始免费通话」按钮，系统将自动为你建立免费通话！":"Isikan nombor telefon bimbit anda, ketik 「Mulakan Panggilan Percuma」, sistem akan menetapkan panggilan percuma untuk anda.!","发起通话失败，请稍后再试":"Gagal memulakan panggilan. Sila cuba sebentar nanti","已复制":"Disalin","换一换":"Soalan lain","常见问题":"Soalan lazim","客服撤回了一条消息":"Khidmat pelanggan telah menarik balik mesej e","营销机器人结束对话":"Robot telah menamatkan perbualan","经常使用":"Kerap Digunakan","微笑和情感":"Senyuman & Emosi","人和身体":"Manusia & Badan","动物和自然":"Haiwan & Alam Semula Jadi","食物和饮料":"Makanan & Minuman","活动":"Aktiviti","旅行和地点":"Perjalanan & Tempat","物体":"Objek","符号":"Simbol","旗帜":"Bendera","自定义":"Sesuaikan","表情提示":"Tip: Jangan panik, emoji yang ditunjukkan hanya tempat pengisian, hantarkan sahaja.","* 支持 jpg 、png、gif、svg 格式的图片，可上传 5 张，单张最大 5M":"*Boleh memuat naik gambar berformat jpg, png, gif, svg sehingga 5 keping dengan maksimum saiz 5M sekeping.","字段不能为空":"Ruang ini tidak boleh dikosongkan","图形验证码错误，请重新输入":"Kod pengesalahan salah, sila isi semula","电话号码必须为数字":"Nombor telefon mesti terdiri daripada angka nombor","请填写正确的数字":"Sila isi angka nombor yang betul","请注意保护自身财产和隐私安全，涉及汇款、转账等务必谨慎。如需投诉，请":"Sila berjaga-jaga dengan privasi dan harta benda anda terutamanya perihal pembayaran dan pindahan wang. Jika ingin membuat aduan, sila","联系我们":"Hubungi kami"}')},zl59:function(e,t,n){e.exports=n.p+"static/info.png"}});